<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: lib/psos/rn.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rn_8h_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">rn.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2008 Philippe Gerum &lt;rpm@xenomai.org&gt;.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifndef _PSOS_RN_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#define _PSOS_RN_H</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;boilerplate/hash.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;copperplate/syncobj.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;copperplate/heapobj.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;copperplate/cluster.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">struct </span>psos_rn {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> magic;             <span class="comment">/* Must be first. */</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keywordtype">char</span> name[XNOBJECT_NAME_LEN];</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        u_long flags;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        u_long length;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        u_long usize;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        u_long busynr;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        u_long usedmem;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">struct </span>syncobj sobj;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keyword">struct </span>heapobj hobj;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keyword">struct </span>pvclusterobj cobj;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;};</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">struct </span>psos_rn_wait {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordtype">size_t</span> size;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        dref_type(<span class="keywordtype">void</span> *) ptr;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;};</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>pvcluster psos_rn_table;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _PSOS_RN_H */</span><span class="preprocessor"></span></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_6163dc830b2462503414ab68ba41de24.html">psos</a></li><li class="navelem"><b>rn.h</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               PNG

   IHDR    P   |   bKGD       IDATxwXS 6GdϠ(5VZm:궶ժSU[W::*.@Q*Mؐ@FBqm&$	Os==缇a      N ]             YW       :
      @gQ.    }W\\_H$cӧO'      %%F" _!+  
   jٲeE ڶmE        ΂      YW       :
      @gA\  @X,VddWVV޽[-DFFX  
   4j֬YÇÇbe  J    666/& O>8p3R +  ȏ|G}4qğ!$HN:5swygΝWðK.͛7o˗/ǗCǏO>=&&Dz333SSS/^9s|:uj[}'O|ٳgO8ĉe/^;wĉϜ9C  q   KLL/_~)$%%ڵk߾}gϞ}._/,Zٳ駟/\PVVvgee?~!6L/]˥KBѣG^dɉ'ݻwe˖={ޖGݰaӧU      y'OF544\~}>>>6l~\t҈GnZzŋSSSB?2dK,477BETTBh̙ƍË-+9s9>C?     B_?j*++eɞ6myKKK>/Hz!{Sam! +cDj      y
l6!|<DbddT]]J.Ӌdo(妤oJ򽵭M{[V 8(   ZulZZZ"⚛I)S㏏=#'OϏ;ѣ6ltңGknnnckmޖBׯ_ojjR    ֽ`ݺu`Ȑ!K,y:o\2))	!oKcǎq8oo7Z
!;vlŊ"hذa.ܾ};>HJ

6m͛7[Zb1Ɩq{ׯS @@d   Tx̙3.׶mۜ.^HtA  5      ,+    <{VK$R  0   0LEE611ml,\\]\TOOWW[cc#b	 &    /H****8UH$cV:tᕔp8<ԗ$%1XZu'|bb& +  AEE]fXJ^yy]WV^
L&99Y8;[YH0nVHMhbiUŪgYZ6>7}nvUUH$AH$''=mT77=mv
q @@\  ]S}}3ͫofs?W\\טP,T3/^x]F{V_F^<{9<=d   

  0TBIa+-)/I#LM)xbMQ}w >yll,ll,l`jʸL&[Vƍ(+
"OaanibCn    >RQQO{i_C{Q64u@*ՖJRm435޽{!C<ښxD*E"fjڕH}lhVVV:99ij2={y*<__\RR#`KKk3
*JϞ6=4:7 V    Z6		ggkWW''k2Y[>*;;HUUlL671q7353yboe5H,mlLQS,dS~H$
(JWkZZ~=
eA@P 6_?06vJDJȺwo\6梃N'Plv}qq?դ3%>Q?O@Wm ⊊zP%RJ/xxk/xJ2.B"8صwoנAAnAA_J˗wdݹ45?fLرAm7'bc_R7lHsTVƽ{w{:~<)1q!=99_}׽{9&*ڗju+GBCgܸ*)`sh*JKkB`@z:LֹQZZ#{PVƕJ1>ˁFR==<=a< ]   I<kll),e1ʲ-..֡4FvxsѣLc@:=82`ssGO:HA5xcŐ!~ꗖ{Ο_Ξu#"hob*]{yVzccF;yrgKAPTTcMM-UyyªªBT ``   vS'xODx éOKc2lz4?#b=z30JQCCCB;AIIK<yR bntzܧW(Bee1c7oM[gJy_O7-5ߒk~DooǶ_"~ 7>>팪JAh?iie'70,0߃ۧ,[++9Uee\DJ&{wkhTXm =q  Jy2뎐'>-˼};ɬ><`ؠ`ә!$b3fP]x޹;%ðWw(+ΜfM:Ü$g׮q#.:OTTС .cLVsȈn4U!Dʼ<Nn.`"i.Ч^ qMuLfmyyU[^^dVV$)BB!ظٹٺڹں᫉9:Z]|EuG8h.x,fiHoTVƽ?7)qnvSS~}Z.;Qcǵk>WqzD"IL~cc+WV7~Վ3fZnm#7^q,ǌo@_4ҡa_aBH*JKkrr*Nvvy^'/#IȞzQi4j=0) A\ F.ɺ ^FXXk;`kDª2<dqM#"4# ES'$FZZtz1[[m(Byy轫WWw剎޻v+ƴ"={n65	?pUc;>ڵffÇLwܸ>=zc#	rr`B
//-cb)U`V||bRCB,.,  .Ey]_Yɓb|y8k']i++S__gwGȫi̸LAӃ;s[]SBH,~vmuX:tgϞ[7o~ڻk,<u*;FF#.M,VmbbN||{9d2)<ܗN<9ɩGʣ>Dd2lYZZʕuhx3#<H`efY$ˡO``א7X  `xl|iEml,e!a0yR)LJbe>{Vlll;b-**$ 3[`D۳֏?&ŭT%TagROxp=?4w׫)!!+6~'vkZuzءb2k33Yx%;:Zާ W  H$9XL&Ū+/++B5vvnn'?8;[w:(N.-YPP)Hu<C.?lS/;jTwh<@3'M~GtrS2%%5tDl03۩i<rO?wq^jY;|ük^޾ 3Ѩ)^{ bݒcF߾6.W"Ӡz  <+  kn2ܲ2.UdrYZ&[YG.^={ں`uG0yIMM#Uwm6"
P(e|̣MϕvrS,V%;YI};\TP\yڋ//ccbj*Sm{x
zz:S )thzXlm
/K_(}񢤨000ϰ0O}A #ͲuaK| 7BԔ"o	[5B`7{{M6>xu+aۦe˕Yfm03秂ʄ52_%/gϭW{_?qlM*RSnH+*rsw+I,T3UvhYbCŋ/J_,}񢤺B!h<
v q @TP\\vIy惷9%8z!b:%/mjDJI):w͚>}7+GF~3eʀۧjj/_~]\||fDmIN+TVfkk1vl<fL>,$W_ߌҲ}=h,oJJQjj1/4+<'<7<W"  $\nl´,`2B%`|%??g*K(<ɩ
}п^H$L>k"=iff<p7Iڎ(BMM-t@S5ey.=[׳gGFf>-ڹ'-[&u$2j+ݭV)thq8<ԡѫWOm,b47"90%09ᙙy;pw>^W  "f3/1qxV٘%&}^AS#^,j@z!m'ak0?ltQ>|\\FbzmO]LJJQb:%%1'N5嚚ƻwcc_ݻC"Ӄcb<f,SO&Us8))EII<LsO-   :1Ӿ$jT;",Ke'$dadRXWTT0A:(B?vIj#dܦѣwk8avdrg_ff/3xGEOO <\uhzUZYIKN.LN.LN.ɩ02t߈o?}D  t/!Lsv}6dazGGQzi*?ltQ.GWIaH$r޽fz5]ѩ@ JJb\2..{N2x㧤%'wޫWex0?rdȑ0д  tMҚ2.B$VO.	aX1dm:(p$.|M>_8o?P">{V|ګؗӁN'2Sm{ڦ0o:=8::Þ"W `?/ړdpG嵴SR
<`ܾ:?lD-**Dgyu(&R>MF>i>
hٲEFj)z||"#{#6Sms$c44	N#{@)@\a<rTVS0D;_K]*`2kQ;d./(?_NK><}fJZ[yM?x{{O>zZM i5ztoCBqJJdfS(}B`//  #[A>~`jb)j%~&KYZ
t>Nm#0@,TWXX]-ç]_~N6P۫qoθvg&&ڤI}CoQVW7>x{IGEy{A\ aWV_j+p[_jSA}}ezgS%Y~fm̙G7_rt2Bxܸ}V.,7ɬ=p ܹ O?駃T+b{bO*Kjj^whzhO.ھ$ogg8;?>tľCTo`  @T?]PPԂdan\x,ѷwG(<xx8!mӇ!TRRCp'奧3'M~˖Ds޽cc_aķ7?xϼu+YNN??g@	qbFvvŭ[鱱ƏoP.J  @cD"IY!JJe)29dT	rre,>_AQqrka	٩'BH*}pCƍOaJ=s֚@]{ϟuCFDmӦIgF|z2膬Cgr:4
bc_ƾ`[2d tD]]꒒z|	j;;KӾgO[}2|yyìP33cAx{r$iH{DN҇(pٳ͛J`1dboJkVNI)ܹzJJرA6Lq2^ͮ𰏊
;pOWKefsRY6_+8M~]{y
SLҟK 
 @aDn.7ųh.TBuGhw<Y~ظ<tRaۦo^轟>~ĖD^^':zիD!)WegOwI|;rsٱ/^}_ioo9ztoCT^
Z-vhde_u!!n7xڴ\ 5A\kBBq!j-P+Yh4,'~Oewo>4ԽOwssKUU$$daƎ
q~ضaD$11ML(/ԇ;rގ׮]o_J_yŪ93|͚qDe&eMM-616vlVVTvha㤩{ߟƾ%&Ξ=t0?»7tG**/$'E@NjhdgjnѕYöM?#
ΝOxǉ(J3~n}{??bf2koJ|8Ȉ<bD <n\GG#JccKaalr<QޡꎯAtrs璟?/v={ȬY	Y WL~-jYI֔V#{vyMQ~ضsDzwl>maDE2رΙ3/c.onDE",$ms'+6T;iR_*    IDAT3v@kz{J	qh)1'ߞ{@ |<~ A\]UvA@"W92?lDMo<@B:}sKۓu.C.B55>ccҥ-Ixe>_a޵k/ohhhԘ':jKL>_xҳ'+Y0bP`	+L&!_wA{y9x{;xz: 4N~yNvEEUd^mGMgwӷac$$|?s	jk~!ĉVW{o>,-UULpMK+;~+ϩTŋG!@kHN~;莐'{~X,ѫm3!!c#;.˛UW7{]]瓽?|I}2޸VQQn'**ihUκI++9rܹ'F̟?2GDbUUWVUֈD#(JMX,}8>>K!?,LTv1!	ƌO']uݼhѩ^4fLeQTV=x0ܹdObb]3^`Y;&~G"V:4OxpCT`A!:+ U dyy>_TBhTn3h:n@daihg~ضVD_˹{waeZǏ]\}cc_d6k^0iRq衿
	Κ?nnv?(b+V^ kMhW!@&C_PvPkjJ4ȇN?ѥkC(Bog,Xptz0ei?z7><貴ٳݻ?|A˘>}܉.
,Vmbb=L
Ӄ'Osrҋ#D"e2k@X&WG͟?Pn q"?!#23Y\.tG(&%12*+<=FEDFmpE۶]}dގѣӃIt:Yܷji}=..޽z5m )cGlZsҤOջApM		Y		YwdL'SBFz:K "LL(x揟h#xBRoIZR"8ぁԐ7;;KKJ<Y~'O
R}6(p}lrML([3wŋϤ%$|nC_֯=6ݻ8))HW?4ȇ)JJblv5'bľ6MKjcbhTf0b)UIO?*0EXූ_c233&PA\@9+gbBx`?/iD:>_ZyfZyyհacEGm3!`Gڍ?&IAAnYYOl:e=Vϟ"kD]4RW;w^gjg_v^5
Ʌqq׮l<llz%11gK3fqәB!:bPqli9p&gO<(S;"8#yQ!	QmUDB126&o6[|i|Β~<oR_{#V2wt?KM-Ϻq#vtzQ`:D"ɑ#vx>C4[RRRדނo.(*(,,*,*(,*ƧS[Z]EIu<c	gC%Y~Lmaa[R\..6DN-|so6p?nD{_#D">{4ð_}y%sd23wyo/'ċR<wªj_|0tzuS	TVfkk1vl<fL>z#'粳׮ti	6)Kwhd}zy%+>H(,*(*,ϯɘP||}}	z<	';DNNP(uGyrp0!b5^5UW7&&ft~X|sÐce7!$IT@Y[@=/bCJJäH$t[Μyx@	eQ}4ou;%)LZlM.
*3FG&~~q^AX,-(d0_(:4_^z#]t܊1HG1hTí#^,j@6~_>-JIv`*7!凕[^FF䯾2.Q?.6?Q(FvvW<E0;qݾ}1\nӏ?&?~ѱYZkl+X"ƍVCt1[USxnvl{rH$tzpLLoa6r`oiee`Y:)-l3"رyx.Ż`y
&?;'AfTh.AAn,MM-&9͛<u#¼kE0-q#OεRlǎisS~M]]sRC~@+ԩM.?cgg1l͛遁O?0!Tw7~x!D3rm0ĉmۮHH,*>9y3!0vݾZzD"ʯ^kLHȺ{7<aBʐի\]NZyժ0n}Gyԥ::4^*l@5an
+.n8Pm]*ŘLnAAU^TQQP~~NξN~~0IRŔۯ	0LrSPxwyV;:	کSId2I*dѽ#]#?׬p~&~~N>#
\TԞrG##2D{{.iie}tN,#HNaOT:ree\BDB?0w0
.()q˸uZ:=Xs#GE"LF7O^he=ۿ?~Ϟ[˖En4_CGqqQQ[|@ Ф{ocggg϶tx;2/W?G!;:Z!==k!zdӦ?22X036|ш/Qb%K0LA!SSʋәÆL_c~'Syrvp|tK.__!cc=mOF`4eW@ɎoϚ5Тu˗'~ I$D&OZ8vl!DYkbc_q8tLÆm3 H$Ҹq}nVwqO>m䰽{ￕͮP0[xQ0'+4ȑÇRXB"vBaFDn.OJuAXڝ;_L&_NxqylHX,c̘1cBCvkbc_-[vF*U}nͲy4,6Ւ%gď)vnCH$"!ddD?>رyDݦN=Z<!D"(ˆ}:	T{f͛饥5T]cc#*զ{7{c>ˎ){o%)矏z}7qEgiw튭_wŭ	Q'ƃ<3tnn>*F~F>FvH01Ӄ8"(0ڻkpkPUU+W}(Fڻ.<ŋOI3sX)"ؘL}͌i](+(\tA(,;{aa{1cƏmL&_O`}}\\\rmD={V<{Q:=uvGͼ\niV<<z1ԁ@\)_~y*\ɤޟ4l^5`L𯊇ataR)矩[^ihE:?,%a4Z'ݺz9>_ɸڦv|\DO9gdD""ȑom[3`:##r@ˉ(S{nr#aح[[;v!#=z^˧9tYY]Hhܸ6&ѣ?paoU򺬬LVVVyQQD"ôY$3gdDHÆo>̀Tw%WtPjj֭W_(%HRbWƇiy.~~N..~~ΐIo=|Wb.,\]@ k'O>A˙;D"0|lID"[zxS=<Əӣ_WD"-XysLw"g6kll8iJMϪL"U1UUHĄ"Hb)z\Atf؆aRTmwu+nt\]70TF1&t/_BSSSGGݻoܸ*_F&<W0/))ibX'E`fggz6
qKAKN07!0LwcDR1FL&m%:)z^NNs(K$"QDH'Oc&77}g}y=bxP{BP޽hꗱ`j^f0HD"Ʀk?~E(p8Mlv#TVf767Ə3G355:t?<yeu2Bro65ektpww/++k5"<W7z̶_C&--MXI)U駟۷O%jii0,88X2;vܼ}wZPJ(է׊
X|EmtTK$=f7s8~B!IHVT;qpUU&ϗP($|ϗ₂RGGDBnnJ$Ғ}6/PHFSYϟd2gur;Z0V[1cFEEE緣_Ƒ#	COffz;"lJ45XePA&MBVVc>Ro$cun:X1ŋO߾VKnd2B!RT"}駭œۧRhaff%?R"$cc#Paxty[ӵ_d)b&/ϯ*/(jnnAIXf&K#-m$С3f@DN05)q2*kCk;-[2PȦ*#\xq]f/Dڷ轫Vzܒ7fնꖖ=
!>+B1
rp\--M5RZ5kƌޣFTdfY<bD&#PEEU4L2`
_*$:߮K?I`ٺ'
 0h66}dmm~؇11I\	BM!++S<os@=1#𤢁T:<?+<;";<-,/狸&b	ٹPX[.&]   @q_n7"#{;s} j.t
Ͱ62O0a0    .s'k_n^cjJ$z:D"AP   .L&7vxT||E(--?&Uի#Jq$}n㢑zj[[Z<iD*U256://u&>|'/7:Rm6;֮4~:_akk~N~̕+WyBG&Un4{ ZKpLKKk׻w5of8#u
|~]W]Z<Clիw4UUhq׮]*G\\\TTT*6	֨yhq1/r]]azfͬgZoܯ몫VgmȈkK]Tk7Wm(oS?G
N|W
=z[mm-B~hMMMjKKKss!C T*BhժU.ķhaa|SAAANNN+V!HqFwww;;+V\|9$$_~QwիͶm:\믿999-[!TWW:::]V Rew:}jtR>}===8?4*{v\.DZv-BH"ݸqC$>T,GYC.wAC+qiʍJ,oٲiܹuuu0lڵFBkQϵ-_*At#533MV~I҃jȐ!7zϨ~wj9ʟ5bMHn%,s֬!;v\DݐoMN"Μ9}gZ[[TG65XZh?)//6}ڟ~	?;wylKrr2ɓ'W޿A$av`T **`<y˖-رcڴiiiiaaak֬ihh066+**N8AP!4iҤ?!TUUS?pB+t#999  `Æcƌ)((HKK		ٺu#\!_Ǎwy@eoP(,`2gϞEo\1W_M8ðWZ[[ðT33&X>Ke9ۯx3rv[i	*[oGkm^v\Z{roCBB׮]Rx	[;U>׶|UV֞ӝ^wǧO>}va'f&_jZ[4Xj9UV߿ҥKׯ_wssC3kDӎv744(8(|Dj@ʏ8kB
jQg_ZSU]gxPnU8Bhʔ)<~=zTzUչjLy,B]uwJcqFP+[Rֺʟ&Nr^)T;w00a®]d/HKK_sy***'BCCLMM8؈J$}Aݻw0D}YI.\
FFF.]WyD+D~*Ql=z|@Un;VVVB>۸qqmm~;aOoTOC/Jm4LW*wA巣/P٨/_?u%n:PNN-_rtq]lfho`2PY-
ӲqEJAjCqE~w\eQԀ5!mot&0lϞ뫪:P3oU8B?Q1^*iչjLy,B]uwJcyf]]]B*f.^833sٲe3bN]FFFSNtRuuuBBٳe»~B{f2={H$URRbccÔ# this is a list of DNS entries which will be put into DNS using
# dynamic DNS update. It is processed by the samba_dnsupdate script
A                      ${HOSTNAME}                                           $IP
AAAA                   ${HOSTNAME}                                           $IP

# RW domain controller
${IF_RWDC}A            ${DNSDOMAIN}                                          $IP
${IF_RWDC}AAAA         ${DNSDOMAIN}                                          $IP
${IF_RWDC}SRV          _ldap._tcp.${DNSDOMAIN}                               ${HOSTNAME} 389
${IF_RWDC}SRV          _ldap._tcp.dc._msdcs.${DNSDOMAIN}                     ${HOSTNAME} 389
${IF_RWDC}SRV          _ldap._tcp.${DOMAINGUID}.domains._msdcs.${DNSFOREST}  ${HOSTNAME} 389
${IF_RWDC}SRV          _kerberos._tcp.${DNSDOMAIN}                           ${HOSTNAME} 88
${IF_RWDC}SRV          _kerberos._udp.${DNSDOMAIN}                           ${HOSTNAME} 88
${IF_RWDC}SRV          _kerberos._tcp.dc._msdcs.${DNSDOMAIN}                 ${HOSTNAME} 88
${IF_RWDC}SRV          _kpasswd._tcp.${DNSDOMAIN}                            ${HOSTNAME} 464
${IF_RWDC}SRV          _kpasswd._udp.${DNSDOMAIN}                            ${HOSTNAME} 464
# RW and RO domain controller
${IF_DC}CNAME          ${NTDSGUID}._msdcs.${DNSFOREST}                       ${HOSTNAME}
${IF_DC}SRV            _ldap._tcp.${SITE}._sites.${DNSDOMAIN}                ${HOSTNAME} 389
${IF_DC}SRV            _ldap._tcp.${SITE}._sites.dc._msdcs.${DNSDOMAIN}      ${HOSTNAME} 389
${IF_DC}SRV            _kerberos._tcp.${SITE}._sites.${DNSDOMAIN}            ${HOSTNAME} 88
${IF_DC}SRV            _kerberos._tcp.${SITE}._sites.dc._msdcs.${DNSDOMAIN}  ${HOSTNAME} 88

# The PDC emulator
${IF_PDC}SRV           _ldap._tcp.pdc._msdcs.${DNSDOMAIN}                    ${HOSTNAME} 389

# RW GC servers
${IF_RWGC}A            gc._msdcs.${DNSFOREST}                                $IP
${IF_RWGC}AAAA         gc._msdcs.${DNSFOREST}                                $IP
${IF_RWGC}SRV          _gc._tcp.${DNSFOREST}                                 ${HOSTNAME} 3268
${IF_RWGC}SRV          _ldap._tcp.gc._msdcs.${DNSFOREST}                     ${HOSTNAME} 3268
# RW and RO GC servers
${IF_GC}SRV            _gc._tcp.${SITE}._sites.${DNSFOREST}                  ${HOSTNAME} 3268
${IF_GC}SRV            _ldap._tcp.${SITE}._sites.gc._msdcs.${DNSFOREST}      ${HOSTNAME} 3268

# RW DNS servers
${IF_RWDNS_DOMAIN}A    DomainDnsZones.${DNSDOMAIN}                           $IP
${IF_RWDNS_DOMAIN}AAAA DomainDnsZones.${DNSDOMAIN}                           $IP
${IF_RWDNS_DOMAIN}SRV  _ldap._tcp.DomainDnsZones.${DNSDOMAIN}                ${HOSTNAME} 389
# RW and RO DNS servers
${IF_DNS_DOMAIN}SRV    _ldap._tcp.${SITE}._sites.DomainDnsZones.${DNSDOMAIN} ${HOSTNAME} 389

# RW DNS servers
${IF_RWDNS_FOREST}A    ForestDnsZones.${DNSFOREST}                           $IP
${IF_RWDNS_FOREST}AAAA ForestDnsZones.${DNSFOREST}                           $IP
${IF_RWDNS_FOREST}SRV  _ldap._tcp.ForestDnsZones.${DNSFOREST}                ${HOSTNAME} 389
# RW and RO DNS servers
${IF_DNS_FOREST}SRV    _ldap._tcp.${SITE}._sites.ForestDnsZones.${DNSFOREST} ${HOSTNAME} 389

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 //qƥ*v/?ٞիH$?׫d㻯LBdQ޸q&&&%%%'O:t    IDAT'ܾqz~$&&N8Q$m|s]PPJ*UII?L޽L"+ӧOGsN3smk8ݵAw\LM_PZZگ_??CCUٮvϵcWNk@%j(k	!Vҥ&G$೴MAڨpp@[5^ܦJGc-Oe!b1Bbɞ)++;tرc׬Y?s֭qƩ/]tÇ{xxȞC4UW>y_~|QQQ
cqL{bddTXX?YPPwu)SyƤ\)S|'?>|ۗ?d2yW^e0=ztBBBRR҄	d[Kg,:^~]?.*_Qϼ|r=z󉉯KZ;ږF%t윫;f&ަFX2>>>^3##Cy#jW\ ?Vq5pʗ@&t[-K:}!ۤKm5+\PG65UZeo?ڊhmllB?3g RVZuܹ;w_WN<YKPDDD"ꫯ̙#իW?}tƍ>Bh֭+,,̜8q"t:VWWd뵴fٞΙ3x̙qQQQFFƗ_~|
Q\&>OP|-[=P޾q0a?0x`cc1cƜ:u[m|yufrT~;_p\_Q͙3gӦM陙+W]",,,h4چ.]OlaնLlek5pmZ]?r?իl6֭[7oVs=RPz5!b:DT3Yf:YSEh?:3BvsBx˖-4+<طo_Pa˗{p18H4dKKK3K.577'Nx{{;::\cW^bkk;w܆Ξ=mbbtʕ65yE???GGǏ?X `r̙гg5kGDB)Tvacc}Yf9;;+s\aX]]B1kjj211Yn^YmOC}7L#VvSv(R(*RnT`ڵ666fR*i4>u^(m}TY	]71w\+053Pii5r<+W~I$b>DJ+hW*__*EJL/8SUl@RMǝܗswNnGKx?,\͠]=m`5<4;B6n8{l?ۘǦ:>+iF*Weq\oGW'{:+ZcLqe\/id_FϜy"iZWW8y'
O<h"~ohf 7<9$-:@.X 22R%K,Uנըxz^fS @ Աp\HtAUW¡]V9*<|Bӕy5,YT~; ,hf  uy!C.AJW8_     ߻y3 A\     :nʔ". +     ޠ~72AtY􎭭ŨQ.]zFtA w~     <)ǏXZ33cs2ٌr飘~k֜oh}+233u_ҢɁ3f@8KHuՖlla!"?~<tPMmʀv\?/ɬ"/xIIMJJӧE疕q̌q#F}^AUBipkcav^NLL?n?RtMʿSF[nFFBPׅ2
޾۱HٱX=X,Zs>a$cc)7om'օ[BK.uufRssqg6eakSSc[>}zppp:6TU75ZZW5~T*A
bqj\"fgƾ:zW?t>>~i?tBJmhl8))aPlP#x<D"]k|7 h[UU˗))EIITyy9DD:ݎvAbc_E]4rFFhBD"odDr㮽/2rԩz*e@]ŋ䂧ORS>ᾃillDt?ᇻii#Rt;-/^<xHI)|T$XaF` v)?xv+V93ZggWw˖D]-Zdff;[Z] ڂSR
SRRR
[Z pwqݽWD
Э5732OaL>%%5߹p!zQ|0̘B7<vޝ;뼼.VG'+>pSRRR>-uV䃟FfI$/ׯ0pq Ҭ,VR#%(9;:Zy}nk	Y{_}lee:o[iCBqt^'.,z1*I6FiiB
rV%9faaz<q *H$L~ü&KKdoML GsUW79رF_hхҢK&O>w{3f",#
)\}GM:H	g<JMBtA 1  JJj))x
sss7.ԩǓ$̙Weڼ޿ɩ#ĪmJM-~(%իҖoճkK[̞}4=VD 
 GÞR`{Gu[r|C	-fYb4jCt4MhG # !

*SSSRRS+B.zUg1.)$痎HtY   8ZӢt&Lswk,'?pq>v$Pa̙?Ӈ&QfP@78w~MMQޮ0YBmG]@ + Ќ/J<Hrﾋcj'Oc3хҤO?=}CԂP@x<W`{뉧;fwL q ,ɅBX~ͥ<8x0j̘5kCC=.fxQvEF6[A~|i^Ι/e_ @\vKd<}Z${+1A*ڻvz:sؠի{](}dəsc4B$dg=r,,L}~	[[Ύw_FtA   @w
?xoì_?O<, ð=+4g1tz0хEN3]gz5f=+NOgD=m4{  7
28uqq,(!+  D"ϯ|()!]7`7DFx)!~-%xt1vll9r{o2貴>jʔ۷(XZPPiQJJaZ`zr]ҫWe{KA\^-IY<gmץVӧEIHݻ%N`ϟO^+!, #:8^ZZYZZ1+^pPpC[ ވͮ_}lX8W w8z<n>8+ȑ˗;/_>zʔ8vb֬#,VmB熒F@ִ)'Xy'%,@  @UV6$'Ȗ >୷\]m. 1rsه߹r幫ݢE#fXƘKZfey3@h[ޛ6mC.5+ 0/K<`|Y*IdGyzv5?ob?Ct(ʆPvKeic	ʱ;WXhu+rbR]9>?>~}$=3=M|3Qzw&O9j"Puwk\re,(E	,}jҤ'$uLlTwW7OoDãI=eb:XC(??['ȏIg7I+/+uhإ
 z0phIC] *ȈxXXX$8:i$[ddg:wCƎ>}z/韈ٷŋK_ըT.2%%%˸lڵiIC] WnWdccH(,,;r䶟_@ >ˌuuiϕ]B__`bE;K%pQO?mx*WA@PW ȭ[dܹ]T߷-2ܒalq	Bwuu&m	F\zQ""ej*.J@8HIɎH|/rk9dEԩmۂ߽+4f'33mڡjO7nt9ҞvA<E	0W:^A]U"#>>o~Mͦ@tۯ&'gi~mHvĉ7Iut@4@k\ Z\]wXYZhtPW 4vѩlIXptlckkڭyVx1JBBFu6JK+zla{DY!f8yrcYpQǏ?޽Ųe? ѣȰ5Kgןnjkk`CwNۮݻhM7	:dEqqyl쫘{rpQDϞL	u Ԭdvr"#""i˖aa񶶦3f۷=D`-ZR(%_xaÇ)QQb1ƨsgΝ;v4lDf9fofnӦ$u |ۮǸw/LKKXȈHz5ʪ̙}DR*,,s#ie@ai'V4mԮ~ǎ;tbfdԂvF:tX>GwA@PW ı-nTsgc;;S;;.]ei'O^q-((Ҳ)?-ݯ]{:vÇ'RYسt@UKw[K.4 boN< URRCC""Ix:OEE
ɳgov9s桁h}t2ȃ7n,RUtĉ?N	Y(IbII|ɮVr2''j٩SӤgH
 7[dƥd[d1F?!%%z@@/=뢜=6d#%?H@%&f::vmAv nK=~rZactnѼng睊)KUT$:ϙs"0pdΈVTT+Ľ{UL۷oEƹ~d4 ܻwQQ5oѵ4nUg̓C<=&M!^׮-PRdt@;t7Auȝk/xv u HE|mxx@ bei"#'}BE"{3I༯^	_ȥυ& BoN|y @
 ɓȗnEF,+uZڶ(**?yΝ׊G>W˖}҃V8sؑ۷rw+;5>$K0|	((   >}[d$)[[JIښ%%'N]4hͼyLLtb13t²uܹ'߼	Yhie|&oWhoMBqbG̾D³q MޛmxqA  utv]۷srh@tí[_4f֬:tw{o1Wjjr9Yj×pbc^^U/EEEEFE>~^V&PSSɰsgcckk#]]u0׬2|xY  *ȸ{7ի-2L[)K>[]q-)]ױaCh.D	bPD??`Μ?Ϝy !|>OYÝXedDGFE=z_Գ1b	]t7(#f3vmM;P dI/V"ѱMf"C,f_s>}͞ݷsgYTT~]OO_iyŋ\.G,jM&k,͊/\Ð#\ژ*INqqo	!rd	YwJ	LB) dUFFԇ[dtfޢdb0sۯ>|bkk:cFV\ҫWץHo
{m0o33͙ݵy<^˖;vqw/#"bb2-w&Xz}cմ + @de=z2"")**U 53Crj,[]ӎ]ϪsEEe|>di!۵...3ݴmύwDEDp8JJ5[$bbҢ**jjʖzM]
 mC&t  yS\\-2KV"M:._[lonb&MOd˝;_m[ɓ{.y<^Twe uu;y*Mv
ݻ1Թs^ʝ6ח=n$T((ڶկlm #;F3ǉvu ȳҊǏoѩ.Ux\.OGGm៵hRttW\yҦMˌRBciQ\\>wɋ?)ݲÇ+ee<' ?<jQ/.^׽{I

u\b4::mmz0%;皙McGiX@eeu?%) X[d1n݊/QUU1+V=t(L x߿ӦMnvŋ?kBsp0?thb!رKMv!2V4$.mϞ6.TXXWZMpUlkiM@b^jLOjPW @cM(~	EWMϟ|
SSSZͶgDvvef~--iܑ/Ǐ?_.5Kr9۷::wWvU)(TTwu?HCz5+ 'D$zJ|u?ݕo.|o5ih شyԠ Ǝa{MWVV\XLzܼy^OU x<E]Jɓ'yv7K$&rX;NWWZLL\;w8RϪwQQQQiϞDMU 4r#Fkiٳ@n  {ΜyV    IDATpV|夈|"oJQk+u[U^-?fy<nϞd߿H$޺֭W9"3[^W$3yi==W(%3JJ*v}ƧjyCηƶt RH YY-[dGwY Hhh%%OaP$-ԩmF|l+\##
?/D">0(-x<׏VV3g+)dfqig^qUU]ն.jhE/][\,yljݶ@&DF,,,35\  зo{LJJq+*q.3pqz0LJJQnnynnEnny^^yNNy^^yQ=,Cx<X,Iu]޽/22J<=nQܼ̙dcc-5yޕ;\|Ѕs@J[tbۘ\Ѩ  NpjX%aD!C{̽#9xj<s8ܜ1UWU/+{.dEE	e	kڴZs8\BjnyVtpB ,}nl͚! M Pi[W((ZPmRC_^35]]-5ttԛ7oJ2J$y}R>!jEEe"8**vX Mffӧ-r(C] P]VMCCCEGG]WWY&!k`i`aBȩS;KSRSS2ML ܸLA׵kkA2  :NHih4ԩIN @]ݼ޾uӦX_=V   @[zM6    nߎ-ׯ= @
 Pyu|djjgjp'!!v
 gZ[ּ4*+  HRRVՑgϺ P@tʓAlh @#NNN  "$Y~~) 
 #
WXadd=vؼ<v<//CKK˫?~x֭NZRRB	СoՃBZl~մiS{{[Brrr8!D$ijj^tm
		166ڵk=}	!@SSsՎ+++eee33G.XZZjhhZ	  Ν{ԥYVT@] ymxҥ/^]1cFzzzDD?sʕ7|ŋ_zꂂwww;;Ϟ=;''ᄐo߲_^p᧟~"널0uu7nBz>x͛6m233wqܹ6|lp˖-qqqw޽uݻw.]Z3fHNN^l㋋?|.\p\2+Nl)-z5v@4Ac  
BH@@@-oΜ9~i`` 0<ɓ'x``y||<!$&&055-//YQQX,}6!$>>}$07XCaVPPݼyKr$'O0;0ś7o;V}d^^/{BH{xMaD"o' ܹ23hi  '%%ܜݶmB222D"Q﷛577OOOgo[XX7,--߼y2hР]߿	BMMMBjdd[hccs֭7n߿񖖖Z_m۶ƫLKKp8)%%544"""߿D__R]  N~`F;H <(JWW%%%㉉Zbo'<xΜ9wD/_vvvfosܹsqqq;wի׵kBCC]\\*@Ukׯ˶fUѣNNN3L  ^	y6r=  EPW  |1c,]Ǳ4BY^|ɓe˖=}"##ǌS\\\ZZKKKWXA),,v
vܹstqqٵkW.]z}A###jϭgϮL2jԨ9rIII6ҷo_r} 2ر-Z4uv@;H  gɒ%NNNݻw722ڴi;sN}}}[[[%K&Mrvvvqq7onݺÇo߾u#F(A111999W!}-++ѣ![nU*rѣGť_~\tQn+_ KEEe@@@&Mؗݻzz@	?7bv"ahg  "'  `ذaԧj?k}O:E; |ZPP)]fh؜v"^    ;?`A]  'O\A %'gݾ?fL7A@꠮  :::u ѣwZݻ  uPW    @?>vlw!:    :9zP(3+  PW    	Bǌ馩ٔvF+    ΜyY0qB]    0WέZiRO;  tH\AA4bÇS<; gϟٱc  6 }v
Iyٳ?lB%	S'IţG
   4oӏ}Ԕi' iAO?mݻu  '3O_꜂{?ph ]^.8wn  0o  r9nnaaXϛw?C; Ph  p  j( `SAA@ڡ  -
 nx>jԞ|1, PW  @mJ||:fggvPKK=ډ @r֢i  Pf͚^=9~|/?SXXF; H+O=J;׉v^  u(FE,fjA;\  :jQ _xL;\  tqZ)+88ӧ݆n@]  _mQ r=72}P  % 22w1kV_YPW  \-BEȁ.5kdGA@Ơ
  ڢ Cl~|dC;  Posw]RR~li >  ޠ-
@]r+
^  mQ 2gύoI;$  P CV>Ľ%ZZLB  4EȊ/wۻ?
b^  mQ Ҍa7]%%AAs\߄/  ఉ4;u*޽M   Q11iKN7aԔi'hJ׻v^z0, PW  mQv-
./ן޺E>|%  @Vav=v@kY@桮   @KiiEޛ-,tH;  @ڢ 3NE޼eKY@   ( Iz ߇ru  HEH@E@ر_hg  ڢ ڵAG	Yت&, ?PW  4B[@yU[׬2fL7Y@   酶(U^.tvR=ujBB]  RmQ _Ϝ:qBt@A=C]  2 mQ _/44np_ߑC~G;!   3?NmQ _w͝:I;'   KeN=@S),    |.fd yNohvΟqGQu  Ȟf͚^=ҥB'-˗),,ag<ܺH7o.?ޱW<C  ȰZڢ22w_WRRaرX)H<lخ+W+++Ў+  @r9@DYtXX<՘ lAp  Dբzj;z8.Ӥҕ+LMigD7]WN;?   ?ض.)*sD"1;WWW@bJҮClH   @~mQ;eWPuބ	Bq-O̙'0۶@Q  Jff֭WWBQxxUg={	y{X,,  ʯxH$>p ȑ; ai-\bkkJ;4"_  }kqvf.T _㓹\t@z  ȏ-Tزܟ%t N,ff:QQ!ڱc4
0\   9SaJTTjvvCacj?Ԕi'O[o_hgFu  4y楧N^EPH@HQ$BttJڴɥMN_(,,nĈ=H;4F+  Ap8{{{CCCAjPV/,TPR"E޽۵kSN_<'-mvK;4R|  @n͝;wذaS@]%є)G7oy;,x    m˖>ŹJ@ㅺ   @D;vw^]YQ:    E9KGYC]    22
&M:ح?  (IHHpoW#<c-RSS=== /$$$w."	4m?':
 @5klѢE}$--O>ٳF2/d=Uhg u  H?--64Ybqvv'a$Avo@=?1mڴ=  @[n=uԒBH^^WYYY@@SSsBBB:pڵk=}OС/!ޞҲeˏմiSPb
###mmc0<!>|JKKkڵǎ333SWW_lNjQ%U{|HHƪU[R#,,nKӧ, U0   P	!zwŋ5jT޽cbbV\>)׭[7tԘ:;;<yѣG''pss+VT>=???>==رc8pѣl޼111vvv^^^>Ͼ.((طo!d{!deeXԺj
O>My'ennnnnnu5mzOzD,+  AԱa055xO<akmaavpppǎO<Y8Ϟ=+**ŷo&W+><>0Cao9s{ӧO1<Vݮ<Ǣ%߼yaHĞu-}m~>%%崳 T}  &7o222D"Q֭AssWFq><x۶mGQQ1%%eƌEEE۷񋊊B&!$%%ܼm۶%^__P'~K=g9!~PEI** T5  @wBH\\.KJJb[jU+ΎW^lVyy̙s]??:Ε&''֮]K{߇Q?%WTY,0**j  u  4Hoo1c(((Ϛ5˗O<Ylѣk|ȑ#.\ۿvu5gϮ<Q*ǋKKK|~ii+!]7><s;f̘K>~866vƌlQuY/y߾}u<#?'Ni۶>:W   HW:uuZZZf*++c&''g̘1-Zӛ?~YYYJKKgϞ۬YcV~--3fVabbgϞ#F{{Mxeee^^^#F`']}+*3|xuɟ<'e_!.]ij}P0e  @q8aÆQ9{BBL7ԩSDGs0u~6   Rii9߆	+  @O<v: aeZPݽ{l ,  !)D$	\8G]]vOC]    ]7dttٳ3юP'+    ڵA?:v*2u   9t7|}G::3`   p!jE\vσ  P9PWiiiS4jaaq3g;۬Y}hgl  azz:RJ]ZP*sih=J6lW~V\ {PW   Hڙ37lY0vlYhJ;Pwښ?[UB]  @@ 
RXX8sfouuڡׯmR# `j& |!   ԔV?{U(OkxG|l\\]w(*ghh4ˡ   С0_k)SzNCQ4
e?WXXv,5q 

   S{}R=]x<˳2ȑ{^:wnQq 
   )u޶m'O35r0Kh/gkMA   :۷_|бܹN}0<>)    R7[_ekkdI{ִAXaMKY 
   AoNptl|@+VWuk]c>   qk=~>`@ŋ]LMi'/s7ݕvz  @60s.%$dd`iϰ,]:`޴ ?   D,f.^^Wv}dZe> 4   G D\.**p92PQ'O
r3ǉv  @VT<sg˙6	WVV
;u*r޼?7~?Y 
   VTT~pﵦMM5vl7EE>PQӧ˗a   99Żwط_mmYхEOvdxǕ+]ighp+   y۶<yLg~tp8C5R.Lrq*(   7		7mccxCډgpsݴ4+   ӳgomp!{@.f57o>?tw[CQ
   yv.ݹ_oߊv"9w֋qv墨Fu  [Bl;-YDv"lăZؠ   h	
޸RZZtu5h+W<<lqb\   hDbu޼6vB--UڡQ3fsw۰W*qB]  -[).p92P2هf=ڵC1Q-   TII;v\Ӧ0a
Cɞ'.<5e˖D; M+   osSMMe\ûPWG{^K2   @o̙}F肙ǟs^^s:@
   xի`F  	IDATۯ=ssy	>uW4iRY 
   -[.EwlhQډ^f#, u    **uWcx{ɐv"iq㥝;onG;A]   r቎mVԮ>D4Ō'NruL;tA]   zO_iɒ&&ZQ f:~cqYю uPW   1aåwwj%9&w/i~v i   J =ʻw#GϞWKKvWPP:fG[cq 
   <(  bJK+ƍs52P%3pԨ=YY'NLiVv 酺   DqqCa;v\yS0qb%%>P_.?$))ƨ`ZZ\.)Zi PW   -޵7o:g]|ܨ{ʔ#/F><WH\Վڽ 
   Zo=zаY}˭aĲ2AϞOXS~i;!DI̎RGoZ<8Q]]n 
   鹾W󞅅ܹN?d]޲2o%O& %*\ҪUvphg8n$   P\	
xݻ7׮ 3

]Yɓm޼?Xn2\F{ @]   ѣ/9:Yt@:a\B`i$[oDڶmy,E d
   h(q6\JW"M*^0BnBk\y<n><%:A]   aӧxyTT<M&AAsʖ[lg{\Ú5C$
@F  p>}Uˈ%rsݙYH%!drAwY;H(~) j   Ѐ22tYSbE%44H8Xrr֬J|>O(YZ8xpM$@Fa4   h@[\pB%@e֨Q{k'IXq&p8gg1c9:d 9   ЀWdfṗ!|>{w#G&)($*<<qȐm+mH{Mͦ  gPW   @*)HLLJz.113!!#))r"0z1Xa''O_q\Bcn^ υ   VBBBzzzՑo^.z͛wJѪU<Tllڵ55z0jgP())uڵ!.̯   U^^nhX.xjjJbv6"ss3kkvѧϕ_L    $@III[[H&!Fؿ     
     Z+     k        dOBBM8Xi͚5p$$$s>u   H$--z9TVV֎;bbbh !    bqvvv*//a##z9 |u   H3gXYY)++=zbooOiٲ%!D,رm۶w !D x{{hjjN>>biij*ɼX }   "www___WWK.?~Ȑ!o߾%ܹsڵ=_>6HٲeK\\ݻwƍtҪЅ߿<tӧW@   @H$r@MM377WEEvڵiӦ鹸_cܹаC7nzjgRUUuuu%5Ks+   >cccggsjmm]eǎ?6HIKKp8)%%B >    }Gprrv4::'O|l00ᵟiPW   T۷/[Wdeeq\EEEv2cƌ;w۷/_^|	!#G\paRRRlll}}}k߾}|q   >/[lĉM4111+**<yH$Zxqjjjv=P !dҥ/֭[yy7mTmIz쩡A!03   <%oߞvӞ={ ]     _u     |-     PW     B]     _u     |-     /   4v9P^^N;4B]   KGGvd``@;~     0     
     Z+     k     JG=    IENDB`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        59181b306275613af215f49425da6301                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: kernel/drivers/net/stack/include/rtdev.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rtdev_8h_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">rtdev.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  rtdev.h</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  RTnet - real-time networking subsystem</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  Copyright (C) 1999       Lineo, Inc</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *                1999, 2002 David A. Schleef &lt;ds@schleef.org&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *                2003-2005  Jan Kiszka &lt;jan.kiszka@web.de&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *  This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *  it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *  the Free Software Foundation; either version 2 of the License, or</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *  (at your option) any later version.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *  This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *  GNU General Public License for more details.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *  You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *  along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifndef __RTDEV_H_</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#define __RTDEV_H_</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define MAX_RT_DEVICES                  8</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#ifdef __KERNEL__</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;asm/atomic.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;linux/netdevice.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;rtskb.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;rtnet_internal.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#define RTDEV_VERS_2_0                  0x0200</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define PRIV_FLAG_UP                    0</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#define PRIV_FLAG_ADDING_ROUTE          1</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#ifndef NETIF_F_LLTX</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define NETIF_F_LLTX                    4096</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#define RTDEV_TX_OK             0</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#define RTDEV_TX_BUSY   1</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">enum</span> rtnet_link_state {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        __RTNET_LINK_STATE_XOFF = 0,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        __RTNET_LINK_STATE_START,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        __RTNET_LINK_STATE_PRESENT,</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        __RTNET_LINK_STATE_NOCARRIER,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;};</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#define RTNET_LINK_STATE_XOFF (1 &lt;&lt; __RTNET_LINK_STATE_XOFF)</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#define RTNET_LINK_STATE_START (1 &lt;&lt; __RTNET_LINK_STATE_START)</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#define RTNET_LINK_STATE_PRESENT (1 &lt;&lt; __RTNET_LINK_STATE_PRESENT)</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#define RTNET_LINK_STATE_NOCARRIER (1 &lt;&lt; __RTNET_LINK_STATE_NOCARRIER)</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/***</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *  rtnet_device</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">struct </span>rtnet_device {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">/* Many field are borrowed from struct net_device in</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">     * &lt;linux/netdevice.h&gt; - WY</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        vers;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">char</span>                name[IFNAMSIZ];</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       rmem_end;   <span class="comment">/* shmem &quot;recv&quot; end     */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       rmem_start; <span class="comment">/* shmem &quot;recv&quot; start   */</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       mem_end;    <span class="comment">/* shared mem end       */</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       mem_start;  <span class="comment">/* shared mem start     */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       base_addr;  <span class="comment">/* device I/O address   */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        irq;        <span class="comment">/* device IRQ number    */</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">     *  Some hardware also needs these fields, but they are not</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">     *  part of the usual set specified in Space.c.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       if_port;    <span class="comment">/* Selectable AUI, TP,..*/</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       dma;        <span class="comment">/* DMA channel          */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    __u16               __padding;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       link_state;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">int</span>                 ifindex;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="structatomic__t.html">atomic_t</a>            refcount;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keyword">struct </span>module       *rt_owner;  <span class="comment">/* like classic owner, but      *</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">                                     * forces correct macro usage   */</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        flags;      <span class="comment">/* interface flags (a la BSD)   */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       priv_flags; <span class="comment">/* internal flags               */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>      type;       <span class="comment">/* interface hardware type      */</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>      hard_header_len;    <span class="comment">/* hardware hdr length  */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        mtu;        <span class="comment">/* eth = 1536, tr = 4...        */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">void</span>                *priv;      <span class="comment">/* pointer to private data      */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    netdev_features_t   features;   <span class="comment">/* [RT]NETIF_F_*                */</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">/* Interface address info. */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       broadcast[MAX_ADDR_LEN];    <span class="comment">/* hw bcast add */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       dev_addr[MAX_ADDR_LEN];     <span class="comment">/* hw address   */</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       addr_len;   <span class="comment">/* hardware address length      */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span>                 promiscuity;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">int</span>                 allmulti;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    __u32               local_ip;   <span class="comment">/* IP address in network order  */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    __u32               broadcast_ip; <span class="comment">/* broadcast IP in network order */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    rtdm_event_t        *stack_event;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    rtdm_mutex_t        xmit_mutex; <span class="comment">/* protects xmit routine        */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="group__rtdm__sync__spinlock.html#gacbc89e880b42154cb65aa8317195dc03">rtdm_lock_t</a>         rtdev_lock; <span class="comment">/* management lock              */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keyword">struct </span>mutex        nrt_lock;   <span class="comment">/* non-real-time locking        */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        add_rtskbs; <span class="comment">/* additionally allocated global rtskbs */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">struct </span>rtskb_pool   dev_pool;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">/* RTmac related fields */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">struct </span>rtmac_disc   *mac_disc;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">struct </span>rtmac_priv   *mac_priv;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    int                 (*mac_detach)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/* Device operations */</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    int                 (*open)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    int                 (*stop)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    int                 (*hard_header)(<span class="keyword">struct </span>rtskb *, <span class="keyword">struct </span>rtnet_device *,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                       <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> type, <span class="keywordtype">void</span> *daddr,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                       <span class="keywordtype">void</span> *saddr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    int                 (*rebuild_header)(<span class="keyword">struct </span>rtskb *);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    int                 (*hard_start_xmit)(<span class="keyword">struct </span>rtskb *skb,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                           <span class="keyword">struct </span>rtnet_device *dev);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    int                 (*hw_reset)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">/* Transmission hook, managed by the stack core, RTcap, and RTmac</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">     * If xmit_lock is used, start_xmit points either to rtdev_locked_xmit or</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">     * the RTmac discipline handler. If xmit_lock is not required, start_xmit</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">     * points to hard_start_xmit or the discipline handler.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    int                 (*start_xmit)(<span class="keyword">struct </span>rtskb *skb,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                      <span class="keyword">struct </span>rtnet_device *dev);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">/* MTU hook, managed by the stack core and RTmac */</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">unsigned</span> int        (*get_mtu)(<span class="keyword">struct </span>rtnet_device *rtdev,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> priority);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    int                 (*do_ioctl)(<span class="keyword">struct </span>rtnet_device *rtdev,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> request, <span class="keywordtype">void</span> * cmd);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">struct </span>net_device_stats *(*get_stats)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">/* DMA pre-mapping hooks */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    dma_addr_t          (*map_rtskb)(<span class="keyword">struct </span>rtnet_device *rtdev,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                     <span class="keyword">struct </span>rtskb *skb);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    void                (*unmap_rtskb)(<span class="keyword">struct </span>rtnet_device *rtdev,</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                       <span class="keyword">struct </span>rtskb *skb);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;};</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="keyword">struct </span>rtnet_core_cmd;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keyword">struct </span>rtdev_event_hook {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keyword">struct </span>list_head    entry;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    void                (*register_device)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    void                (*unregister_device)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    void                (*ifup)(<span class="keyword">struct </span>rtnet_device *rtdev,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                <span class="keyword">struct </span>rtnet_core_cmd *up_cmd);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    void                (*ifdown)(<span class="keyword">struct </span>rtnet_device *rtdev);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;};</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>list_head event_hook_list;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>mutex rtnet_devices_nrt_lock;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keyword">extern</span> <span class="keyword">struct </span>rtnet_device *rtnet_devices[];</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">struct </span>rtnet_device *__rt_alloc_etherdev(<span class="keywordtype">unsigned</span> sizeof_priv,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                        <span class="keywordtype">unsigned</span> dev_pool_size,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                        <span class="keyword">struct</span> module *module);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#define rt_alloc_etherdev(priv_size, rx_size) \</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">    __rt_alloc_etherdev(priv_size, rx_size, THIS_MODULE)</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keywordtype">void</span> rtdev_free(<span class="keyword">struct</span> rtnet_device *rtdev);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keywordtype">int</span> rt_register_rtnetdev(<span class="keyword">struct</span> rtnet_device *rtdev);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">int</span> rt_unregister_rtnetdev(<span class="keyword">struct</span> rtnet_device *rtdev);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">void</span> rtdev_add_event_hook(<span class="keyword">struct</span> rtdev_event_hook *hook);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">void</span> rtdev_del_event_hook(<span class="keyword">struct</span> rtdev_event_hook *hook);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordtype">void</span> rtdev_alloc_name (<span class="keyword">struct</span> rtnet_device *rtdev, <span class="keyword">const</span> <span class="keywordtype">char</span> *name_mask);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span>rtnet_device *__rtdev_get_by_index(<span class="keywordtype">int</span> ifindex)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> rtnet_devices[ifindex-1];</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">struct </span>rtnet_device *rtdev_get_by_name(<span class="keyword">const</span> <span class="keywordtype">char</span> *if_name);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="keyword">struct </span>rtnet_device *rtdev_get_by_index(<span class="keywordtype">int</span> ifindex);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keyword">struct </span>rtnet_device *rtdev_get_by_hwaddr(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> type,<span class="keywordtype">char</span> *ha);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keyword">struct </span>rtnet_device *rtdev_get_loopback(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keywordtype">int</span> rtdev_reference(<span class="keyword">struct</span> rtnet_device *rtdev);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> rtdev_dereference(<span class="keyword">struct</span> rtnet_device *rtdev)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    smp_mb__before_atomic();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (rtdev-&gt;rt_owner &amp;&amp; atomic_dec_and_test(&amp;rtdev-&gt;refcount))</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        module_put(rtdev-&gt;rt_owner);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordtype">int</span> rtdev_xmit(<span class="keyword">struct</span> rtskb *skb);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#if IS_ENABLED(CONFIG_XENO_DRIVERS_NET_ADDON_PROXY)</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keywordtype">int</span> rtdev_xmit_proxy(<span class="keyword">struct</span> rtskb *skb);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rt_hard_mtu(<span class="keyword">struct</span> rtnet_device *rtdev, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> priority);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keywordtype">int</span> rtdev_open(<span class="keyword">struct</span> rtnet_device *rtdev);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordtype">int</span> rtdev_close(<span class="keyword">struct</span> rtnet_device *rtdev);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="keywordtype">int</span> rtdev_map_rtskb(<span class="keyword">struct</span> rtskb *skb);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keywordtype">void</span> rtdev_unmap_rtskb(<span class="keyword">struct</span> rtskb *skb);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="keyword">struct </span>rtskb *rtnetdev_alloc_rtskb(<span class="keyword">struct</span> rtnet_device *dev, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#define rtnetdev_priv(dev) ((dev)-&gt;priv)</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#define rtdev_emerg(__dev, format, args...) \</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">        pr_emerg(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#define rtdev_alert(__dev, format, args...) \</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">        pr_alert(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#define rtdev_crit(__dev, format, args...) \</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">        pr_crit(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#define rtdev_err(__dev, format, args...) \</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">        pr_err(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#define rtdev_warn(__dev, format, args...) \</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">        pr_warn(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#define rtdev_notice(__dev, format, args...) \</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">        pr_notice(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#define rtdev_info(__dev, format, args...) \</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">        pr_info(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#define rtdev_dbg(__dev, format, args...) \</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">        pr_debug(&quot;%s: &quot; format, (__dev)-&gt;name, ##args)</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#ifdef VERBOSE_DEBUG</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#define rtdev_vdbg rtdev_dbg</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#define rtdev_vdbg(__dev, format, args...)                      \</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">({                                                              \</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">        if (0)                                                  \</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">                pr_debug(&quot;%s: &quot; format, (__dev)-&gt;name, ##args); \</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">                                                                \</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="preprocessor">        0;                                                      \</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">})</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* __KERNEL__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* __RTDEV_H_ */</span><span class="preprocessor"></span></div><div class="ttc" id="group__rtdm__sync__spinlock_html_gacbc89e880b42154cb65aa8317195dc03"><div class="ttname"><a href="group__rtdm__sync__spinlock.html#gacbc89e880b42154cb65aa8317195dc03">rtdm_lock_t</a></div><div class="ttdeci">ipipe_spinlock_t rtdm_lock_t</div><div class="ttdoc">Lock variable. </div><div class="ttdef"><b>Definition:</b> driver.h:551</div></div>
<div class="ttc" id="structatomic__t_html"><div class="ttname"><a href="structatomic__t.html">atomic_t</a></div><div class="ttdoc">Copyright © 2011 Gilles Chanteperdrix gilles.chanteperdrix@xenomai.org. </div><div class="ttdef"><b>Definition:</b> atomic.h:24</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_0de1d64efa6df97eacc8f5b0f9da3e59.html">drivers</a></li><li class="navelem"><a class="el" href="dir_8faba7cfaeef8234fe60b782e3350bd8.html">net</a></li><li class="navelem"><a class="el" href="dir_e614b3ce25858471dec7750aa978f100.html">stack</a></li><li class="navelem"><a class="el" href="dir_70ee7780aa60a0265985c984e695c97b.html">include</a></li><li class="navelem"><b>rtdev.h</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <map id="Mutual exclusion" name="Mutual exclusion">
<area shape="rect" id="node2" href="$group__cobalt__api.html" title="The Cobalt/POSIX interface is an implementation of a subset of the Single Unix specification over the..." alt="" coords="5,5,123,32"/>
</map>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         61e4c0c3dfa2b8b3077689b627ca8229                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                PNG

   IHDR   }         bKGD     zIDATx{PSW!lKL)R38UdFjA".VP,/mP`ŭ:u[v;P*0YKqp%@ieQx~?;?Μ{#@!vR;yǁ@q 8w;yǁ bջH5S/`u=&&KAA/l&s~뵬L[ jq?؎TW~}#!@q 8w;<ԻN®{MW{7T>!OOozkQp%K
Lg,[ܹNaa_}u FGG>dXR镒ּ&G-޹3̙ w￯9uJSX:wԬ={vt?ٳg/몦Ç4sgnDDոxBBW@b++;G=55gG۷gx{=ppPPX'06^  Yk5''m`˗	̴
oؕw`s<y2y		I'Ojrs2A}v}I	ޭ<~oe%VDZ(#B0''o띧]]mvIIܺ5Q&޼YjÆ'$300dIxzz	ʞ:Ͽ?~֭Y'@q 8w;yǁ@q 8w;yǁjns,WW7r+..MNUUҥ+ {Oreiqpw;yǁ@q 8w;yǁ@q0'MMw9?777)vUyt]]cWatx}P N;zxB?WWIxxk>ojѢy
]A_/IgTӋnGaλFs c>+((33履Ҳ0thVUU\psރꮮzWݬ}vm#x},_|q8'QN˳%%} Z: l!̊K nK˿\T_$;{  mm-/_y%Ж˝b\ bqk뽴~_WLZzwwhhix/S544QIIh4W,1ZuO{D2kӦTTT.9AH2ٌ\/kxmRֿaFGGssw.[6i̼56*ծUbߺs	:.4+L[(nڔiShWwld\[ڥRb5O^3yǁ@q 8w;yǁ@q 8w;yǁW>TUu3oܸcx	i'2	kŊ0!wVsxzڦdED4;r8w;yǁ@ޑгa͚5H$mnnW=+bbbT*k] \._x+AYYYLY>w;yǁ@q 8w;}hhI8'N<|IQ_b` 766^3jyǁ`NߵZmGT* BXbsg-ZCB044Ԕ<'}ʕO;n:S󜘓YfEFF{=Xi9yk׎ZXXDEEYYY4=%ɸڵkQ6f],GGGATU03 K?w=N!r7xi`~](>ۇM0~a~ 66vxx bB3 ̙ V
 x 0Gۡ@/iyط*!hm8D̕J'+&x/ '5Je5hҟpf ;yǁ@q 8w;yǁ@q@~]S۬L#i@nmm[
ߏ[
<gSe2ٞ={ `dd$;;>>>icmNW\\'HBCC/_tpuuٲeА&9!?1j >v <|?7o^}}}]]]HHHJJ!cڟ~CeeeGGGuu[jUKKK]]]``;:qK^Νe>>>~-sەɼ|嗆LLPu^¯p{\?zkiiY`!4Z[[qLiqW::;;77737nHsG{{;͛TZzgcݺuwﮯuVrrޢ"&ZUUweff2񸸸[nEDDឥ?nXL[զ8;;dخqCRwuu5-..}饗Jŋm:Iz` Lt͢)z^gf0yǁ@q 8w;yǁ@q 8w;9tN>̂k*icj֬f @q 8>K7qf    IENDB`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: kernel/drivers/net/stack/rtmac/nomac Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dir_edcb585329da7434583b019de737be52.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">nomac Directory Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Directory dependency graph for nomac:</div>
<div class="dyncontent">
<div class="center"><img src="dir_edcb585329da7434583b019de737be52_dep.png" border="0" usemap="#dir__edcb585329da7434583b019de737be52__dep" alt="kernel/drivers/net/stack/rtmac/nomac"/></div>
<map name="dir__edcb585329da7434583b019de737be52__dep" id="dir__edcb585329da7434583b019de737be52__dep">
<area shape="rect" id="node1" href="dir_edcb585329da7434583b019de737be52.html" title="nomac" alt="" coords="27,52,99,100"/>
<area shape="rect" id="node2" href="dir_d44c64559bbebec7f509842c48db8b23.html" title="include" alt="" coords="27,148,99,196"/>
<area shape="rect" id="edge1-headlabel" href="dir_000118_000000.html" title="1" alt="" coords="67,122,75,137"/>
<area shape="rect" id="clust1" href="dir_8fd447b24d4686e1b61fb221d3becb22.html" title="rtmac" alt="" coords="16,16,109,111"/>
</map>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_0de1d64efa6df97eacc8f5b0f9da3e59.html">drivers</a></li><li class="navelem"><a class="el" href="dir_8faba7cfaeef8234fe60b782e3350bd8.html">net</a></li><li class="navelem"><a class="el" href="dir_e614b3ce25858471dec7750aa978f100.html">stack</a></li><li class="navelem"><a class="el" href="dir_8fd447b24d4686e1b61fb221d3becb22.html">rtmac</a></li><li class="navelem"><a class="el" href="dir_edcb585329da7434583b019de737be52.html">nomac</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: Task management services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__alchemy__task.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Task management services<div class="ingroups"><a class="el" href="group__alchemy.html">Alchemy API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Services dealing with preemptive multi-tasking.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Task management services:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__alchemy__task.png" border="0" alt="" usemap="#group____alchemy____task"/>
<map name="group____alchemy____task" id="group____alchemy____task">
<area shape="rect" id="node2" href="group__alchemy.html" title="A programming interface reminiscent from traditional RTOS APIs. " alt="" coords="5,5,104,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRT__TASK__INFO.html">RT_TASK_INFO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task status descriptor.  <a href="structRT__TASK__INFO.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4b84dc0d444a96e1e417d480e803d32e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga4b84dc0d444a96e1e417d480e803d32e">T_LOPRIO</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga4b84dc0d444a96e1e417d480e803d32e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task priorities.  <a href="#ga4b84dc0d444a96e1e417d480e803d32e">More...</a><br /></td></tr>
<tr class="separator:ga4b84dc0d444a96e1e417d480e803d32e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ac6cf9677bae1012ecbcb6037d14fcb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga2ac6cf9677bae1012ecbcb6037d14fcb">T_LOCK</a>&#160;&#160;&#160;__THREAD_M_LOCK</td></tr>
<tr class="memdesc:ga2ac6cf9677bae1012ecbcb6037d14fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task mode bits.  <a href="#ga2ac6cf9677bae1012ecbcb6037d14fcb">More...</a><br /></td></tr>
<tr class="separator:ga2ac6cf9677bae1012ecbcb6037d14fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga725324cb26d8b5835c0818acb738bfe6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga725324cb26d8b5835c0818acb738bfe6">T_WARNSW</a>&#160;&#160;&#160;__THREAD_M_WARNSW</td></tr>
<tr class="memdesc:ga725324cb26d8b5835c0818acb738bfe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cobalt only, nop over Mercury.  <a href="#ga725324cb26d8b5835c0818acb738bfe6">More...</a><br /></td></tr>
<tr class="separator:ga725324cb26d8b5835c0818acb738bfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab6e0d411830710e8cc82d77b9df19510"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gab6e0d411830710e8cc82d77b9df19510">rt_task_delete</a> (RT_TASK *task)</td></tr>
<tr class="memdesc:gab6e0d411830710e8cc82d77b9df19510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a real-time task.  <a href="#gab6e0d411830710e8cc82d77b9df19510">More...</a><br /></td></tr>
<tr class="separator:gab6e0d411830710e8cc82d77b9df19510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad92ea8c9fed3c5a3789538c9c8362c28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gad92ea8c9fed3c5a3789538c9c8362c28">rt_task_set_affinity</a> (RT_TASK *task, const cpu_set_t *cpus)</td></tr>
<tr class="memdesc:gad92ea8c9fed3c5a3789538c9c8362c28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set CPU affinity of real-time task.  <a href="#gad92ea8c9fed3c5a3789538c9c8362c28">More...</a><br /></td></tr>
<tr class="separator:gad92ea8c9fed3c5a3789538c9c8362c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ee3863a29497e2181d49d5b3ecfd855"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga3ee3863a29497e2181d49d5b3ecfd855">rt_task_start</a> (RT_TASK *task, void(*entry)(void *arg), void *arg)</td></tr>
<tr class="memdesc:ga3ee3863a29497e2181d49d5b3ecfd855"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a real-time task.  <a href="#ga3ee3863a29497e2181d49d5b3ecfd855">More...</a><br /></td></tr>
<tr class="separator:ga3ee3863a29497e2181d49d5b3ecfd855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72e0a9355d06c346a95bf88b857a9749"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga72e0a9355d06c346a95bf88b857a9749">rt_task_shadow</a> (RT_TASK *task, const char *name, int prio, int mode)</td></tr>
<tr class="memdesc:ga72e0a9355d06c346a95bf88b857a9749"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn caller into a real-time task.  <a href="#ga72e0a9355d06c346a95bf88b857a9749">More...</a><br /></td></tr>
<tr class="separator:ga72e0a9355d06c346a95bf88b857a9749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c77d57638578a126812e29429f61fe7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga8c77d57638578a126812e29429f61fe7">rt_task_join</a> (RT_TASK *task)</td></tr>
<tr class="memdesc:ga8c77d57638578a126812e29429f61fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait on the termination of a real-time task.  <a href="#ga8c77d57638578a126812e29429f61fe7">More...</a><br /></td></tr>
<tr class="separator:ga8c77d57638578a126812e29429f61fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1645d3a072ef3cefeed3bcbb27dcf108"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga1645d3a072ef3cefeed3bcbb27dcf108">rt_task_wait_period</a> (unsigned long *overruns_r)</td></tr>
<tr class="memdesc:ga1645d3a072ef3cefeed3bcbb27dcf108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the next periodic release point.  <a href="#ga1645d3a072ef3cefeed3bcbb27dcf108">More...</a><br /></td></tr>
<tr class="separator:ga1645d3a072ef3cefeed3bcbb27dcf108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5225e5fb8d583fbdfa5299f322b8366"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gad5225e5fb8d583fbdfa5299f322b8366">rt_task_sleep</a> (RTIME delay)</td></tr>
<tr class="memdesc:gad5225e5fb8d583fbdfa5299f322b8366"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay the current real-time task (with relative delay).  <a href="#gad5225e5fb8d583fbdfa5299f322b8366">More...</a><br /></td></tr>
<tr class="separator:gad5225e5fb8d583fbdfa5299f322b8366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dc2deebe7500c9d21ff05d51d5efaa8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga0dc2deebe7500c9d21ff05d51d5efaa8">rt_task_sleep_until</a> (RTIME date)</td></tr>
<tr class="memdesc:ga0dc2deebe7500c9d21ff05d51d5efaa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay the current real-time task (with absolute wakeup date).  <a href="#ga0dc2deebe7500c9d21ff05d51d5efaa8">More...</a><br /></td></tr>
<tr class="separator:ga0dc2deebe7500c9d21ff05d51d5efaa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6e313941a3fea606be8d0f66380e922"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gaf6e313941a3fea606be8d0f66380e922">rt_task_same</a> (RT_TASK *task1, RT_TASK *task2)</td></tr>
<tr class="memdesc:gaf6e313941a3fea606be8d0f66380e922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare real-time task descriptors.  <a href="#gaf6e313941a3fea606be8d0f66380e922">More...</a><br /></td></tr>
<tr class="separator:gaf6e313941a3fea606be8d0f66380e922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga926a4b10e3631f76c5f38910e6eea24c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga926a4b10e3631f76c5f38910e6eea24c">rt_task_suspend</a> (RT_TASK *task)</td></tr>
<tr class="memdesc:ga926a4b10e3631f76c5f38910e6eea24c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend a real-time task.  <a href="#ga926a4b10e3631f76c5f38910e6eea24c">More...</a><br /></td></tr>
<tr class="separator:ga926a4b10e3631f76c5f38910e6eea24c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fab1aa24ef6f199546fd9669ae711be"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga1fab1aa24ef6f199546fd9669ae711be">rt_task_resume</a> (RT_TASK *task)</td></tr>
<tr class="memdesc:ga1fab1aa24ef6f199546fd9669ae711be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume a real-time task.  <a href="#ga1fab1aa24ef6f199546fd9669ae711be">More...</a><br /></td></tr>
<tr class="separator:ga1fab1aa24ef6f199546fd9669ae711be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a17935f049171be2ac8945abc68da6a"><td class="memItemLeft" align="right" valign="top">RT_TASK *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga8a17935f049171be2ac8945abc68da6a">rt_task_self</a> (void)</td></tr>
<tr class="memdesc:ga8a17935f049171be2ac8945abc68da6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the current task descriptor.  <a href="#ga8a17935f049171be2ac8945abc68da6a">More...</a><br /></td></tr>
<tr class="separator:ga8a17935f049171be2ac8945abc68da6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bed8d001e212a3328a4e7e73f1765e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga3bed8d001e212a3328a4e7e73f1765e8">rt_task_set_priority</a> (RT_TASK *task, int prio)</td></tr>
<tr class="memdesc:ga3bed8d001e212a3328a4e7e73f1765e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the base priority of a real-time task.  <a href="#ga3bed8d001e212a3328a4e7e73f1765e8">More...</a><br /></td></tr>
<tr class="separator:ga3bed8d001e212a3328a4e7e73f1765e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga915e7edfb0aaddb643794d7abc7093bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga915e7edfb0aaddb643794d7abc7093bf">rt_task_set_mode</a> (int clrmask, int setmask, int *mode_r)</td></tr>
<tr class="memdesc:ga915e7edfb0aaddb643794d7abc7093bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current task mode.  <a href="#ga915e7edfb0aaddb643794d7abc7093bf">More...</a><br /></td></tr>
<tr class="separator:ga915e7edfb0aaddb643794d7abc7093bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31e44b069b2486c2d2bdfb8a0a3557c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga31e44b069b2486c2d2bdfb8a0a3557c8">rt_task_yield</a> (void)</td></tr>
<tr class="memdesc:ga31e44b069b2486c2d2bdfb8a0a3557c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manual round-robin.  <a href="#ga31e44b069b2486c2d2bdfb8a0a3557c8">More...</a><br /></td></tr>
<tr class="separator:ga31e44b069b2486c2d2bdfb8a0a3557c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga770281eeca009c0a08a7c4a9fd849ac1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1">rt_task_unblock</a> (RT_TASK *task)</td></tr>
<tr class="memdesc:ga770281eeca009c0a08a7c4a9fd849ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unblock a real-time task.  <a href="#ga770281eeca009c0a08a7c4a9fd849ac1">More...</a><br /></td></tr>
<tr class="separator:ga770281eeca009c0a08a7c4a9fd849ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9250436d7bd9e49a0320161d2e9373ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga9250436d7bd9e49a0320161d2e9373ae">rt_task_slice</a> (RT_TASK *task, RTIME quantum)</td></tr>
<tr class="memdesc:ga9250436d7bd9e49a0320161d2e9373ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a task's round-robin quantum.  <a href="#ga9250436d7bd9e49a0320161d2e9373ae">More...</a><br /></td></tr>
<tr class="separator:ga9250436d7bd9e49a0320161d2e9373ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53bad6acf5496f8008e594954507dce8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga53bad6acf5496f8008e594954507dce8">rt_task_inquire</a> (RT_TASK *task, <a class="el" href="structRT__TASK__INFO.html">RT_TASK_INFO</a> *info)</td></tr>
<tr class="memdesc:ga53bad6acf5496f8008e594954507dce8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve information about a real-time task.  <a href="#ga53bad6acf5496f8008e594954507dce8">More...</a><br /></td></tr>
<tr class="separator:ga53bad6acf5496f8008e594954507dce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10e40ae8b8ab82c1fddc26fed12d4ec2"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga10e40ae8b8ab82c1fddc26fed12d4ec2">rt_task_send_timed</a> (RT_TASK *task, RT_TASK_MCB *mcb_s, RT_TASK_MCB *mcb_r, const struct timespec *abs_timeout)</td></tr>
<tr class="memdesc:ga10e40ae8b8ab82c1fddc26fed12d4ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to a real-time task.  <a href="#ga10e40ae8b8ab82c1fddc26fed12d4ec2">More...</a><br /></td></tr>
<tr class="separator:ga10e40ae8b8ab82c1fddc26fed12d4ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74378805e49a613863a048bfaa70e9df"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga74378805e49a613863a048bfaa70e9df">rt_task_send_until</a> (RT_TASK *task, RT_TASK_MCB *mcb_s, RT_TASK_MCB *mcb_r, RTIME timeout)</td></tr>
<tr class="memdesc:ga74378805e49a613863a048bfaa70e9df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to a real-time task (with absolute scalar timeout).  <a href="#ga74378805e49a613863a048bfaa70e9df">More...</a><br /></td></tr>
<tr class="separator:ga74378805e49a613863a048bfaa70e9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99a89c21c9866e2784860e100a444b49"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49">rt_task_send</a> (RT_TASK *task, RT_TASK_MCB *mcb_s, RT_TASK_MCB *mcb_r, RTIME timeout)</td></tr>
<tr class="memdesc:ga99a89c21c9866e2784860e100a444b49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to a real-time task (with relative scalar timeout).  <a href="#ga99a89c21c9866e2784860e100a444b49">More...</a><br /></td></tr>
<tr class="separator:ga99a89c21c9866e2784860e100a444b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2ad79df07c5589d5c646ea836b6a777"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gaf2ad79df07c5589d5c646ea836b6a777">rt_task_receive_timed</a> (RT_TASK_MCB *mcb_r, const struct timespec *abs_timeout)</td></tr>
<tr class="memdesc:gaf2ad79df07c5589d5c646ea836b6a777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message from a real-time task.  <a href="#gaf2ad79df07c5589d5c646ea836b6a777">More...</a><br /></td></tr>
<tr class="separator:gaf2ad79df07c5589d5c646ea836b6a777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa51bdd7ba60692deca7bedbb99d76ae1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gaa51bdd7ba60692deca7bedbb99d76ae1">rt_task_receive_until</a> (RT_TASK_MCB *mcb_r, RTIME timeout)</td></tr>
<tr class="memdesc:gaa51bdd7ba60692deca7bedbb99d76ae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message from a real-time task (with absolute scalar timeout).  <a href="#gaa51bdd7ba60692deca7bedbb99d76ae1">More...</a><br /></td></tr>
<tr class="separator:gaa51bdd7ba60692deca7bedbb99d76ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fd88694130824cdf1abf7a4f119e742"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742">rt_task_receive</a> (RT_TASK_MCB *mcb_r, RTIME timeout)</td></tr>
<tr class="memdesc:ga8fd88694130824cdf1abf7a4f119e742"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message from a real-time task (with relative scalar timeout).  <a href="#ga8fd88694130824cdf1abf7a4f119e742">More...</a><br /></td></tr>
<tr class="separator:ga8fd88694130824cdf1abf7a4f119e742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd8a4fb2d11f0548bd053dfbf92f9e9d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d">rt_task_reply</a> (int flowid, RT_TASK_MCB *mcb_s)</td></tr>
<tr class="memdesc:gacd8a4fb2d11f0548bd053dfbf92f9e9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reply to a remote task message.  <a href="#gacd8a4fb2d11f0548bd053dfbf92f9e9d">More...</a><br /></td></tr>
<tr class="separator:gacd8a4fb2d11f0548bd053dfbf92f9e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6bd973c22a6f66e28653922c53e0385"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gab6bd973c22a6f66e28653922c53e0385">rt_task_bind</a> (RT_TASK *task, const char *name, RTIME timeout)</td></tr>
<tr class="memdesc:gab6bd973c22a6f66e28653922c53e0385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bind to a task.  <a href="#gab6bd973c22a6f66e28653922c53e0385">More...</a><br /></td></tr>
<tr class="separator:gab6bd973c22a6f66e28653922c53e0385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2038cbe2350a8e2558330a3f45953865"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga2038cbe2350a8e2558330a3f45953865">rt_task_unbind</a> (RT_TASK *task)</td></tr>
<tr class="memdesc:ga2038cbe2350a8e2558330a3f45953865"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unbind from a task.  <a href="#ga2038cbe2350a8e2558330a3f45953865">More...</a><br /></td></tr>
<tr class="separator:ga2038cbe2350a8e2558330a3f45953865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03387550693c21d0223f739570ccd992"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992">rt_task_create</a> (RT_TASK *task, const char *name, int stksize, int prio, int mode)</td></tr>
<tr class="memdesc:ga03387550693c21d0223f739570ccd992"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a task with Alchemy personality.  <a href="#ga03387550693c21d0223f739570ccd992">More...</a><br /></td></tr>
<tr class="separator:ga03387550693c21d0223f739570ccd992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gababee94264156693cd4f5b9b70d3c5a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gababee94264156693cd4f5b9b70d3c5a1">rt_task_set_periodic</a> (RT_TASK *task, RTIME idate, RTIME period)</td></tr>
<tr class="memdesc:gababee94264156693cd4f5b9b70d3c5a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a real-time task periodic.  <a href="#gababee94264156693cd4f5b9b70d3c5a1">More...</a><br /></td></tr>
<tr class="separator:gababee94264156693cd4f5b9b70d3c5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4f9fa3cb09d7f774ebff7585994dffb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__task.html#gaa4f9fa3cb09d7f774ebff7585994dffb">rt_task_spawn</a> (RT_TASK *task, const char *name, int stksize, int prio, int mode, void(*entry)(void *arg), void *arg)</td></tr>
<tr class="memdesc:gaa4f9fa3cb09d7f774ebff7585994dffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and start a real-time task.  <a href="#gaa4f9fa3cb09d7f774ebff7585994dffb">More...</a><br /></td></tr>
<tr class="separator:gaa4f9fa3cb09d7f774ebff7585994dffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Services dealing with preemptive multi-tasking. </p>
<p>Each Alchemy task is an independent portion of the overall application code embodied in a C procedure, which executes on its own stack context. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2ac6cf9677bae1012ecbcb6037d14fcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2ac6cf9677bae1012ecbcb6037d14fcb">&#9670;&nbsp;</a></span>T_LOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_LOCK&#160;&#160;&#160;__THREAD_M_LOCK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task mode bits. </p>

<p class="reference">Referenced by <a class="el" href="group__alchemy__task.html#ga915e7edfb0aaddb643794d7abc7093bf">rt_task_set_mode()</a>.</p>

</div>
</div>
<a id="ga4b84dc0d444a96e1e417d480e803d32e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b84dc0d444a96e1e417d480e803d32e">&#9670;&nbsp;</a></span>T_LOPRIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_LOPRIO&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task priorities. </p>

</div>
</div>
<a id="ga725324cb26d8b5835c0818acb738bfe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga725324cb26d8b5835c0818acb738bfe6">&#9670;&nbsp;</a></span>T_WARNSW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_WARNSW&#160;&#160;&#160;__THREAD_M_WARNSW</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cobalt only, nop over Mercury. </p>

<p class="reference">Referenced by <a class="el" href="group__alchemy__task.html#ga915e7edfb0aaddb643794d7abc7093bf">rt_task_set_mode()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab6bd973c22a6f66e28653922c53e0385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab6bd973c22a6f66e28653922c53e0385">&#9670;&nbsp;</a></span>rt_task_bind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_bind </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bind to a task. </p>
<p>This routine creates a new descriptor to refer to an existing Alchemy task identified by its symbolic name. If the object does not exist on entry, the caller may block until a task of the given name is created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The address of a task descriptor filled in by the operation. Contents of this memory is undefined upon failure.</td></tr>
    <tr><td class="paramname">name</td><td>A valid NULL-terminated name which identifies the task to bind to. This string should match the object name argument passed to <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>, or <a class="el" href="group__alchemy__task.html#ga72e0a9355d06c346a95bf88b857a9749" title="Turn caller into a real-time task. ">rt_task_shadow()</a>.</td></tr>
    <tr><td class="paramname">timeout</td><td>The number of clock ticks to wait for the registration to occur (see note). Passing TM_INFINITE causes the caller to block indefinitely until the object is registered. Passing TM_NONBLOCK causes the service to return immediately without waiting if the object is not registered on entry.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task before the retrieval has completed.</li>
<li>-EWOULDBLOCK is returned if <em>timeout</em> is equal to TM_NONBLOCK and the searched object is not registered on entry.</li>
<li>-ETIMEDOUT is returned if the object cannot be retrieved within the specified amount of time.</li>
<li>-EPERM is returned if this service should block, but was not called from a Xenomai thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The <em>timeout</em> value is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

</div>
</div>
<a id="ga03387550693c21d0223f739570ccd992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03387550693c21d0223f739570ccd992">&#9670;&nbsp;</a></span>rt_task_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_create </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stksize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a task with Alchemy personality. </p>
<p>This service creates a task with access to the full set of Alchemy services. If <em>prio</em> is non-zero, the new task belongs to Xenomai's real-time FIFO scheduling class, aka SCHED_FIFO. If <em>prio</em> is zero, the task belongs to the regular SCHED_OTHER class.</p>
<p>Creating tasks with zero priority is useful for running non real-time processes which may invoke blocking real-time services, such as pending on a semaphore, reading from a message queue or a buffer, and so on.</p>
<p>Once created, the task is left dormant until it is actually started by <a class="el" href="group__alchemy__task.html#ga3ee3863a29497e2181d49d5b3ecfd855" title="Start a real-time task. ">rt_task_start()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The address of a task descriptor which can be later used to identify uniquely the created object, upon success of this call.</td></tr>
    <tr><td class="paramname">name</td><td>An ASCII string standing for the symbolic name of the task. When non-NULL and non-empty, a copy of this string is used for indexing the created task into the object registry.</td></tr>
    <tr><td class="paramname">stksize</td><td>The size of the stack (in bytes) for the new task. If zero is passed, a system-dependent default size will be substituted.</td></tr>
    <tr><td class="paramname">prio</td><td>The base priority of the new task. This value must be in the [0 .. 99] range, where 0 is the lowest effective priority.</td></tr>
    <tr><td class="paramname">mode</td><td>The task creation mode. The following flags can be OR'ed into this bitmask:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>T_JOINABLE allows another task to wait on the termination of the new task. <a class="el" href="group__alchemy__task.html#ga8c77d57638578a126812e29429f61fe7" title="Wait on the termination of a real-time task. ">rt_task_join()</a> shall be called for this task to clean up any resources after its termination.</li>
<li>T_LOCK causes the new task to lock the scheduler prior to entering the user routine specified by <a class="el" href="group__alchemy__task.html#ga3ee3863a29497e2181d49d5b3ecfd855" title="Start a real-time task. ">rt_task_start()</a>. A call to <a class="el" href="group__alchemy__task.html#ga915e7edfb0aaddb643794d7abc7093bf" title="Change the current task mode. ">rt_task_set_mode()</a> from the new task is required to drop this lock.</li>
<li>When running over the Cobalt core, T_WARNSW causes the SIGDEBUG signal to be sent to the current task whenever it switches to the secondary mode. This feature is useful to detect unwanted migrations to the Linux domain. This flag has no effect over the Mercury core.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if either <em>prio</em>, <em>mode</em> or <em>stksize</em> are invalid.</li>
<li>-ENOMEM is returned if the system fails to get memory from the main heap in order to create the task.</li>
<li>-EEXIST is returned if the <em>name</em> is conflicting with an already registered task.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-secondary</a></dd></dl>
<dl class="section user"><dt>Side effects</dt><dd><ul>
<li>When running over the Cobalt core:<ul>
<li>calling <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a> causes SCHED_FIFO tasks to switch to secondary mode.</li>
<li>members of Xenomai's SCHED_FIFO class running in the primary domain have utmost priority over all Linux activities in the system, including Linux interrupt handlers.</li>
</ul>
</li>
<li>When running over the Mercury core, the new task belongs to the regular POSIX SCHED_FIFO class.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Tasks can be referred to from multiple processes which all belong to the same Xenomai session. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cross-link_8c-example.html#a13">cross-link.c</a>.</dd>
</dl>
</div>
</div>
<a id="gab6e0d411830710e8cc82d77b9df19510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab6e0d411830710e8cc82d77b9df19510">&#9670;&nbsp;</a></span>rt_task_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_delete </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a real-time task. </p>
<p>This call terminates a task previously created by <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>.</p>
<p>Tasks created with the T_JOINABLE flag shall be joined by a subsequent call to <a class="el" href="group__alchemy__task.html#ga8c77d57638578a126812e29429f61fe7" title="Wait on the termination of a real-time task. ">rt_task_join()</a> once successfully deleted, to reclaim all resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor.</li>
<li>-EPERM is returned if <em>task</em> is NULL and this service was called from an invalid context. In addition, this error is always raised when this service is called from asynchronous context, such as a timer/alarm handler.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-secondary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cross-link_8c-example.html#a4">cross-link.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga53bad6acf5496f8008e594954507dce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53bad6acf5496f8008e594954507dce8">&#9670;&nbsp;</a></span>rt_task_inquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_inquire </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRT__TASK__INFO.html">RT_TASK_INFO</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve information about a real-time task. </p>
<p>Return various information about an Alchemy task. This service may also be used to probe for task existence.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor. If <em>task</em> is NULL, the information about the current task is returned.</td></tr>
    <tr><td class="paramname">info</td><td>The address of a structure the task information will be written to. Passing NULL is valid, in which case the system is only probed for existence of the specified task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned if the task exists. In addition, if <em>info</em> is non-NULL, it is filled in with task information.</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor, or if <em>prio</em> is invalid.</li>
<li>-EPERM is returned if <em>task</em> is NULL and this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL. </dd></dl>

</div>
</div>
<a id="ga8c77d57638578a126812e29429f61fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c77d57638578a126812e29429f61fe7">&#9670;&nbsp;</a></span>rt_task_join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_join </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait on the termination of a real-time task. </p>
<p>This service blocks the caller in non-real-time context until <em>task</em> has terminated. All resources are released after successful completion of this service.</p>
<p>The specified task must have been created by the same process that wants to join it, and the T_JOINABLE mode flag must have been set on creation to <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>.</p>
<p>Tasks created with the T_JOINABLE flag shall be joined by a subsequent call to <a class="el" href="group__alchemy__task.html#ga8c77d57638578a126812e29429f61fe7" title="Wait on the termination of a real-time task. ">rt_task_join()</a> once successfully deleted, to reclaim all resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor.</li>
<li>-EINVAL is returned if the task was not created with T_JOINABLE set or some other task is already waiting on the termination.</li>
<li>-EDEADLK is returned if <em>task</em> refers to the caller.</li>
<li>-ESRCH is returned if <em>task</em> no longer exists or refers to task created by a different process.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>After successful completion of this service, it is neither required nor valid to additionally invoke <a class="el" href="group__alchemy__task.html#gab6e0d411830710e8cc82d77b9df19510" title="Delete a real-time task. ">rt_task_delete()</a> on the same task. </dd></dl>

</div>
</div>
<a id="ga8fd88694130824cdf1abf7a4f119e742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fd88694130824cdf1abf7a4f119e742">&#9670;&nbsp;</a></span>rt_task_receive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_task_receive </td>
          <td>(</td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive a message from a real-time task (with relative scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__task.html#gaf2ad79df07c5589d5c646ea836b6a777" title="Receive a message from a real-time task. ">rt_task_receive_timed()</a> accepting a relative timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcb_r</td><td>The address of a message control block referring to the receive message area.</td></tr>
    <tr><td class="paramname">timeout</td><td>A delay expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__task.html#gaf2ad79df07c5589d5c646ea836b6a777">rt_task_receive_timed()</a>.</p>

</div>
</div>
<a id="gaf2ad79df07c5589d5c646ea836b6a777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2ad79df07c5589d5c646ea836b6a777">&#9670;&nbsp;</a></span>rt_task_receive_timed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_receive_timed </td>
          <td>(</td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive a message from a real-time task. </p>
<p>This service is part of the synchronous message passing support available to Alchemy tasks. The caller receives a variable-sized message from another task. The sender is blocked until the caller invokes <a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d" title="Reply to a remote task message. ">rt_task_reply()</a> to finish the transaction.</p>
<p>A basic message control block is used to store the location and size of the data area to receive from the client, in addition to a user-defined operation code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcb_r</td><td>The address of a message control block referring to the receive message area. The fields from this control block should be set as follows:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>mcb_r-&gt;data should contain the address of a buffer large enough to collect the data sent by the remote task;</li>
<li>mcb_r-&gt;size should contain the size in bytes of the buffer space pointed at by mcb_r-&gt;data. If mcb_r-&gt;size is lower than the actual size of the received message, no data copy takes place and -ENOBUFS is returned to the caller. See note.</li>
</ul>
<p>Upon return, mcb_r-&gt;opcode will contain the operation code sent from the remote task using <a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49" title="Send a message to a real-time task (with relative scalar timeout). ">rt_task_send()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">abs_timeout</td><td>The number of clock ticks to wait for receiving a message (see note). Passing NULL causes the caller to block indefinitely until a remote task eventually sends a message. Passing { .tv_sec = 0, .tv_nsec = 0 } causes the service to return immediately without waiting if no remote task is currently waiting for sending a message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A strictly positive value is returned upon success, representing a flow identifier for the opening transaction; this token should be passed to <a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d" title="Reply to a remote task message. ">rt_task_reply()</a>, in order to send back a reply to and unblock the remote task appropriately. Otherwise:</dd></dl>
<ul>
<li>-EPERM is returned if this service was called from an invalid context.</li>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task before a message was received.</li>
<li>-ENOBUFS is returned if <em>mcb_r</em> does not point at a message area large enough to collect the remote task's message.</li>
<li>-EWOULDBLOCK is returned if <em>abs_timeout</em> is { .tv_sec = 0, .tv_nsec = 0 } and no remote task is currently waiting for sending a message to the caller.</li>
<li>-ETIMEDOUT is returned if no message was received within the <em>timeout</em>.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd><em>abs_timeout</em> is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742">rt_task_receive()</a>, and <a class="el" href="group__alchemy__task.html#gaa51bdd7ba60692deca7bedbb99d76ae1">rt_task_receive_until()</a>.</p>

</div>
</div>
<a id="gaa51bdd7ba60692deca7bedbb99d76ae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa51bdd7ba60692deca7bedbb99d76ae1">&#9670;&nbsp;</a></span>rt_task_receive_until()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_task_receive_until </td>
          <td>(</td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive a message from a real-time task (with absolute scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__task.html#gaf2ad79df07c5589d5c646ea836b6a777" title="Receive a message from a real-time task. ">rt_task_receive_timed()</a> accepting an absolute timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcb_r</td><td>The address of a message control block referring to the receive message area.</td></tr>
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__task.html#gaf2ad79df07c5589d5c646ea836b6a777">rt_task_receive_timed()</a>.</p>

</div>
</div>
<a id="gacd8a4fb2d11f0548bd053dfbf92f9e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd8a4fb2d11f0548bd053dfbf92f9e9d">&#9670;&nbsp;</a></span>rt_task_reply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_reply </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flowid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reply to a remote task message. </p>
<p>This service is part of the synchronous message passing support available to Alchemy tasks. The caller sends a variable-sized message back to a remote task, in response to this task's initial message received by a call to <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742" title="Receive a message from a real-time task (with relative scalar timeout). ">rt_task_receive()</a>. As a consequence of calling <a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d" title="Reply to a remote task message. ">rt_task_reply()</a>, the remote task will be unblocked from the <a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49" title="Send a message to a real-time task (with relative scalar timeout). ">rt_task_send()</a> service.</p>
<p>A basic message control block is used to store the location and size of the data area to send back, in addition to a user-defined status code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flowid</td><td>The flow identifier returned by a previous call to <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742" title="Receive a message from a real-time task (with relative scalar timeout). ">rt_task_receive()</a> which uniquely identifies the current transaction.</td></tr>
    <tr><td class="paramname">mcb_s</td><td>The address of an optional message control block referring to the message to be sent back. If <em>mcb_s</em> is NULL, the remote will be unblocked without getting any reply data. When <em>mcb_s</em> is valid, the fields from this control block should be set as follows:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>mcb_s-&gt;data should contain the address of the payload data to send to the remote task.</li>
<li>mcb_s-&gt;size should contain the size in bytes of the payload data pointed at by mcb_s-&gt;data. Zero is a legitimate value, and indicates that no payload data will be transferred. In the latter case, mcb_s-&gt;data will be ignored.</li>
<li>mcb_s-&gt;opcode is an opaque status code carried during the message transfer the caller can fill with any appropriate value. It will be made available "as is" to the remote task into the status code field by the <a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49" title="Send a message to a real-time task (with relative scalar timeout). ">rt_task_send()</a> service. If <em>mcb_s</em> is NULL, Zero will be returned to the remote task into the status code field.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>flowid</em> is invalid.</li>
<li>-ENXIO is returned if <em>flowid</em> does not match the expected identifier returned from the latest call of the current task to <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742" title="Receive a message from a real-time task (with relative scalar timeout). ">rt_task_receive()</a>, or if the remote task stopped waiting for the reply in the meantime (e.g. the remote could have been deleted or forcibly unblocked).</li>
<li>-ENOBUFS is returned if the reply data referred to by <em>mcb_s</em> is larger than the reply area mentioned by the remote task when calling <a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49" title="Send a message to a real-time task (with relative scalar timeout). ">rt_task_send()</a>. In such a case, the remote task also receives -ENOBUFS on return from <a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49" title="Send a message to a real-time task (with relative scalar timeout). ">rt_task_send()</a>.</li>
<li>-EPERM is returned if this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga1fab1aa24ef6f199546fd9669ae711be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1fab1aa24ef6f199546fd9669ae711be">&#9670;&nbsp;</a></span>rt_task_resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_resume </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume a real-time task. </p>
<p>Forcibly resume the execution of a task which was previously suspended by a call to <a class="el" href="group__alchemy__task.html#ga926a4b10e3631f76c5f38910e6eea24c" title="Suspend a real-time task. ">rt_task_suspend()</a>, if the suspend nesting count decrements to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Blocked and suspended task states are cumulative. Therefore, resuming a task currently waiting on a synchronization object (e.g. semaphore, queue) does not make it eligible for scheduling until the awaited resource is eventually acquired, or a timeout elapses. </dd></dl>

</div>
</div>
<a id="gaf6e313941a3fea606be8d0f66380e922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6e313941a3fea606be8d0f66380e922">&#9670;&nbsp;</a></span>rt_task_same()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_same </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare real-time task descriptors. </p>
<p>This predicate returns true if <em>task1</em> and <em>task2</em> refer to the same task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task1</td><td>First task descriptor to compare.</td></tr>
    <tr><td class="paramname">task2</td><td>Second task descriptor to compare.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero value is returned if both descriptors refer to the same task, zero otherwise.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted</a> </dd></dl>

</div>
</div>
<a id="ga8a17935f049171be2ac8945abc68da6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a17935f049171be2ac8945abc68da6a">&#9670;&nbsp;</a></span>rt_task_self()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RT_TASK * rt_task_self </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the current task descriptor. </p>
<p>Return the address of the current Alchemy task descriptor.</p>
<dl class="section return"><dt>Returns</dt><dd>The address of the task descriptor referring to the current Alchemy task is returned upon success, or NULL if not called from a valid Alchemy task context.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only</a> </dd></dl>

</div>
</div>
<a id="ga99a89c21c9866e2784860e100a444b49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99a89c21c9866e2784860e100a444b49">&#9670;&nbsp;</a></span>rt_task_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_task_send </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message to a real-time task (with relative scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__task.html#ga10e40ae8b8ab82c1fddc26fed12d4ec2" title="Send a message to a real-time task. ">rt_task_send_timed()</a> accepting a relative timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
    <tr><td class="paramname">mcb_s</td><td>The address of the message control block referring to the message to be sent.</td></tr>
    <tr><td class="paramname">mcb_r</td><td>The address of an optional message control block referring to the reply message area.</td></tr>
    <tr><td class="paramname">timeout</td><td>A delay expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__task.html#ga10e40ae8b8ab82c1fddc26fed12d4ec2">rt_task_send_timed()</a>.</p>

</div>
</div>
<a id="ga10e40ae8b8ab82c1fddc26fed12d4ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga10e40ae8b8ab82c1fddc26fed12d4ec2">&#9670;&nbsp;</a></span>rt_task_send_timed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_task_send_timed </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to a real-time task. </p>
<p>This service is part of the synchronous message passing support available to Alchemy tasks. The caller sends a variable-sized message to another task, waiting for the remote to receive the initial message by a call to <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742" title="Receive a message from a real-time task (with relative scalar timeout). ">rt_task_receive()</a>, then reply to it using <a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d" title="Reply to a remote task message. ">rt_task_reply()</a>.</p>
<p>A basic message control block is used to store the location and size of the data area to send or retrieve upon reply, in addition to a user-defined operation code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
    <tr><td class="paramname">mcb_s</td><td>The address of the message control block referring to the message to be sent. The fields from this control block should be set as follows:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>mcb_s-&gt;data should contain the address of the payload data to send to the remote task.</li>
<li>mcb_s-&gt;size should contain the size in bytes of the payload data pointed at by mcb_s-&gt;data. Zero is a legitimate value, and indicates that no payload data will be transferred. In the latter case, mcb_s-&gt;data will be ignored.</li>
<li>mcb_s-&gt;opcode is an opaque operation code carried during the message transfer, the caller can fill with any appropriate value. It will be made available "as is" to the remote task into the operation code field by the <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742" title="Receive a message from a real-time task (with relative scalar timeout). ">rt_task_receive()</a> service.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mcb_r</td><td>The address of an optional message control block referring to the reply message area. If <em>mcb_r</em> is NULL and a reply is sent back by the remote task, the reply message will be discarded, and -ENOBUFS will be returned to the caller. When <em>mcb_r</em> is valid, the fields from this control block should be set as follows:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>mcb_r-&gt;data should contain the address of a buffer large enough to collect the reply data from the remote task.</li>
<li>mcb_r-&gt;size should contain the size in bytes of the buffer space pointed at by mcb_r-&gt;data. If mcb_r-&gt;size is lower than the actual size of the reply message, no data copy takes place and -ENOBUFS is returned to the caller.</li>
</ul>
<p>Upon return, mcb_r-&gt;opcode will contain the status code sent back from the remote task using <a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d" title="Reply to a remote task message. ">rt_task_reply()</a>, or zero if unspecified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks, specifying a time limit to wait for the recipient task to reply to the initial message (see note). Passing NULL causes the caller to block indefinitely until a reply is received. Passing { .tv_sec = 0, .tv_nsec = 0 } causes the service to return without blocking in case the recipient task is not waiting for messages at the time of the call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A positive value is returned upon success, representing the length (in bytes) of the reply message returned by the remote task. Zero is a success status, meaning either that <em>mcb_r</em> was NULL on entry, or that no actual message was passed to the remote call to <a class="el" href="group__alchemy__task.html#gacd8a4fb2d11f0548bd053dfbf92f9e9d" title="Reply to a remote task message. ">rt_task_reply()</a>. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor.</li>
<li>-EPERM is returned if this service was called from an invalid context.</li>
<li>-ENOBUFS is returned if <em>mcb_r</em> does not point at a message area large enough to collect the remote task's reply. This includes the case where <em>mcb_r</em> is NULL on entry, despite the remote task attempts to send a reply message.</li>
<li>-EWOULDBLOCK is returned if <em>abs_timeout</em> is { .tv_sec = 0, .tv_nsec = 0 } and the recipient <em>task</em> is not currently waiting for a message on the <a class="el" href="group__alchemy__task.html#ga8fd88694130824cdf1abf7a4f119e742" title="Receive a message from a real-time task (with relative scalar timeout). ">rt_task_receive()</a> service.</li>
<li>-EIDRM is returned if <em>task</em> has been deleted while waiting for a reply.</li>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task before any reply was received from the recipient <em>task</em>.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd><em>abs_timeout</em> is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__alchemy__task.html#ga99a89c21c9866e2784860e100a444b49">rt_task_send()</a>, and <a class="el" href="group__alchemy__task.html#ga74378805e49a613863a048bfaa70e9df">rt_task_send_until()</a>.</p>

</div>
</div>
<a id="ga74378805e49a613863a048bfaa70e9df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga74378805e49a613863a048bfaa70e9df">&#9670;&nbsp;</a></span>rt_task_send_until()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_task_send_until </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RT_TASK_MCB *&#160;</td>
          <td class="paramname"><em>mcb_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message to a real-time task (with absolute scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__task.html#ga10e40ae8b8ab82c1fddc26fed12d4ec2" title="Send a message to a real-time task. ">rt_task_send_timed()</a> accepting an absolute timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
    <tr><td class="paramname">mcb_s</td><td>The address of the message control block referring to the message to be sent.</td></tr>
    <tr><td class="paramname">mcb_r</td><td>The address of an optional message control block referring to the reply message area.</td></tr>
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__task.html#ga10e40ae8b8ab82c1fddc26fed12d4ec2">rt_task_send_timed()</a>.</p>

</div>
</div>
<a id="gad92ea8c9fed3c5a3789538c9c8362c28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad92ea8c9fed3c5a3789538c9c8362c28">&#9670;&nbsp;</a></span>rt_task_set_affinity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_set_affinity </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cpu_set_t *&#160;</td>
          <td class="paramname"><em>cpus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set CPU affinity of real-time task. </p>
<p>This calls makes <em>task</em> affine to the set of CPUs defined by <em>cpus</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor. If <em>task</em> is NULL, the CPU affinity of the current task is changed.</td></tr>
    <tr><td class="paramname">cpus</td><td>The set of CPUs <em>task</em> should be affine to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is NULL but the caller is not a Xenomai task, or if <em>task</em> is non-NULL but not a valid task descriptor.</li>
<li>-EINVAL is returned if <em>cpus</em> contains no processors that are currently physically on the system and permitted to the process according to any restrictions that may be imposed by the "cpuset" mechanism described in cpuset(7).</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-secondary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL. </dd></dl>

</div>
</div>
<a id="ga915e7edfb0aaddb643794d7abc7093bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga915e7edfb0aaddb643794d7abc7093bf">&#9670;&nbsp;</a></span>rt_task_set_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_set_mode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>clrmask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>setmask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>mode_r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the current task mode. </p>
<p>Each Alchemy task has a set of internal flags determining several operating conditions. <a class="el" href="group__alchemy__task.html#ga915e7edfb0aaddb643794d7abc7093bf" title="Change the current task mode. ">rt_task_set_mode()</a> takes a bitmask of mode bits to clear for disabling the corresponding modes for the current task, and another one to set for enabling them. The mode bits which were previously in effect before the change can be returned upon request.</p>
<p>The following bits can be part of the bitmask:</p>
<ul>
<li>T_LOCK causes the current task to lock the scheduler on the current CPU, preventing all further involuntary task switches on this CPU. Clearing this bit unlocks the scheduler.</li>
<li>Only when running over the Cobalt core:<ul>
<li>T_WARNSW causes the SIGDEBUG signal to be sent to the current task whenever it switches to the secondary mode. This feature is useful to detect unwanted migrations to the Linux domain.</li>
<li>T_CONFORMING can be passed in <em>setmask</em> to switch the current Alchemy task to its preferred runtime mode. The only meaningful use of this switch is to force a real-time task back to primary mode (see note). Any other use leads to a nop.</li>
</ul>
</li>
</ul>
<p>These two last flags have no effect over the Mercury core, and are simply ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clrmask</td><td>A bitmask of mode bits to clear for the current task, before <em>setmask</em> is applied. Zero is an acceptable value which leads to a no-op.</td></tr>
    <tr><td class="paramname">setmask</td><td>A bitmask of mode bits to set for the current task. Zero is an acceptable value which leads to a no-op.</td></tr>
    <tr><td class="paramname">mode_r</td><td>If non-NULL, <em>mode_r</em> must be a pointer to a memory location which will be written upon success with the previous set of active mode bits. If NULL, the previous set of active mode bits will not be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor, or if any bit from <em>clrmask</em> or <em>setmask</em> is invalid.</li>
<li>-EPERM is returned if this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task.</dd>
<dd>
Forcing the task mode using the T_CONFORMING bit from user code is almost always wrong, since the Xenomai/cobalt core handles mode switches internally when/if required. Most often, manual mode switching from applications introduces useless overhead. This mode bit is part of the API only to cover rare use cases in middleware code based on the Alchemy interface. </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__task.html#ga2ac6cf9677bae1012ecbcb6037d14fcb">T_LOCK</a>, and <a class="el" href="group__alchemy__task.html#ga725324cb26d8b5835c0818acb738bfe6">T_WARNSW</a>.</p>

</div>
</div>
<a id="gababee94264156693cd4f5b9b70d3c5a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gababee94264156693cd4f5b9b70d3c5a1">&#9670;&nbsp;</a></span>rt_task_set_periodic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_set_periodic </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>idate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>period</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a real-time task periodic. </p>
<p>Make a task periodic by programing its first release point and its period in the processor time line. <em>task</em> should then call <a class="el" href="group__alchemy__task.html#ga1645d3a072ef3cefeed3bcbb27dcf108" title="Wait for the next periodic release point. ">rt_task_wait_period()</a> to sleep until the next periodic release point in the processor timeline is reached.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor. If <em>task</em> is NULL, the current task is made periodic. <em>task</em> must belong the current process.</td></tr>
    <tr><td class="paramname">idate</td><td>The initial (absolute) date of the first release point, expressed in clock ticks (see note). If <em>idate</em> is equal to TM_NOW, the current system date is used.</td></tr>
    <tr><td class="paramname">period</td><td>The period of the task, expressed in clock ticks (see note). Passing TM_INFINITE stops the task's periodic timer if enabled, then returns successfully.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is NULL but the caller is not a Xenomai task, or if <em>task</em> is non-NULL but not a valid task descriptor.</li>
<li>-ETIMEDOUT is returned if <em>idate</em> is different from TM_INFINITE and represents a date in the past.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL.</dd>
<dd>
Over Cobalt, -EINVAL is returned if <em>period</em> is different from TM_INFINITE but shorter than the user scheduling latency value for the target system, as displayed by /proc/xenomai/latency.</dd>
<dd>
The <em>idate</em> and <em>period</em> values are interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond).</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Unlike its Xenomai 2.x counterpart, <a class="el" href="group__alchemy__task.html#gababee94264156693cd4f5b9b70d3c5a1" title="Make a real-time task periodic. ">rt_task_set_periodic()</a> will <b>NOT</b> block <em>task</em> until <em>idate</em> is reached. The first beat in the periodic timeline should be awaited for by a call to <a class="el" href="group__alchemy__task.html#ga1645d3a072ef3cefeed3bcbb27dcf108" title="Wait for the next periodic release point. ">rt_task_wait_period()</a>. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cross-link_8c-example.html#a5">cross-link.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga3bed8d001e212a3328a4e7e73f1765e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3bed8d001e212a3328a4e7e73f1765e8">&#9670;&nbsp;</a></span>rt_task_set_priority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_set_priority </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prio</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the base priority of a real-time task. </p>
<p>The base priority of a task defines the relative importance of the work being done by each task, which gains conrol of the CPU accordingly.</p>
<p>Changing the base priority of a task does not affect the priority boost the target task might have obtained as a consequence of a priority inheritance undergoing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor. If <em>task</em> is NULL, the priority of the current task is changed.</td></tr>
    <tr><td class="paramname">prio</td><td>The new priority. This value must range from [T_LOPRIO .. T_HIPRIO] (inclusive) where T_LOPRIO is the lowest effective priority.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor, or if <em>prio</em> is invalid.</li>
<li>-EPERM is returned if <em>task</em> is NULL and this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL.</dd>
<dd>
Assigning the same priority to a running or ready task moves it to the end of its priority group, thus causing a manual round-robin. </dd></dl>

</div>
</div>
<a id="ga72e0a9355d06c346a95bf88b857a9749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72e0a9355d06c346a95bf88b857a9749">&#9670;&nbsp;</a></span>rt_task_shadow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_shadow </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn caller into a real-time task. </p>
<p>Set the calling thread personality to the Alchemy API, enabling the full set of Alchemy services. Upon success, the caller is no more a regular POSIX thread, but a Xenomai-extended thread.</p>
<p>If <em>prio</em> is non-zero, the new task moves to Xenomai's real-time FIFO scheduling class, aka SCHED_FIFO. If <em>prio</em> is zero, the task moves to the regular SCHED_OTHER class.</p>
<p>Running Xenomai tasks with zero priority is useful for running non real-time processes which may invoke blocking real-time services, such as pending on a semaphore, reading from a message queue or a buffer, and so on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>If non-NULL, the address of a task descriptor which can be later used to identify uniquely the task, upon success of this call. If NULL, no descriptor is returned.</td></tr>
    <tr><td class="paramname">name</td><td>An ASCII string standing for the symbolic name of the task. When non-NULL and non-empty, a copy of this string is used for indexing the task into the object registry.</td></tr>
    <tr><td class="paramname">prio</td><td>The base priority of the task. This value must be in the [0 .. 99] range, where 0 is the lowest effective priority.</td></tr>
    <tr><td class="paramname">mode</td><td>The task shadowing mode. The following flags can be OR'ed into this bitmask:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>T_LOCK causes the current task to lock the scheduler before returning to the caller, preventing all further involuntary task switches on the current CPU. A call to <a class="el" href="group__alchemy__task.html#ga915e7edfb0aaddb643794d7abc7093bf" title="Change the current task mode. ">rt_task_set_mode()</a> from the current task is required to drop this lock.</li>
<li>When running over the Cobalt core, T_WARNSW causes the SIGDEBUG signal to be sent to the current task whenever it switches to the secondary mode. This feature is useful to detect unwanted migrations to the Linux domain. This flag has no effect over the Mercury core.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>prio</em> is invalid.</li>
<li>-ENOMEM is returned if the system fails to get memory from the main heap in order to create the task extension.</li>
<li>-EEXIST is returned if the <em>name</em> is conflicting with an already registered task.</li>
<li>-EBUSY is returned if the caller is not a regular POSIX thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">pthread-only, switch-secondary, switch-primary</a></dd></dl>
<dl class="section user"><dt>Side effects</dt><dd>Over Cobalt, if the caller is a plain POSIX thread, it is turned into a Xenomai <em>shadow</em> thread, with full access to all Cobalt services. The caller always returns from this service in primary mode.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Tasks can be referred to from multiple processes which all belong to the same Xenomai session. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rtcanrecv_8c-example.html#a29">rtcanrecv.c</a>, and <a class="el" href="rtcansend_8c-example.html#a21">rtcansend.c</a>.</dd>
</dl>
</div>
</div>
<a id="gad5225e5fb8d583fbdfa5299f322b8366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad5225e5fb8d583fbdfa5299f322b8366">&#9670;&nbsp;</a></span>rt_task_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_sleep </td>
          <td>(</td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay the current real-time task (with relative delay). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__task.html#ga0dc2deebe7500c9d21ff05d51d5efaa8" title="Delay the current real-time task (with absolute wakeup date). ">rt_task_sleep_until()</a> accepting a relative timeout specification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delay</td><td>A relative delay expressed in clock ticks (see note). A zero delay causes this service to return immediately to the caller with a success status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>See <a class="el" href="group__alchemy__task.html#ga0dc2deebe7500c9d21ff05d51d5efaa8" title="Delay the current real-time task (with absolute wakeup date). ">rt_task_sleep_until()</a>.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The <em>delay</em> value is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cross-link_8c-example.html#a3">cross-link.c</a>, and <a class="el" href="rtcansend_8c-example.html#a2">rtcansend.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga0dc2deebe7500c9d21ff05d51d5efaa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dc2deebe7500c9d21ff05d51d5efaa8">&#9670;&nbsp;</a></span>rt_task_sleep_until()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_sleep_until </td>
          <td>(</td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>date</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay the current real-time task (with absolute wakeup date). </p>
<p>Delay the execution of the calling task until a given date is reached. The caller is put to sleep, and does not consume any CPU time in such a state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">date</td><td>An absolute date expressed in clock ticks, specifying a wakeup date (see note). As a special case, TM_INFINITE is an acceptable value that causes the caller to block indefinitely, until <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> is called against it. Otherwise, any wake up date in the past causes the task to return immediately.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task.</li>
<li>-ETIMEDOUT is returned if <em>date</em> has already elapsed.</li>
<li>-EPERM is returned if this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL.</dd>
<dd>
The <em>date</em> value is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

</div>
</div>
<a id="ga9250436d7bd9e49a0320161d2e9373ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9250436d7bd9e49a0320161d2e9373ae">&#9670;&nbsp;</a></span>rt_task_slice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_slice </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>quantum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a task's round-robin quantum. </p>
<p>Set the time credit allotted to a task undergoing the round-robin scheduling. If <em>quantum</em> is non-zero, <a class="el" href="group__alchemy__task.html#ga9250436d7bd9e49a0320161d2e9373ae" title="Set a task&#39;s round-robin quantum. ">rt_task_slice()</a> also refills the current quantum for the target task, otherwise, time-slicing is stopped for that task.</p>
<p>In other words, <a class="el" href="group__alchemy__task.html#ga9250436d7bd9e49a0320161d2e9373ae" title="Set a task&#39;s round-robin quantum. ">rt_task_slice()</a> should be used to toggle round-robin scheduling for an Alchemy task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor. If <em>task</em> is NULL, the time credit of the current task is changed. <em>task</em> must belong to the current process.</td></tr>
    <tr><td class="paramname">quantum</td><td>The round-robin quantum for the task expressed in clock ticks (see note).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor, or if <em>prio</em> is invalid.</li>
<li>-EPERM is returned if <em>task</em> is NULL and this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL.</dd>
<dd>
The <em>quantum</em> value is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

</div>
</div>
<a id="gaa4f9fa3cb09d7f774ebff7585994dffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4f9fa3cb09d7f774ebff7585994dffb">&#9670;&nbsp;</a></span>rt_task_spawn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_spawn </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stksize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *arg)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and start a real-time task. </p>
<p>This service spawns a task by combining calls to <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a> and <a class="el" href="group__alchemy__task.html#ga3ee3863a29497e2181d49d5b3ecfd855" title="Start a real-time task. ">rt_task_start()</a> for the new task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The address of a task descriptor which can be later used to identify uniquely the created object, upon success of this call.</td></tr>
    <tr><td class="paramname">name</td><td>An ASCII string standing for the symbolic name of the task. When non-NULL and non-empty, a copy of this string is used for indexing the created task into the object registry.</td></tr>
    <tr><td class="paramname">stksize</td><td>The size of the stack (in bytes) for the new task. If zero is passed, a system-dependent default size will be substituted.</td></tr>
    <tr><td class="paramname">prio</td><td>The base priority of the new task. This value must be in the [0 .. 99] range, where 0 is the lowest effective priority.</td></tr>
    <tr><td class="paramname">mode</td><td>The task creation mode. See <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>.</td></tr>
    <tr><td class="paramname">entry</td><td>The address of the task entry point.</td></tr>
    <tr><td class="paramname">arg</td><td>A user-defined opaque argument <em>entry</em> will receive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>See <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-secondary</a></dd></dl>
<dl class="section user"><dt>Side effects</dt><dd>see <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>. </dd></dl>

</div>
</div>
<a id="ga3ee3863a29497e2181d49d5b3ecfd855"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ee3863a29497e2181d49d5b3ecfd855">&#9670;&nbsp;</a></span>rt_task_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_start </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *arg)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a real-time task. </p>
<p>This call starts execution of a task previously created by <a class="el" href="group__alchemy__task.html#ga03387550693c21d0223f739570ccd992" title="Create a task with Alchemy personality. ">rt_task_create()</a>. This service causes the started task to leave the initial dormant state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
    <tr><td class="paramname">entry</td><td>The address of the task entry point.</td></tr>
    <tr><td class="paramname">arg</td><td>A user-defined opaque argument <em>entry</em> will receive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Starting an already started task leads to a nop, returning a success status. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cross-link_8c-example.html#a14">cross-link.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga926a4b10e3631f76c5f38910e6eea24c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga926a4b10e3631f76c5f38910e6eea24c">&#9670;&nbsp;</a></span>rt_task_suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_suspend </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend a real-time task. </p>
<p>Forcibly suspend the execution of a task. This task will not be eligible for scheduling until it is explicitly resumed by a call to <a class="el" href="group__alchemy__task.html#ga1fab1aa24ef6f199546fd9669ae711be" title="Resume a real-time task. ">rt_task_resume()</a>. In other words, the suspended state caused by a call to <a class="el" href="group__alchemy__task.html#ga926a4b10e3631f76c5f38910e6eea24c" title="Suspend a real-time task. ">rt_task_suspend()</a> is cumulative with respect to the delayed and blocked states caused by other services, and is managed separately from them.</p>
<p>A nesting count is maintained so that <a class="el" href="group__alchemy__task.html#ga926a4b10e3631f76c5f38910e6eea24c" title="Suspend a real-time task. ">rt_task_suspend()</a> and <a class="el" href="group__alchemy__task.html#ga1fab1aa24ef6f199546fd9669ae711be" title="Resume a real-time task. ">rt_task_resume()</a> must be used in pairs.</p>
<p>Receiving a Linux signal causes the suspended task to resume immediately.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor. If <em>task</em> is NULL, the current task is suspended.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is NULL but the caller is not a Xenomai task, or if <em>task</em> is non-NULL but not a valid task descriptor.</li>
<li>-EINTR is returned if a Linux signal has been received by the caller if suspended.</li>
<li>-EPERM is returned if <em>task</em> is NULL and this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must be an Alchemy task if <em>task</em> is NULL.</dd>
<dd>
Blocked and suspended task states are cumulative. Therefore, suspending a task currently waiting on a synchronization object (e.g. semaphore, queue) holds its execution until it is resumed, despite the awaited resource may have been acquired, or a timeout has elapsed in the meantime. </dd></dl>

</div>
</div>
<a id="ga2038cbe2350a8e2558330a3f45953865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2038cbe2350a8e2558330a3f45953865">&#9670;&nbsp;</a></span>rt_task_unbind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_unbind </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unbind from a task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
  </table>
  </dd>
</dl>
<p>This routine releases a previous binding to an Alchemy task. After this call has returned, the descriptor is no more valid for referencing this object.</p>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">thread-unrestricted</a> </dd></dl>

</div>
</div>
<a id="ga770281eeca009c0a08a7c4a9fd849ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga770281eeca009c0a08a7c4a9fd849ac1">&#9670;&nbsp;</a></span>rt_task_unblock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_unblock </td>
          <td>(</td>
          <td class="paramtype">RT_TASK *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unblock a real-time task. </p>
<p>Break the task out of any wait it is currently in. This call clears all delay and/or resource wait condition for the target task.</p>
<p>However, <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> does not resume a task which has been forcibly suspended by a previous call to <a class="el" href="group__alchemy__task.html#ga926a4b10e3631f76c5f38910e6eea24c" title="Suspend a real-time task. ">rt_task_suspend()</a>. If all suspensive conditions are gone, the task becomes eligible anew for scheduling.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>task</em> is not a valid task descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga1645d3a072ef3cefeed3bcbb27dcf108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1645d3a072ef3cefeed3bcbb27dcf108">&#9670;&nbsp;</a></span>rt_task_wait_period()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_wait_period </td>
          <td>(</td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>overruns_r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the next periodic release point. </p>
<p>Delay the current task until the next periodic release point is reached. The periodic timer should have been previously started for <em>task</em> by a call to <a class="el" href="group__alchemy__task.html#gababee94264156693cd4f5b9b70d3c5a1" title="Make a real-time task periodic. ">rt_task_set_periodic()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">overruns_r</td><td>If non-NULL, <em>overruns_r</em> shall be a pointer to a memory location which will be written with the count of pending overruns. This value is written to only when <a class="el" href="group__alchemy__task.html#ga1645d3a072ef3cefeed3bcbb27dcf108" title="Wait for the next periodic release point. ">rt_task_wait_period()</a> returns -ETIMEDOUT or success. The memory location remains unmodified otherwise. If NULL, this count will not be returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. If <em>overruns_r</em> is non-NULL, zero is written to the pointed memory location. Otherwise:</dd></dl>
<ul>
<li>-EWOULDBLOCK is returned if <a class="el" href="group__alchemy__task.html#gababee94264156693cd4f5b9b70d3c5a1" title="Make a real-time task periodic. ">rt_task_set_periodic()</a> was not called for the current task.</li>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the waiting task before the next periodic release point was reached. In this case, the overrun counter is also cleared.</li>
<li>-ETIMEDOUT is returned if a timer overrun occurred, which indicates that a previous release point was missed by the calling task. If <em>overruns_r</em> is non-NULL, the count of pending overruns is written to the pointed memory location.</li>
<li>-EPERM is returned if this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the current release point has already been reached at the time of the call, the current task immediately returns from this service with no delay. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cross-link_8c-example.html#a7">cross-link.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga31e44b069b2486c2d2bdfb8a0a3557c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31e44b069b2486c2d2bdfb8a0a3557c8">&#9670;&nbsp;</a></span>rt_task_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_task_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manual round-robin. </p>
<p>Move the current task to the end of its priority group, so that the next equal-priority task in ready state is switched in.</p>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EPERM is returned if this service was called from an invalid context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-only, switch-primary</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: include/cobalt/uapi/asm-generic/syscall.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('include_2cobalt_2uapi_2asm-generic_2syscall_8h_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">syscall.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2013 Philippe Gerum &lt;rpm@xenomai.org&gt;.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef _COBALT_UAPI_ASM_GENERIC_SYSCALL_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define _COBALT_UAPI_ASM_GENERIC_SYSCALL_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;linux/types.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;asm/xenomai/uapi/features.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;asm/xenomai/uapi/syscall.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define __COBALT_SYSCALL_BIT    0x10000000</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">struct </span>cobalt_bindreq {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        __u32 feat_req;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        __u32 abi_rev;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keyword">struct </span>cobalt_featinfo feat_ret;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;};</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#define COBALT_SECONDARY  0</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#define COBALT_PRIMARY    1</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !_COBALT_UAPI_ASM_GENERIC_SYSCALL_H */</span><span class="preprocessor"></span></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_727d51ab6cd8bd91d7c75c1be5676510.html">cobalt</a></li><li class="navelem"><a class="el" href="dir_d1269e8d6104912a621604ff6786a0af.html">uapi</a></li><li class="navelem"><a class="el" href="dir_e2c3d652080da1f25e7e41640ba2a311.html">asm-generic</a></li><li class="navelem"><b>syscall.h</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     PNG

   IHDR      %   /S#   bKGD     	3IDATxYLo+ PY
e	k > 
	T6Y"0!a
ڂE( K AYSk[{҅KX4s{3ss̥(H  *FP[FP[FP[4%wrrrBԨHUV񇡡QXXhii)nY{ g2NNN'd2&7L]]S;RiUOdJ 57ڂ$7ڂ$7ڂ$7ڲFI`iiyi#kfQ(Ԏڵk(X=='Nlj=丸8AYYYd2yrrrrrL&J$R͑szzׯUUUKKKnnnR6zzzYYY;V/" Ꙛb2 66Vqax<ޣG.//p*ҵU)fr8pԔL&766Ĳ2)CCâ+$Nwvv.--)%P(lkkKHH044}}}JY)K$H𶮮nbbjdGUJPsP䖖Rŋ.KBCC/_x<}}'O  |~nn~jj*ǓtT |||"=  @555+++;Wd2ŕ	%g<{  
(Jhhhaaܳ ׯ|8Poo/B			ul󃃃߼y#V(lo	L(mmm%%%%T*U<DGG7447uϞ= ᮮ<0pM?å{uuueeeyyydd$55c;WDgggO'˽qvvr_]]raaaS?~444ttth/_l `0&&&n޼Y^^J䤤$obÇTTOEѷr[jNCR)
w{zz  gΜ TUUݸqťra'&& 'O%HqpplQp#G8::]bhcʤYGGGfmmB	mm&,Ғ`eeE$e? <}4--ȈH$&&&· D&>} hkk0(}lkkk񮽽Qmm퐐GGǦ^}bbǋtuu@$-ͶͱXfxϟm;&!4-))9wdM"޽{+**>|;;X4;;kjj
/ <ĈX0bXt:]OEAeT}K(!E"۷%o9NKK#Hp[[[\XXQ.
h4|QPP"ÇZZZ'wNNΡCvtݻ9m$x</77wmm˗W\ill400 ׯ_300())stee۷o=4 UTTٙI(lo*n79
l6ltti|qa ,--r.]1;;+>ק<а N(rooǏ<t 4}Qࠧ'&#####}qqBa0Jccc4]^^.;r ߽{7%%㕖HXYYk (
*gJJ[b5'733p޽rҊ7YXXxzzz{{PTE[ܬ7xg=BVVɁ---FQ:d2y||\nM bUUUNzq~~>̼pႱqRRf  qqqFFF/^455u񙟟գ(lo	\B/y]뻶Q[[A"---z䎊p8Ȓ-A&edmFh;wp8戈]]]UBy[`0A #7ڂ$7ڂ$7ڂ$7ڂ$7"m_s0V9*@"	+6EtU_?MMv˸%:jjjj?q$!S    IENDB`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: include/cobalt/sys/cobalt.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sys_2cobalt_8h_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">cobalt.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2014 Philippe Gerum &lt;rpm@xenomai.org&gt;.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef _COBALT_SYS_COBALT_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define _COBALT_SYS_COBALT_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;sched.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;semaphore.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;boilerplate/atomic.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;boilerplate/list.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/kernel/synch.h&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/kernel/vdso.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/corectl.h&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/mutex.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/event.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/monitor.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/thread.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/cond.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;cobalt/uapi/sem.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;cobalt/ticks.h&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define cobalt_commit_memory(p) __cobalt_commit_memory(p, sizeof(*p))</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">struct </span>cobalt_tsd_hook {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        void (*create_tsd)(void);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        void (*delete_tsd)(void);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">struct </span>pvholder next;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;};</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keywordtype">int</span> cobalt_extend(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> magic);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordtype">int</span> cobalt_corectl(<span class="keywordtype">int</span> request, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> bufsz);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keywordtype">int</span> cobalt_thread_stat(pid_t pid,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                       <span class="keyword">struct</span> cobalt_threadstat *stat);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keywordtype">int</span> cobalt_serial_debug(<span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keywordtype">void</span> __cobalt_commit_memory(<span class="keywordtype">void</span> *p, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keywordtype">void</span> cobalt_thread_harden(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keywordtype">void</span> cobalt_thread_relax(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keywordtype">int</span> cobalt_thread_join(pthread_t thread);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;pid_t cobalt_thread_pid(pthread_t thread);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keywordtype">int</span> cobalt_thread_mode(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  </div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_init(cobalt_monitor_t *mon,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                        clockid_t clk_id, <span class="keywordtype">int</span> flags);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_destroy(cobalt_monitor_t *mon);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_enter(cobalt_monitor_t *mon);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_exit(cobalt_monitor_t *mon);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_wait(cobalt_monitor_t *mon, <span class="keywordtype">int</span> event,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                        <span class="keyword">const</span> <span class="keyword">struct</span> timespec *ts);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keywordtype">void</span> cobalt_monitor_grant(cobalt_monitor_t *mon,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                          <span class="keyword">struct</span> xnthread_user_window *u_window);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_grant_sync(cobalt_monitor_t *mon,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                              <span class="keyword">struct</span> xnthread_user_window *u_window);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keywordtype">void</span> cobalt_monitor_grant_all(cobalt_monitor_t *mon);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_grant_all_sync(cobalt_monitor_t *mon);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keywordtype">void</span> cobalt_monitor_drain(cobalt_monitor_t *mon);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_drain_sync(cobalt_monitor_t *mon);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keywordtype">void</span> cobalt_monitor_drain_all(cobalt_monitor_t *mon);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keywordtype">int</span> cobalt_monitor_drain_all_sync(cobalt_monitor_t *mon);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keywordtype">int</span> cobalt_event_init(cobalt_event_t *event,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                      <span class="keywordtype">int</span> flags);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">int</span> cobalt_event_post(cobalt_event_t *event,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keywordtype">int</span> cobalt_event_wait(cobalt_event_t *event,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *bits_r,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                      <span class="keywordtype">int</span> mode,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                      <span class="keyword">const</span> <span class="keyword">struct</span> timespec *timeout);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> cobalt_event_clear(cobalt_event_t *event,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">int</span> cobalt_event_inquire(cobalt_event_t *event,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                         <span class="keyword">struct</span> cobalt_event_info *info,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                         pid_t *waitlist, <span class="keywordtype">size_t</span> waitsz);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keywordtype">int</span> cobalt_event_destroy(cobalt_event_t *event);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keywordtype">int</span> cobalt_sem_inquire(sem_t *sem, <span class="keyword">struct</span> cobalt_sem_info *info,</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                       pid_t *waitlist, <span class="keywordtype">size_t</span> waitsz);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keywordtype">int</span> cobalt_sched_weighted_prio(<span class="keywordtype">int</span> policy,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                               <span class="keyword">const</span> <span class="keyword">struct</span> sched_param_ex *param_ex);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keywordtype">void</span> cobalt_register_tsd_hook(<span class="keyword">struct</span> cobalt_tsd_hook *th);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keywordtype">void</span> cobalt_assert_nrt(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/* Use cobalt_assert_nrt() instead of: */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;__deprecated <span class="keywordtype">void</span> assert_nrt(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;__deprecated <span class="keywordtype">void</span> assert_nrt_fast(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> __cobalt_control_bind;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !_COBALT_SYS_COBALT_H */</span><span class="preprocessor"></span></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_727d51ab6cd8bd91d7c75c1be5676510.html">cobalt</a></li><li class="navelem"><a class="el" href="dir_05bb38efa7bb973f2c95ea76eedc6f43.html">sys</a></li><li class="navelem"><b>cobalt.h</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                         var dir_ad41d5a1947d1fb5bcbdba70c4914122 =
[
    [ "asm", "dir_24e2ecf9720611f1126203c750ca8681.html", "dir_24e2ecf9720611f1126203c750ca8681" ]
];                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <map id="Device Registration Services" name="Device Registration Services">
<area shape="rect" id="node1" href="$group__rtdm__driver__interface.html" title="RTDM driver programming interface. " alt="" coords="5,5,141,47"/>
</map>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          var group__cobalt__core =
[
    [ "Asynchronous Procedure Calls", "group__cobalt__core__apc.html", "group__cobalt__core__apc" ],
    [ "In-kernel arithmetics", "group__cobalt__core__arith.html", "group__cobalt__core__arith" ],
    [ "Buffer descriptor", "group__cobalt__core__bufd.html", "group__cobalt__core__bufd" ],
    [ "Clock services", "group__cobalt__core__clock.html", "group__cobalt__core__clock" ],
    [ "Debugging services", "group__cobalt__core__debug.html", null ],
    [ "Dynamic memory allocation services", "group__cobalt__core__heap.html", "group__cobalt__core__heap" ],
    [ "Interrupt management", "group__cobalt__core__irq.html", "group__cobalt__core__irq" ],
    [ "Locking services", "group__cobalt__core__lock.html", "group__cobalt__core__lock" ],
    [ "Lightweight key-to-object mapping service", "group__cobalt__core__map.html", "group__cobalt__core__map" ],
    [ "Registry services", "group__cobalt__core__registry.html", "group__cobalt__core__registry" ],
    [ "Thread scheduling control", "group__cobalt__core__sched.html", "group__cobalt__core__sched" ],
    [ "Synchronous I/O multiplexing", "group__cobalt__core__select.html", "group__cobalt__core__select" ],
    [ "Thread synchronization services", "group__cobalt__core__synch.html", "group__cobalt__core__synch" ],
    [ "Thread services", "group__cobalt__core__thread.html", "group__cobalt__core__thread" ],
    [ "Timer services", "group__cobalt__core__timer.html", "group__cobalt__core__timer" ],
    [ "Virtual file services", "group__cobalt__core__vfile.html", "group__cobalt__core__vfile" ],
    [ "Dual kernel service tags", "group__cobalt__core.html#cobalt-core-tags", null ]
];                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    var group__rtdm__udd =
[
    [ "udd_memregion", "structudd__memregion.html", [
      [ "addr", "structudd__memregion.html#ada1ae59dc9c3e7e412b23515841c432b", null ],
      [ "len", "structudd__memregion.html#af592847b0c15dcc6ccb621678911f31f", null ],
      [ "name", "structudd__memregion.html#a4e8d0d0984917bd8c5a70c9ab9fa05ab", null ],
      [ "type", "structudd__memregion.html#a7c1588967681e23d15f040a3eee22d4e", null ]
    ] ],
    [ "udd_device", "structudd__device.html", [
      [ "udd_reserved", "structudd__device_1_1udd__reserved.html", null ],
      [ "close", "structudd__device.html#a9e6dce382a0c7e23d26f2bb12b523e45", null ],
      [ "device_flags", "structudd__device.html#acc143e9af9f5a1a6de12a09730370e4c", null ],
      [ "device_name", "structudd__device.html#a8f5d7d94ba891771a3d5dfbc308fdcad", null ],
      [ "device_subclass", "structudd__device.html#ae2be25937198705a92f5e179d6c48192", null ],
      [ "interrupt", "structudd__device.html#aa6001084a7f2eb10225ce5c9369999c1", null ],
      [ "ioctl", "structudd__device.html#ae1717b439d1b9352d9b941ae6e1594ad", null ],
      [ "irq", "structudd__device.html#aab89d90525c1e515756a87116c8adf09", null ],
      [ "mem_regions", "structudd__device.html#a07a8a1d85f094c147a600e2c3b7f5995", null ],
      [ "mmap", "structudd__device.html#af2ecac4980b9d0a946730015068a74de", null ],
      [ "open", "structudd__device.html#af516c02002866b74d68c4e000b6ab37e", null ]
    ] ],
    [ "udd_signotify", "structudd__signotify.html", [
      [ "pid", "structudd__signotify.html#a5d6a5db2ec1fd071c8aefb9da3268f5e", null ],
      [ "sig", "structudd__signotify.html#a224ee47db9f20ccdd86ec931ccd63bb6", null ]
    ] ],
    [ "UDD_IRQ_CUSTOM", "group__rtdm__udd.html#ga2d95e2dc3d3bf9de65c0c36889668d39", null ],
    [ "UDD_IRQ_NONE", "group__rtdm__udd.html#gaa3a9780334448cdbb66d147c845806ff", null ],
    [ "UDD_MEM_LOGICAL", "group__rtdm__udd.html#gaa55c896372f69102bab1ae98e7117a2f", null ],
    [ "UDD_MEM_NONE", "group__rtdm__udd.html#ga3d99c468cad10f370079e51db1223755", null ],
    [ "UDD_MEM_PHYS", "group__rtdm__udd.html#ga00632ad4aad373171da9fc6b7d44275e", null ],
    [ "UDD_MEM_VIRTUAL", "group__rtdm__udd.html#ga35860acaa182b11fa9caaf3b80912393", null ],
    [ "UDD_RTIOC_IRQDIS", "group__rtdm__udd.html#ga5e774aed523fce77d75ac2ba24e9aebc", null ],
    [ "UDD_RTIOC_IRQEN", "group__rtdm__udd.html#ga3262c2cf44554d882cfe1fbcb8c5c06d", null ],
    [ "UDD_RTIOC_IRQSIG", "group__rtdm__udd.html#gad418ff50a125079ee342be1089adc081", null ],
    [ "udd_disable_irq", "group__rtdm__udd.html#gaafa15680426042c8c411b6fcf10627da", null ],
    [ "udd_enable_irq", "group__rtdm__udd.html#ga7ee451ee6e96cbb88254877ca5dd5d3f", null ],
    [ "udd_get_device", "group__rtdm__udd.html#ga306a8671bd96a1ea578c5f76e646ef67", null ],
    [ "udd_notify_event", "group__rtdm__udd.html#ga7bd19086f467b6ba791690a565d2c509", null ],
    [ "udd_register_device", "group__rtdm__udd.html#gaa5bee7471396c7b182a5a2a5fb60d230", null ],
    [ "udd_unregister_device", "group__rtdm__udd.html#ga389544ffa49f17fe3417d97122ed3acb", null ]
];                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: include/xenomai Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dir_4bf9f9b4489b5e58ba40fc4187e6df94.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">xenomai Directory Reference</div>  </div>
</div><!--header-->
<div class="contents">
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_4bf9f9b4489b5e58ba40fc4187e6df94.html">xenomai</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       19bfee88d7e24de13a50f67ac23d636f                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                var group__rtdm__can =
[
    [ "can_bittime_std", "structcan__bittime__std.html", [
      [ "brp", "structcan__bittime__std.html#a08d6def90babb8958ec9da1f328e2bae", null ],
      [ "phase_seg1", "structcan__bittime__std.html#a4ea4b12dc1d6cec75599f88b3c3dde3c", null ],
      [ "phase_seg2", "structcan__bittime__std.html#a55a0d5efff79f06626177ff46101997b", null ],
      [ "prop_seg", "structcan__bittime__std.html#a071c82fd3d0a66ce45fe51c8fedb156a", null ],
      [ "sam", "structcan__bittime__std.html#ae6ab12fbeab86132bd178d63a1fd968f", null ],
      [ "sjw", "structcan__bittime__std.html#a0c42abf9132d5e08196a0af51b86905f", null ]
    ] ],
    [ "can_bittime_btr", "structcan__bittime__btr.html", [
      [ "btr0", "structcan__bittime__btr.html#a17d058dedc9a9339e378f2b7b352a554", null ],
      [ "btr1", "structcan__bittime__btr.html#a6d93f9587762eb9d0a9a05612b108afe", null ]
    ] ],
    [ "can_bittime", "structcan__bittime.html", [
      [ "btr", "structcan__bittime.html#a1553dfa8833111c9b6f1dc2ab4984b72", null ],
      [ "std", "structcan__bittime.html#a63ff3bc997c3c48090dfcff8876dc909", null ],
      [ "type", "structcan__bittime.html#a7635b85b6a373e78cdbed846986e330f", null ]
    ] ],
    [ "can_filter", "structcan__filter.html", [
      [ "can_id", "structcan__filter.html#aac0f27fee94e90063d8a80f4928e1298", null ],
      [ "can_mask", "structcan__filter.html#afa419227fe42bf1ce84a7c41600f1f90", null ]
    ] ],
    [ "sockaddr_can", "structsockaddr__can.html", [
      [ "can_family", "structsockaddr__can.html#ae9d8c789193e516c282a707d5a118ebc", null ],
      [ "can_ifindex", "structsockaddr__can.html#af1586f4d4c039a7941f07c0d746a73a7", null ]
    ] ],
    [ "can_frame", "structcan__frame.html", [
      [ "__attribute__", "structcan__frame.html#af58d971323fd8fdd65fb4b1140bc0ee5", null ],
      [ "can_dlc", "structcan__frame.html#aa055f09fd81b299201618396b7dc9314", null ],
      [ "can_id", "structcan__frame.html#a0294f06f81a3ae0d155eb5fd14733d63", null ]
    ] ],
    [ "can_ifreq", "structcan__ifreq.html", null ],
    [ "AF_CAN", "group__rtdm__can.html#ga546620c7e758f003b24b7fdae4f97bd4", null ],
    [ "CAN_CTRLMODE_3_SAMPLES", "group__rtdm__can.html#ga9ac4d541a8af54f03f51e1574676dd19", null ],
    [ "CAN_CTRLMODE_LISTENONLY", "group__rtdm__can.html#gae4ba49824d17e7d06300cb8b4a4bff45", null ],
    [ "CAN_CTRLMODE_LOOPBACK", "group__rtdm__can.html#ga19ec0cc4379e80c32cbd333cf7c145e9", null ],
    [ "CAN_EFF_FLAG", "group__rtdm__can.html#ga5ae55ab3741140024858bd7b8762ea42", null ],
    [ "CAN_EFF_MASK", "group__rtdm__can.html#ga83b943dca61d0aad5b07ec01c3317572", null ],
    [ "CAN_ERR_ACK", "group__rtdm__can.html#gadbe83f5e81c1c8c767daaf97c5849017", null ],
    [ "CAN_ERR_BUSERROR", "group__rtdm__can.html#ga0b068b1221129441b89967ee2ddb9f44", null ],
    [ "CAN_ERR_BUSOFF", "group__rtdm__can.html#ga8b0903e35c75de100b97a7b3e368b269", null ],
    [ "CAN_ERR_CRTL", "group__rtdm__can.html#ga8086092a2e40c1b0429caaad3b2c8675", null ],
    [ "CAN_ERR_CRTL_RX_OVERFLOW", "group__rtdm__can.html#ga23d6f05d55b62fffdbd0a50969bc2d04", null ],
    [ "CAN_ERR_CRTL_RX_PASSIVE", "group__rtdm__can.html#ga853db0a1bf833caea89e3597a0123c11", null ],
    [ "CAN_ERR_CRTL_RX_WARNING", "group__rtdm__can.html#gae93958bbabe5e2e6d328d8fa5d491a96", null ],
    [ "CAN_ERR_CRTL_TX_OVERFLOW", "group__rtdm__can.html#gab1412f1e2cc4f23334ed5ea766d12006", null ],
    [ "CAN_ERR_CRTL_TX_PASSIVE", "group__rtdm__can.html#ga29185de9d3b35414a729af6e0fad6574", null ],
    [ "CAN_ERR_CRTL_TX_WARNING", "group__rtdm__can.html#gab46d1dddb458203ca07e0c351275c549", null ],
    [ "CAN_ERR_CRTL_UNSPEC", "group__rtdm__can.html#gafcdc17774047f27e70f3c39f6fb66076", null ],
    [ "CAN_ERR_FLAG", "group__rtdm__can.html#ga24df2eae50a2cef0f7f08c73a246a012", null ],
    [ "CAN_ERR_LOSTARB", "group__rtdm__can.html#gaa79a977211fe6534a627541f71373df0", null ],
    [ "CAN_ERR_LOSTARB_UNSPEC", "group__rtdm__can.html#ga7fa1bc55bccfadf780c0556c7d4d7fef", null ],
    [ "CAN_ERR_MASK", "group__rtdm__can.html#gad4061a08b8c5aa6de3bb390efd3b6bd6", null ],
    [ "CAN_ERR_PROT", "group__rtdm__can.html#ga0fdfaa2091c61c2db8caa7a51e8c0037", null ],
    [ "CAN_ERR_PROT_ACTIVE", "group__rtdm__can.html#ga460ee0be98290e6916f85c8651d6de05", null ],
    [ "CAN_ERR_PROT_BIT", "group__rtdm__can.html#ga0443c62a7e861f429f51c7bb6dc4ee23", null ],
    [ "CAN_ERR_PROT_BIT0", "group__rtdm__can.html#ga1b469132ce858c4a0222e367b986343a", null ],
    [ "CAN_ERR_PROT_BIT1", "group__rtdm__can.html#ga13e44854f6873a4a08ba2c9de0544471", null ],
    [ "CAN_ERR_PROT_FORM", "group__rtdm__can.html#gae8f76071caf3ac10abb88be4347b9625", null ],
    [ "CAN_ERR_PROT_LOC_ACK", "group__rtdm__can.html#ga14988a58a4514b44061ab5b942c6bbdf", null ],
    [ "CAN_ERR_PROT_LOC_ACK_DEL", "group__rtdm__can.html#ga8e928e081ef83a83c2885259fc0a6002", null ],
    [ "CAN_ERR_PROT_LOC_CRC_DEL", "group__rtdm__can.html#ga893a0c29cb622265c5d22ba7f26575a2", null ],
    [ "CAN_ERR_PROT_LOC_CRC_SEQ", "group__rtdm__can.html#ga1e56b5931c70b6ecf21a3b7d9ceebe16", null ],
    [ "CAN_ERR_PROT_LOC_DATA", "group__rtdm__can.html#ga1877b10333d3805f2ea1ef9195a8dee1", null ],
    [ "CAN_ERR_PROT_LOC_DLC", "group__rtdm__can.html#ga2aa0ab15f3f4fc974653ff556688046a", null ],
    [ "CAN_ERR_PROT_LOC_EOF", "group__rtdm__can.html#ga811713c9831116e6e6c42631fb7d287a", null ],
    [ "CAN_ERR_PROT_LOC_ID04_00", "group__rtdm__can.html#ga00bc04bfcae8d6486aa149cd19dd6102", null ],
    [ "CAN_ERR_PROT_LOC_ID12_05", "group__rtdm__can.html#gafd6cd3681ebf245896d282daabdac0b7", null ],
    [ "CAN_ERR_PROT_LOC_ID17_13", "group__rtdm__can.html#gabb436ab756394e8844a3925edd92b95c", null ],
    [ "CAN_ERR_PROT_LOC_ID20_18", "group__rtdm__can.html#ga240923d7f939dd08d2e4f434468e3006", null ],
    [ "CAN_ERR_PROT_LOC_ID28_21", "group__rtdm__can.html#ga0592a90c8dba2c8102479e184dcd6c62", null ],
    [ "CAN_ERR_PROT_LOC_IDE", "group__rtdm__can.html#ga4fe7a2839d2ca31e8dd383564b1865c1", null ],
    [ "CAN_ERR_PROT_LOC_INTERM", "group__rtdm__can.html#gac52eb448c0ec04421f0e21ccf9a496a0", null ],
    [ "CAN_ERR_PROT_LOC_RES0", "group__rtdm__can.html#gafe744ebfd9a71b557d3059bc3f8aee56", null ],
    [ "CAN_ERR_PROT_LOC_RES1", "group__rtdm__can.html#ga13aa190099e1600314bb8e46e0a693ce", null ],
    [ "CAN_ERR_PROT_LOC_RTR", "group__rtdm__can.html#ga79567d5df1287ccdd1966d092b5e047c", null ],
    [ "CAN_ERR_PROT_LOC_SOF", "group__rtdm__can.html#gaa7a2392801977b667a4d39083d0c92c3", null ],
    [ "CAN_ERR_PROT_LOC_SRTR", "group__rtdm__can.html#gad70fa4d644d5b71f8891de051643226a", null ],
    [ "CAN_ERR_PROT_LOC_UNSPEC", "group__rtdm__can.html#ga4ac83a947ca929b857af6352300ad6d8", null ],
    [ "CAN_ERR_PROT_OVERLOAD", "group__rtdm__can.html#ga0c02b06cad0d95b340c1b6294a5f9f9f", null ],
    [ "CAN_ERR_PROT_STUFF", "group__rtdm__can.html#ga31af2ea01de879fb1d153cb6c0d642f8", null ],
    [ "CAN_ERR_PROT_TX", "group__rtdm__can.html#gabee807ce2e8ccf6eafc9b6f73a9315fb", null ],
    [ "CAN_ERR_PROT_UNSPEC", "group__rtdm__can.html#ga6cf7ee3a3d83315ed2589bb3bdb816b3", null ],
    [ "CAN_ERR_RESTARTED", "group__rtdm__can.html#ga54583090d19940d761a224bc0801ec6a", null ],
    [ "CAN_ERR_TRX", "group__rtdm__can.html#gaf0026f916a985610cc449ffa6a31445f", null ],
    [ "CAN_ERR_TRX_CANH_NO_WIRE", "group__rtdm__can.html#gac39d4c89032cba5c08981182e297c7d7", null ],
    [ "CAN_ERR_TRX_CANH_SHORT_TO_BAT", "group__rtdm__can.html#ga294393d4f39d4476d0c57876c3504a98", null ],
    [ "CAN_ERR_TRX_CANH_SHORT_TO_GND", "group__rtdm__can.html#ga325c4d192a7de24a61b8fcca1d434669", null ],
    [ "CAN_ERR_TRX_CANH_SHORT_TO_VCC", "group__rtdm__can.html#ga85ab738e9c73d380f96371f195aa41ab", null ],
    [ "CAN_ERR_TRX_CANL_NO_WIRE", "group__rtdm__can.html#ga1ecc59939f560d7e018af307df03a370", null ],
    [ "CAN_ERR_TRX_CANL_SHORT_TO_BAT", "group__rtdm__can.html#gaf4ec9ec512befde085f5a7701d0813fe", null ],
    [ "CAN_ERR_TRX_CANL_SHORT_TO_CANH", "group__rtdm__can.html#gaaed57dcbd07a56050c8915fcd8bd5ba8", null ],
    [ "CAN_ERR_TRX_CANL_SHORT_TO_GND", "group__rtdm__can.html#ga428b96738439b9df662a999f1a5f9ffd", null ],
    [ "CAN_ERR_TRX_CANL_SHORT_TO_VCC", "group__rtdm__can.html#gace999081029fcd690f89c76aa8738122", null ],
    [ "CAN_ERR_TRX_UNSPEC", "group__rtdm__can.html#ga2169eab29b3c954598fe6780d98b479a", null ],
    [ "CAN_ERR_TX_TIMEOUT", "group__rtdm__can.html#ga168d1c5d468bad5e52ccbd70c5f37986", null ],
    [ "CAN_INV_FILTER", "group__rtdm__can.html#ga5cb484fa2d90489f6b4e7a77c254c59f", null ],
    [ "CAN_RAW", "group__rtdm__can.html#ga57682d9a1e4f4d90943dbaa683582bf5", null ],
    [ "CAN_RAW_ERR_FILTER", "group__rtdm__can.html#ga451ba35aa4d0bef48cb7b0416f5b4367", null ],
    [ "CAN_RAW_FILTER", "group__rtdm__can.html#ga87313c6e632294aa4582899a3bbc89e4", null ],
    [ "CAN_RAW_LOOPBACK", "group__rtdm__can.html#gaa7eb7dc3aa940a0aca20d3a564a147d9", null ],
    [ "CAN_RAW_RECV_OWN_MSGS", "group__rtdm__can.html#ga712942ca3d0d621184fb2019a24677c3", null ],
    [ "CAN_RTR_FLAG", "group__rtdm__can.html#gaf324d65226057755175038a15d9bbd75", null ],
    [ "CAN_SFF_MASK", "group__rtdm__can.html#gafe4fc3f9cab58aeeb463861289e8ce93", null ],
    [ "PF_CAN", "group__rtdm__can.html#gaeac0c3db7a1e021f17987bcc76893849", null ],
    [ "RTCAN_RTIOC_RCV_TIMEOUT", "group__rtdm__can.html#gad8af08ea3624e8e9c464ff143fcb66c0", null ],
    [ "RTCAN_RTIOC_SND_TIMEOUT", "group__rtdm__can.html#gad3758528585b2779e8949df671f1cf6c", null ],
    [ "RTCAN_RTIOC_TAKE_TIMESTAMP", "group__rtdm__can.html#gaedd7bd75a1983735052fed62e101e5ce", null ],
    [ "RTCAN_TAKE_NO_TIMESTAMPS", "group__rtdm__can.html#gae06ad16f505d1ec6c1e55d82ac82ef89", null ],
    [ "RTCAN_TAKE_TIMESTAMPS", "group__rtdm__can.html#gae39894e7e6d107d4bab150cc0ef993c8", null ],
    [ "SIOCGCANBAUDRATE", "group__rtdm__can.html#ga9a3032f07b3a6a2f92eb2ba25a4ff8bf", null ],
    [ "SIOCGCANCTRLMODE", "group__rtdm__can.html#gaa78d64e69ffd68a20f93a6aa64393d6a", null ],
    [ "SIOCGCANCUSTOMBITTIME", "group__rtdm__can.html#gab92b51127ca47c491069b9f3e5013a7f", null ],
    [ "SIOCGCANSTATE", "group__rtdm__can.html#ga5b5f750db08d56f40489679f22236ef4", null ],
    [ "SIOCGIFINDEX", "group__rtdm__can.html#gaee74ae50c8ea0a6aee277c6f124a3866", null ],
    [ "SIOCSCANBAUDRATE", "group__rtdm__can.html#ga7c070037c218b40de849ebf4d299f977", null ],
    [ "SIOCSCANCTRLMODE", "group__rtdm__can.html#ga26fa69d2cded6e172b96b4a6dc3798df", null ],
    [ "SIOCSCANCUSTOMBITTIME", "group__rtdm__can.html#ga4e9547dcb608fd0b8d5cf57f926e5176", null ],
    [ "SIOCSCANMODE", "group__rtdm__can.html#ga72b56a34fe466bca858b1f5f401e1076", null ],
    [ "SOL_CAN_RAW", "group__rtdm__can.html#gad981aa82a29d828882a2fb4c35c1cdd7", null ],
    [ "can_baudrate_t", "group__rtdm__can.html#ga1c314e1f81a7211a9778da835202a741", null ],
    [ "can_bittime_type_t", "group__rtdm__can.html#ga94a6fb4128854d6fec6e0882df4374f2", null ],
    [ "can_ctrlmode_t", "group__rtdm__can.html#gaa1db20ee5ae4803157e38db4b6c6150b", null ],
    [ "can_err_mask_t", "group__rtdm__can.html#gae3b8d6d39f9bbd387bf74031aba8f4f5", null ],
    [ "can_filter_t", "group__rtdm__can.html#ga95d9c00c42529e030dcc8d43a98127a2", null ],
    [ "can_frame_t", "group__rtdm__can.html#gace340cdd98cbfd2525c9d6b23cdd2188", null ],
    [ "can_id_t", "group__rtdm__can.html#gad4cb716102402e9be0b5919cd2dd6ead", null ],
    [ "can_mode_t", "group__rtdm__can.html#ga47a129d7188a7cd7b68fbf60ebbfd9e8", null ],
    [ "can_state_t", "group__rtdm__can.html#ga046ddfab86ca47210233f254bc874c6d", null ],
    [ "CAN_BITTIME_TYPE", "group__rtdm__can.html#ga42c4f551b57f47d4e004c02505a01f71", [
      [ "CAN_BITTIME_STD", "group__rtdm__can.html#gga42c4f551b57f47d4e004c02505a01f71a160d7c514df2477f8016ed1bf5a6709f", null ],
      [ "CAN_BITTIME_BTR", "group__rtdm__can.html#gga42c4f551b57f47d4e004c02505a01f71ae164a942c698440f2548bd82fea33e55", null ]
    ] ],
    [ "CAN_MODE", "group__rtdm__can.html#gac0d6cdda2cf4abb51116b86bc99acf99", [
      [ "CAN_MODE_STOP", "group__rtdm__can.html#ggac0d6cdda2cf4abb51116b86bc99acf99a04f549e87bf7ddf764c563062dd76790", null ],
      [ "CAN_MODE_START", "group__rtdm__can.html#ggac0d6cdda2cf4abb51116b86bc99acf99af9c617b6b198770017f6e7198bfb50b6", null ],
      [ "CAN_MODE_SLEEP", "group__rtdm__can.html#ggac0d6cdda2cf4abb51116b86bc99acf99a57866c198e12c54747aca0786dc33e3e", null ]
    ] ],
    [ "CAN_STATE", "group__rtdm__can.html#ga8680f5710e1a13d553067cc32c86226b", [
      [ "CAN_STATE_ERROR_ACTIVE", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba026154ef3a7f9cb633e43ab7e63d769c", null ],
      [ "CAN_STATE_ACTIVE", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba7db2add3bd2ed5a01893a3d2a012ac67", null ],
      [ "CAN_STATE_ERROR_WARNING", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba15263a89961afbc4e813c7ccfc59e5ff", null ],
      [ "CAN_STATE_BUS_WARNING", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba8e8ffc38c3886c8ab4b7a6ebd24db2e1", null ],
      [ "CAN_STATE_ERROR_PASSIVE", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226bac2cd08cde738273c5e5df8306c48d8ae", null ],
      [ "CAN_STATE_BUS_PASSIVE", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba16806979589ee8f20ee84c767903b667", null ],
      [ "CAN_STATE_BUS_OFF", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba679935a8710667fcb99423d217cd9959", null ],
      [ "CAN_STATE_SCANNING_BAUDRATE", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226bacc4b4039f38316b01662d775eeb981ff", null ],
      [ "CAN_STATE_STOPPED", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba644e7a441f2e607b93528d3128508cc8", null ],
      [ "CAN_STATE_SLEEPING", "group__rtdm__can.html#gga8680f5710e1a13d553067cc32c86226ba2bb74d448dac491e9cfcc7f7bcc14857", null ]
    ] ]
];                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: Thread synchronization services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__cobalt__core__synch.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Thread synchronization services<div class="ingroups"><a class="el" href="group__cobalt.html">Cobalt</a> &raquo; <a class="el" href="group__cobalt__core.html">Cobalt kernel</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Thread synchronization services:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__cobalt__core__synch.png" border="0" alt="" usemap="#group____cobalt____core____synch"/>
<map name="group____cobalt____core____synch" id="group____cobalt____core____synch">
<area shape="rect" id="node2" href="group__cobalt__core.html" title="The Cobalt core is a co&#45;kernel which supplements the Linux kernel for delivering real&#45;time services w..." alt="" coords="5,13,104,39"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafc3030603c9054b69f1abb44014f1838"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#gafc3030603c9054b69f1abb44014f1838">xnsynch_init</a> (struct xnsynch *synch, int flags, <a class="el" href="structatomic__t.html">atomic_t</a> *fastlock)</td></tr>
<tr class="memdesc:gafc3030603c9054b69f1abb44014f1838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a synchronization object.  <a href="#gafc3030603c9054b69f1abb44014f1838">More...</a><br /></td></tr>
<tr class="separator:gafc3030603c9054b69f1abb44014f1838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd862461f55506485f04f4f98cdb6fb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#gadd862461f55506485f04f4f98cdb6fb8">xnsynch_destroy</a> (struct xnsynch *synch)</td></tr>
<tr class="memdesc:gadd862461f55506485f04f4f98cdb6fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a synchronization object.  <a href="#gadd862461f55506485f04f4f98cdb6fb8">More...</a><br /></td></tr>
<tr class="separator:gadd862461f55506485f04f4f98cdb6fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51cec970cb57608abe882c98bee72347"><td class="memItemLeft" align="right" valign="top">int __must_check&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#ga51cec970cb57608abe882c98bee72347">xnsynch_sleep_on</a> (struct xnsynch *synch, xnticks_t timeout, xntmode_t timeout_mode)</td></tr>
<tr class="memdesc:ga51cec970cb57608abe882c98bee72347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep on an ownerless synchronization object.  <a href="#ga51cec970cb57608abe882c98bee72347">More...</a><br /></td></tr>
<tr class="separator:ga51cec970cb57608abe882c98bee72347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54162964059c62d7a7b45ef22911662f"><td class="memItemLeft" align="right" valign="top">struct xnthread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#ga54162964059c62d7a7b45ef22911662f">xnsynch_wakeup_one_sleeper</a> (struct xnsynch *synch)</td></tr>
<tr class="memdesc:ga54162964059c62d7a7b45ef22911662f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unblock the heading thread from wait.  <a href="#ga54162964059c62d7a7b45ef22911662f">More...</a><br /></td></tr>
<tr class="separator:ga54162964059c62d7a7b45ef22911662f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8096364cd5d717dae816c74dcc05a8ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#ga8096364cd5d717dae816c74dcc05a8ac">xnsynch_wakeup_this_sleeper</a> (struct xnsynch *synch, struct xnthread *sleeper)</td></tr>
<tr class="memdesc:ga8096364cd5d717dae816c74dcc05a8ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unblock a particular thread from wait.  <a href="#ga8096364cd5d717dae816c74dcc05a8ac">More...</a><br /></td></tr>
<tr class="separator:ga8096364cd5d717dae816c74dcc05a8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga43fa3ecdc81f6ae157f840175c7ea091"><td class="memItemLeft" align="right" valign="top">int __must_check&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#ga43fa3ecdc81f6ae157f840175c7ea091">xnsynch_acquire</a> (struct xnsynch *synch, xnticks_t timeout, xntmode_t timeout_mode)</td></tr>
<tr class="memdesc:ga43fa3ecdc81f6ae157f840175c7ea091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire the ownership of a synchronization object.  <a href="#ga43fa3ecdc81f6ae157f840175c7ea091">More...</a><br /></td></tr>
<tr class="separator:ga43fa3ecdc81f6ae157f840175c7ea091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5cad7eeaa18834c9ba8843511a67628"><td class="memItemLeft" align="right" valign="top">int __must_check&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#gad5cad7eeaa18834c9ba8843511a67628">xnsynch_try_acquire</a> (struct xnsynch *synch)</td></tr>
<tr class="memdesc:gad5cad7eeaa18834c9ba8843511a67628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try acquiring the ownership of a synchronization object.  <a href="#gad5cad7eeaa18834c9ba8843511a67628">More...</a><br /></td></tr>
<tr class="separator:gad5cad7eeaa18834c9ba8843511a67628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad38fe2be85e02bf1298418674ab6386f"><td class="memItemLeft" align="right" valign="top">struct xnthread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#gad38fe2be85e02bf1298418674ab6386f">xnsynch_release</a> (struct xnsynch *synch, struct xnthread *thread)</td></tr>
<tr class="memdesc:gad38fe2be85e02bf1298418674ab6386f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Give the resource ownership to the next waiting thread.  <a href="#gad38fe2be85e02bf1298418674ab6386f">More...</a><br /></td></tr>
<tr class="separator:gad38fe2be85e02bf1298418674ab6386f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f98598194fa76a8b0ff298387429b9d"><td class="memItemLeft" align="right" valign="top">struct xnthread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#ga4f98598194fa76a8b0ff298387429b9d">xnsynch_peek_pendq</a> (struct xnsynch *synch)</td></tr>
<tr class="memdesc:ga4f98598194fa76a8b0ff298387429b9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access the thread leading a synch object wait queue.  <a href="#ga4f98598194fa76a8b0ff298387429b9d">More...</a><br /></td></tr>
<tr class="separator:ga4f98598194fa76a8b0ff298387429b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51febbfe4ff33ef18778fe9ecf62c43a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cobalt__core__synch.html#ga51febbfe4ff33ef18778fe9ecf62c43a">xnsynch_flush</a> (struct xnsynch *synch, int reason)</td></tr>
<tr class="memdesc:ga51febbfe4ff33ef18778fe9ecf62c43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unblock all waiters pending on a resource.  <a href="#ga51febbfe4ff33ef18778fe9ecf62c43a">More...</a><br /></td></tr>
<tr class="separator:ga51febbfe4ff33ef18778fe9ecf62c43a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga43fa3ecdc81f6ae157f840175c7ea091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga43fa3ecdc81f6ae157f840175c7ea091">&#9670;&nbsp;</a></span>xnsynch_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xnsynch_acquire </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xnticks_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xntmode_t&#160;</td>
          <td class="paramname"><em>timeout_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire the ownership of a synchronization object. </p>
<p>This service should be called by upper interfaces wanting the current thread to acquire the ownership of the given resource. If the resource is already assigned to another thread, the caller is suspended.</p>
<p>This service must be used only with synchronization objects that track ownership (XNSYNCH_OWNER set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object to acquire.</td></tr>
    <tr><td class="paramname">timeout</td><td>The timeout which may be used to limit the time the thread pends on the resource. This value is a wait time given as a count of nanoseconds. It can either be relative, absolute monotonic, or absolute adjustable depending on <em>timeout_mode</em>. Passing XN_INFINITE <b>and</b> setting <em>mode</em> to XN_RELATIVE specifies an unbounded wait. All other values are used to initialize a watchdog timer.</td></tr>
    <tr><td class="paramname">timeout_mode</td><td>The mode of the <em>timeout</em> parameter. It can either be set to XN_RELATIVE, XN_ABSOLUTE, or XN_REALTIME (see also <a class="el" href="group__cobalt__core__timer.html#ga5105f0fe627798b588a5f124715cb31b" title="Arm a timer. ">xntimer_start()</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A bitmask which may include zero or one information bit among XNRMID, XNTIMEO and XNBREAK, which should be tested by the caller, for detecting respectively: object deletion, timeout or signal/unblock conditions which might have happened while waiting.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">primary-only, might-switch</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Unlike <a class="el" href="group__cobalt__core__synch.html#gad5cad7eeaa18834c9ba8843511a67628" title="Try acquiring the ownership of a synchronization object. ">xnsynch_try_acquire()</a>, this call does NOT check for invalid recursive locking request, which means that such request will always cause a deadlock for the caller. </dd></dl>

<p class="reference">References <a class="el" href="group__cobalt__core__thread.html#ga277e327d3802107ed35dc768cb01509c">xnthread_current()</a>.</p>

</div>
</div>
<a id="gadd862461f55506485f04f4f98cdb6fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd862461f55506485f04f4f98cdb6fb8">&#9670;&nbsp;</a></span>xnsynch_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xnsynch_destroy </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a synchronization object. </p>
<p>Destroys the synchronization object <em>synch</em>, unblocking all waiters with the XNRMID status.</p>
<dl class="section return"><dt>Returns</dt><dd>XNSYNCH_RESCHED is returned if at least one thread is unblocked, which means the caller should invoke <a class="el" href="group__cobalt__core__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> for applying the new scheduling state. Otherwise, XNSYNCH_DONE is returned.</dd></dl>
<dl class="section user"><dt>Side effects</dt><dd>Same as <a class="el" href="group__cobalt__core__synch.html#ga51febbfe4ff33ef18778fe9ecf62c43a" title="Unblock all waiters pending on a resource. ">xnsynch_flush()</a>.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">task-unrestricted</a> </dd></dl>

<p class="reference">References <a class="el" href="group__cobalt__core__thread__info.html#gab07d9dea73645dbba353dc2452c15b40">XNRMID</a>, and <a class="el" href="group__cobalt__core__synch.html#ga51febbfe4ff33ef18778fe9ecf62c43a">xnsynch_flush()</a>.</p>

</div>
</div>
<a id="ga51febbfe4ff33ef18778fe9ecf62c43a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51febbfe4ff33ef18778fe9ecf62c43a">&#9670;&nbsp;</a></span>xnsynch_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xnsynch_flush </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unblock all waiters pending on a resource. </p>
<p>This service atomically releases all threads which currently sleep on a given resource.</p>
<p>This service should be called by upper interfaces under circumstances requiring that the pending queue of a given resource is cleared, such as before the resource is deleted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object to be flushed.</td></tr>
    <tr><td class="paramname">reason</td><td>Some flags to set in the information mask of every unblocked thread. Zero is an acceptable value. The following bits are pre-defined by the nucleus:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>XNRMID should be set to indicate that the synchronization object is about to be destroyed (see <a class="el" href="group__cobalt__core__thread.html#ga9321320f5f883f20a4cb411ce585f115" title="Resume a thread. ">xnthread_resume()</a>).</li>
<li>XNBREAK should be set to indicate that the wait has been forcibly interrupted (see <a class="el" href="group__cobalt__core__thread.html#ga8fe02cbf0d0cebc0ca9d9522bc58e65a" title="Unblock a thread. ">xnthread_unblock()</a>).</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>XNSYNCH_RESCHED is returned if at least one thread is unblocked, which means the caller should invoke <a class="el" href="group__cobalt__core__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> for applying the new scheduling state. Otherwise, XNSYNCH_DONE is returned.</dd></dl>
<dl class="section user"><dt>Side effects</dt><dd></dd></dl>
<ul>
<li>The effective priority of the previous resource owner might be lowered to its base priority value as a consequence of the priority inheritance boost being cleared.</li>
<li>After this operation has completed, the synchronization object is not owned by any thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">unrestricted</a> </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__cobalt__core__synch.html#gadd862461f55506485f04f4f98cdb6fb8">xnsynch_destroy()</a>.</p>

</div>
</div>
<a id="gafc3030603c9054b69f1abb44014f1838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc3030603c9054b69f1abb44014f1838">&#9670;&nbsp;</a></span>xnsynch_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xnsynch_init </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structatomic__t.html">atomic_t</a> *&#160;</td>
          <td class="paramname"><em>fastlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a synchronization object. </p>
<p>Initializes a synchronization object. Xenomai threads can wait on and signal such objects for serializing access to resources. This object has built-in support for priority inheritance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The address of a synchronization object descriptor the nucleus will use to store the object-specific data. This descriptor must always be valid while the object is active therefore it must be allocated in permanent memory.</td></tr>
    <tr><td class="paramname">flags</td><td>A set of creation flags affecting the operation. The valid flags are:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>XNSYNCH_PRIO causes the threads waiting for the resource to pend in priority order. Otherwise, FIFO ordering is used (XNSYNCH_FIFO).</li>
<li>XNSYNCH_OWNER indicates that the synchronization object shall track the resource ownership, allowing a single owner at most at any point in time. Note that setting this flag implies the use of <a class="el" href="group__cobalt__core__synch.html#ga43fa3ecdc81f6ae157f840175c7ea091" title="Acquire the ownership of a synchronization object. ">xnsynch_acquire()</a> and <a class="el" href="group__cobalt__core__synch.html#gad38fe2be85e02bf1298418674ab6386f" title="Give the resource ownership to the next waiting thread. ">xnsynch_release()</a> instead of <a class="el" href="group__cobalt__core__synch.html#ga51cec970cb57608abe882c98bee72347" title="Sleep on an ownerless synchronization object. ">xnsynch_sleep_on()</a> and xnsynch_wakeup_*().</li>
<li>XNSYNCH_PIP enables priority inheritance when a priority inversion is detected among threads using this object. XNSYNCH_PIP enables XNSYNCH_OWNER and XNSYNCH_PRIO implicitly.</li>
<li>XNSYNCH_DREORD (Disable REORDering) tells the nucleus that the wait queue should not be reordered whenever the priority of a blocked thread it holds is changed. If this flag is not specified, changing the priority of a blocked thread using <a class="el" href="group__cobalt__core__thread.html#gafb78d40c8065b8569fafe7e24960742e" title="Change the base scheduling parameters of a thread. ">xnthread_set_schedparam()</a> will cause this object's wait queue to be reordered according to the new priority level, provided the synchronization object makes the waiters wait by priority order on the awaited resource (XNSYNCH_PRIO).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fastlock</td><td>Address of the fast lock word to be associated with a synchronization object with ownership tracking. Therefore, a valid fast-lock address is required if XNSYNCH_OWNER is set in <em>flags</em>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">task-unrestricted</a> </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__cobalt__core__select.html#gaf5576af13d5ffd6056311c2746a706a0">xnselector_init()</a>.</p>

</div>
</div>
<a id="ga4f98598194fa76a8b0ff298387429b9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f98598194fa76a8b0ff298387429b9d">&#9670;&nbsp;</a></span>xnsynch_peek_pendq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct xnthread * xnsynch_peek_pendq </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Access the thread leading a synch object wait queue. </p>
<p>This services returns the descriptor address of to the thread leading a synchronization object wait queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the target synchronization object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The descriptor address of the unblocked thread.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">unrestricted</a> </dd></dl>

</div>
</div>
<a id="gad38fe2be85e02bf1298418674ab6386f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad38fe2be85e02bf1298418674ab6386f">&#9670;&nbsp;</a></span>xnsynch_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct xnthread * xnsynch_release </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct xnthread *&#160;</td>
          <td class="paramname"><em>thread</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Give the resource ownership to the next waiting thread. </p>
<p>This service releases the ownership of the given synchronization object. The thread which is currently leading the object's pending list, if any, is unblocked from its pending state. However, no reschedule is performed.</p>
<p>This service must be used only with synchronization objects that track ownership (XNSYNCH_OWNER set).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object whose ownership is changed.</td></tr>
    <tr><td class="paramname">thread</td><td>The descriptor address of the current owner.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The descriptor address of the unblocked thread.</dd></dl>
<dl class="section user"><dt>Side effects</dt><dd></dd></dl>
<ul>
<li>The effective priority of the previous resource owner might be lowered to its base priority value as a consequence of the priority inheritance boost being cleared.</li>
<li>The synchronization object ownership is transfered to the unblocked thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">primary-only, might-switch</a> </dd></dl>

</div>
</div>
<a id="ga51cec970cb57608abe882c98bee72347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51cec970cb57608abe882c98bee72347">&#9670;&nbsp;</a></span>xnsynch_sleep_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xnsynch_sleep_on </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xnticks_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xntmode_t&#160;</td>
          <td class="paramname"><em>timeout_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep on an ownerless synchronization object. </p>
<p>Makes the calling thread sleep on the specified synchronization object, waiting for it to be signaled.</p>
<p>This service should be called by upper interfaces wanting the current thread to pend on the given resource. It must not be used with synchronization objects that are supposed to track ownership (XNSYNCH_OWNER).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object to sleep on.</td></tr>
    <tr><td class="paramname">timeout</td><td>The timeout which may be used to limit the time the thread pends on the resource. This value is a wait time given as a count of nanoseconds. It can either be relative, absolute monotonic, or absolute adjustable depending on <em>timeout_mode</em>. Passing XN_INFINITE <b>and</b> setting <em>mode</em> to XN_RELATIVE specifies an unbounded wait. All other values are used to initialize a watchdog timer.</td></tr>
    <tr><td class="paramname">timeout_mode</td><td>The mode of the <em>timeout</em> parameter. It can either be set to XN_RELATIVE, XN_ABSOLUTE, or XN_REALTIME (see also <a class="el" href="group__cobalt__core__timer.html#ga5105f0fe627798b588a5f124715cb31b" title="Arm a timer. ">xntimer_start()</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A bitmask which may include zero or one information bit among XNRMID, XNTIMEO and XNBREAK, which should be tested by the caller, for detecting respectively: object deletion, timeout or signal/unblock conditions which might have happened while waiting.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">primary-only, might-switch</a> </dd></dl>

<p class="reference">References <a class="el" href="group__cobalt__core__thread.html#ga277e327d3802107ed35dc768cb01509c">xnthread_current()</a>.</p>

</div>
</div>
<a id="gad5cad7eeaa18834c9ba8843511a67628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad5cad7eeaa18834c9ba8843511a67628">&#9670;&nbsp;</a></span>xnsynch_try_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xnsynch_try_acquire </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try acquiring the ownership of a synchronization object. </p>
<p>This service should be called by upper interfaces wanting the current thread to acquire the ownership of the given resource. If the resource is already assigned to another thread, the call returns with an error code.</p>
<p>This service must be used only with synchronization objects that track ownership (XNSYNCH_OWNER set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object to acquire.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned if <em>synch</em> has been successfully acquired. Otherwise:</dd></dl>
<ul>
<li>-EDEADLK is returned if <em>synch</em> is currently held by the calling thread.</li>
<li>-EBUSY is returned if <em>synch</em> is currently held by another thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">primary-only</a> </dd></dl>

<p class="reference">References <a class="el" href="group__cobalt__core__thread.html#ga277e327d3802107ed35dc768cb01509c">xnthread_current()</a>.</p>

</div>
</div>
<a id="ga54162964059c62d7a7b45ef22911662f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga54162964059c62d7a7b45ef22911662f">&#9670;&nbsp;</a></span>xnsynch_wakeup_one_sleeper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct xnthread * xnsynch_wakeup_one_sleeper </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unblock the heading thread from wait. </p>
<p>This service wakes up the thread which is currently leading the synchronization object's pending list. The sleeping thread is unblocked from its pending state, but no reschedule is performed.</p>
<p>This service should be called by upper interfaces wanting to signal the given resource so that a single waiter is resumed. It must not be used with synchronization objects that are supposed to track ownership (XNSYNCH_OWNER not set).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object whose ownership is changed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The descriptor address of the unblocked thread.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">unrestricted</a> </dd></dl>

</div>
</div>
<a id="ga8096364cd5d717dae816c74dcc05a8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8096364cd5d717dae816c74dcc05a8ac">&#9670;&nbsp;</a></span>xnsynch_wakeup_this_sleeper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xnsynch_wakeup_this_sleeper </td>
          <td>(</td>
          <td class="paramtype">struct xnsynch *&#160;</td>
          <td class="paramname"><em>synch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct xnthread *&#160;</td>
          <td class="paramname"><em>sleeper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unblock a particular thread from wait. </p>
<p>This service wakes up a specific thread which is currently pending on the given synchronization object. The sleeping thread is unblocked from its pending state, but no reschedule is performed.</p>
<p>This service should be called by upper interfaces wanting to signal the given resource so that a specific waiter is resumed. It must not be used with synchronization objects that are supposed to track ownership (XNSYNCH_OWNER not set).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">synch</td><td>The descriptor address of the synchronization object whose ownership is changed.</td></tr>
    <tr><td class="paramname">sleeper</td><td>The thread to unblock which MUST be currently linked to the synchronization object's pending queue (i.e. synch-&gt;pendq).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="group__cobalt__core.html">unrestricted</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: kernel/drivers/autotune -&gt; include Relation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dir_72cc62c6e6a40f19765c6a13c868acdf.html','');});
</script>
<div id="doc-content">
<div class="contents">
<h3>autotune &rarr; include Relation</h3><table class="dirtab"><tr class="dirtab"><th class="dirtab">File in kernel/drivers/autotune</th><th class="dirtab">Includes file in include</th></tr><tr class="dirtab"><td class="dirtab"><b>autotune.c</b></td><td class="dirtab"><a class="el" href="dir_727d51ab6cd8bd91d7c75c1be5676510.html">cobalt</a>&#160;/&#160;<a class="el" href="dir_cf5678a09d30c4a64d8efd3e7841e31a.html">kernel</a>&#160;/&#160;<a class="el" href="dir_6fb3c96f30c05412f9e8266f1a1cbdee.html">rtdm</a>&#160;/&#160;<a class="el" href="driver_8h.html">driver.h</a></td></tr></table></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_0de1d64efa6df97eacc8f5b0f9da3e59.html">drivers</a></li><li class="navelem"><a class="el" href="dir_72cc62c6e6a40f19765c6a13c868acdf.html">autotune</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                            38c2ab2b93801e9ab2d96117c32df605                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                var structcan__bittime__btr =
[
    [ "btr0", "structcan__bittime__btr.html#a17d058dedc9a9339e378f2b7b352a554", null ],
    [ "btr1", "structcan__bittime__btr.html#a6d93f9587762eb9d0a9a05612b108afe", null ]
];                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: lib/cobalt/arch/arm/include/asm/xenomai/features.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lib_2cobalt_2arch_2arm_2include_2asm_2xenomai_2features_8h_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">features.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2005 Philippe Gerum &lt;rpm@xenomai.org&gt;.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2 of the License, or (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef _LIB_COBALT_ARM_FEATURES_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define _LIB_COBALT_ARM_FEATURES_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include_next &lt;features.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;xeno_config.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#if defined(__ARM_ARCH_2__)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define __LINUX_ARM_ARCH__ 2</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* armv2 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#if defined(__ARM_ARCH_3__)</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define __LINUX_ARM_ARCH__ 3</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* armv3 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#if defined(__ARM_ARCH_4__) || defined(__ARM_ARCH_4T__)</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#define __LINUX_ARM_ARCH__ 4</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* armv4 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#if defined(__ARM_ARCH_5__) || defined(__ARM_ARCH_5T__) \</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">        || defined(__ARM_ARCH_5E__) || defined(__ARM_ARCH_5TE__) \</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">        || defined(__ARM_ARCH_5TEJ__)</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#define __LINUX_ARM_ARCH__ 5</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* armv5 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#if defined(__ARM_ARCH_6__) || defined(__ARM_ARCH_6K__) \</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">        || defined(__ARM_ARCH_6Z__) || defined(__ARM_ARCH_6ZK__)</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#define __LINUX_ARM_ARCH__ 6</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* armv6 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#if defined(__ARM_ARCH_7A__)</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#define __LINUX_ARM_ARCH__ 7</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* armv7 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#ifndef __LINUX_ARM_ARCH__</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#error &quot;Could not find current ARM architecture&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#if __LINUX_ARM_ARCH__ &lt; 6 &amp;&amp; defined(CONFIG_SMP)</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#error &quot;SMP not supported below armv6, compile with -march=armv6 or above&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;asm/xenomai/uapi/features.h&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keywordtype">int</span> cobalt_fp_detect(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !_LIB_COBALT_ARM_FEATURES_H */</span><span class="preprocessor"></span></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a256309a954e6f7cd425caa9cc978d6b.html">cobalt</a></li><li class="navelem"><a class="el" href="dir_92237bd4ff267620236e96c295a4a34d.html">arch</a></li><li class="navelem"><a class="el" href="dir_dd499e8305c2aa14b05b1bcd07ca98bf.html">arm</a></li><li class="navelem"><a class="el" href="dir_20fdc3ae6aed17de91c6b51711837196.html">include</a></li><li class="navelem"><a class="el" href="dir_9c11b5dcc2e3f07e0ed900f4e59569d0.html">asm</a></li><li class="navelem"><a class="el" href="dir_78a929ec709f8d035554d38d94e266cf.html">xenomai</a></li><li class="navelem"><b>features.h</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: Message queue services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__alchemy__queue.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Message queue services<div class="ingroups"><a class="el" href="group__alchemy.html">Alchemy API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>real-time IPC mechanism for sending messages of arbitrary size  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Message queue services:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__alchemy__queue.png" border="0" alt="" usemap="#group____alchemy____queue"/>
<map name="group____alchemy____queue" id="group____alchemy____queue">
<area shape="rect" id="node2" href="group__alchemy.html" title="A programming interface reminiscent from traditional RTOS APIs. " alt="" coords="5,5,104,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRT__QUEUE__INFO.html">RT_QUEUE_INFO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue status descriptor.  <a href="structRT__QUEUE__INFO.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6184fd1b608179ebfe57a86d45555846"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga6184fd1b608179ebfe57a86d45555846">Q_PRIO</a>&#160;&#160;&#160;0x1	/* Pend by task priority order. */</td></tr>
<tr class="memdesc:ga6184fd1b608179ebfe57a86d45555846"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creation flags.  <a href="#ga6184fd1b608179ebfe57a86d45555846">More...</a><br /></td></tr>
<tr class="separator:ga6184fd1b608179ebfe57a86d45555846"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafcca092449615e243e02050d9fe9cedb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#gafcca092449615e243e02050d9fe9cedb">rt_queue_create</a> (RT_QUEUE *queue, const char *name, size_t poolsize, size_t qlimit, int mode)</td></tr>
<tr class="memdesc:gafcca092449615e243e02050d9fe9cedb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a message queue.  <a href="#gafcca092449615e243e02050d9fe9cedb">More...</a><br /></td></tr>
<tr class="separator:gafcca092449615e243e02050d9fe9cedb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78663d153bbaa62a19d23b7916b3c0d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga78663d153bbaa62a19d23b7916b3c0d9">rt_queue_delete</a> (RT_QUEUE *queue)</td></tr>
<tr class="memdesc:ga78663d153bbaa62a19d23b7916b3c0d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a message queue.  <a href="#ga78663d153bbaa62a19d23b7916b3c0d9">More...</a><br /></td></tr>
<tr class="separator:ga78663d153bbaa62a19d23b7916b3c0d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f2d9dd0be6cb739ebfe97a7ce158302"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga1f2d9dd0be6cb739ebfe97a7ce158302">rt_queue_alloc</a> (RT_QUEUE *queue, size_t size)</td></tr>
<tr class="memdesc:ga1f2d9dd0be6cb739ebfe97a7ce158302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a message buffer.  <a href="#ga1f2d9dd0be6cb739ebfe97a7ce158302">More...</a><br /></td></tr>
<tr class="separator:ga1f2d9dd0be6cb739ebfe97a7ce158302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7dde50ae5c62445b781bd6087f5b58c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga7dde50ae5c62445b781bd6087f5b58c0">rt_queue_free</a> (RT_QUEUE *queue, void *buf)</td></tr>
<tr class="memdesc:ga7dde50ae5c62445b781bd6087f5b58c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a message buffer.  <a href="#ga7dde50ae5c62445b781bd6087f5b58c0">More...</a><br /></td></tr>
<tr class="separator:ga7dde50ae5c62445b781bd6087f5b58c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f667487f19b7611a999481a9eb56757"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga1f667487f19b7611a999481a9eb56757">rt_queue_send</a> (RT_QUEUE *queue, const void *buf, size_t size, int mode)</td></tr>
<tr class="memdesc:ga1f667487f19b7611a999481a9eb56757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to a queue.  <a href="#ga1f667487f19b7611a999481a9eb56757">More...</a><br /></td></tr>
<tr class="separator:ga1f667487f19b7611a999481a9eb56757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23257e3a6ad962b5e02a54b2e252bbca"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga23257e3a6ad962b5e02a54b2e252bbca">rt_queue_receive_timed</a> (RT_QUEUE *queue, void **bufp, const struct timespec *abs_timeout)</td></tr>
<tr class="memdesc:ga23257e3a6ad962b5e02a54b2e252bbca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message from a queue (with absolute timeout date).  <a href="#ga23257e3a6ad962b5e02a54b2e252bbca">More...</a><br /></td></tr>
<tr class="separator:ga23257e3a6ad962b5e02a54b2e252bbca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6bc941d00c44d2ed4302aec747f9e09"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#gaf6bc941d00c44d2ed4302aec747f9e09">rt_queue_receive_until</a> (RT_QUEUE *queue, void **bufp, RTIME timeout)</td></tr>
<tr class="memdesc:gaf6bc941d00c44d2ed4302aec747f9e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive from a queue (with absolute scalar timeout).  <a href="#gaf6bc941d00c44d2ed4302aec747f9e09">More...</a><br /></td></tr>
<tr class="separator:gaf6bc941d00c44d2ed4302aec747f9e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53f06e6c79aad6996e3c98103e06e464"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga53f06e6c79aad6996e3c98103e06e464">rt_queue_receive</a> (RT_QUEUE *queue, void **bufp, RTIME timeout)</td></tr>
<tr class="memdesc:ga53f06e6c79aad6996e3c98103e06e464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive from a queue (with relative scalar timeout).  <a href="#ga53f06e6c79aad6996e3c98103e06e464">More...</a><br /></td></tr>
<tr class="separator:ga53f06e6c79aad6996e3c98103e06e464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa804ad003381fa7d6c67ca3fcc5851a3"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#gaa804ad003381fa7d6c67ca3fcc5851a3">rt_queue_read_timed</a> (RT_QUEUE *queue, void *buf, size_t size, const struct timespec *abs_timeout)</td></tr>
<tr class="memdesc:gaa804ad003381fa7d6c67ca3fcc5851a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a queue.  <a href="#gaa804ad003381fa7d6c67ca3fcc5851a3">More...</a><br /></td></tr>
<tr class="separator:gaa804ad003381fa7d6c67ca3fcc5851a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d29fcc0592c5da196df9f6cb6fd84d3"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga0d29fcc0592c5da196df9f6cb6fd84d3">rt_queue_read_until</a> (RT_QUEUE *queue, void *buf, size_t size, RTIME timeout)</td></tr>
<tr class="memdesc:ga0d29fcc0592c5da196df9f6cb6fd84d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a queue (with absolute scalar timeout).  <a href="#ga0d29fcc0592c5da196df9f6cb6fd84d3">More...</a><br /></td></tr>
<tr class="separator:ga0d29fcc0592c5da196df9f6cb6fd84d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7baca65c1d6abfc51f170f7f9b5e6d31"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga7baca65c1d6abfc51f170f7f9b5e6d31">rt_queue_read</a> (RT_QUEUE *queue, void *buf, size_t size, RTIME timeout)</td></tr>
<tr class="memdesc:ga7baca65c1d6abfc51f170f7f9b5e6d31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a queue (with relative scalar timeout).  <a href="#ga7baca65c1d6abfc51f170f7f9b5e6d31">More...</a><br /></td></tr>
<tr class="separator:ga7baca65c1d6abfc51f170f7f9b5e6d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80a8f862917b9092ec5f7ebbfc435a6a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga80a8f862917b9092ec5f7ebbfc435a6a">rt_queue_flush</a> (RT_QUEUE *queue)</td></tr>
<tr class="memdesc:ga80a8f862917b9092ec5f7ebbfc435a6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush pending messages from a queue.  <a href="#ga80a8f862917b9092ec5f7ebbfc435a6a">More...</a><br /></td></tr>
<tr class="separator:ga80a8f862917b9092ec5f7ebbfc435a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga210650dcda8e22635fa8d1f167d84afb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga210650dcda8e22635fa8d1f167d84afb">rt_queue_inquire</a> (RT_QUEUE *queue, <a class="el" href="structRT__QUEUE__INFO.html">RT_QUEUE_INFO</a> *info)</td></tr>
<tr class="memdesc:ga210650dcda8e22635fa8d1f167d84afb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query queue status.  <a href="#ga210650dcda8e22635fa8d1f167d84afb">More...</a><br /></td></tr>
<tr class="separator:ga210650dcda8e22635fa8d1f167d84afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0cb4a6f6f3e87f730450b1b1c1bfa4bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga0cb4a6f6f3e87f730450b1b1c1bfa4bb">rt_queue_bind</a> (RT_QUEUE *queue, const char *name, RTIME timeout)</td></tr>
<tr class="memdesc:ga0cb4a6f6f3e87f730450b1b1c1bfa4bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bind to a message queue.  <a href="#ga0cb4a6f6f3e87f730450b1b1c1bfa4bb">More...</a><br /></td></tr>
<tr class="separator:ga0cb4a6f6f3e87f730450b1b1c1bfa4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d038345e1eb8d0633e6108af68387d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__alchemy__queue.html#ga0d038345e1eb8d0633e6108af68387d3">rt_queue_unbind</a> (RT_QUEUE *queue)</td></tr>
<tr class="memdesc:ga0d038345e1eb8d0633e6108af68387d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unbind from a message queue.  <a href="#ga0d038345e1eb8d0633e6108af68387d3">More...</a><br /></td></tr>
<tr class="separator:ga0d038345e1eb8d0633e6108af68387d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>real-time IPC mechanism for sending messages of arbitrary size </p>
<p>Message queueing is a method by which real-time tasks can exchange or pass data through a Xenomai-managed queue of messages. Messages can vary in length and be assigned different types or usages. A message queue can be created by one task and used by multiple tasks that send and/or receive messages to the queue. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga6184fd1b608179ebfe57a86d45555846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6184fd1b608179ebfe57a86d45555846">&#9670;&nbsp;</a></span>Q_PRIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Q_PRIO&#160;&#160;&#160;0x1	/* Pend by task priority order. */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creation flags. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1f2d9dd0be6cb739ebfe97a7ce158302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f2d9dd0be6cb739ebfe97a7ce158302">&#9670;&nbsp;</a></span>rt_queue_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * rt_queue_alloc </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a message buffer. </p>
<p>This service allocates a message buffer from the queue's internal pool. This buffer can be filled in with payload information, prior enqueuing it by a call to <a class="el" href="group__alchemy__queue.html#ga1f667487f19b7611a999481a9eb56757" title="Send a message to a queue. ">rt_queue_send()</a>. When used in pair, these services provide a zero-copy interface for sending messages.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">size</td><td>The requested size in bytes of the buffer. Zero is an acceptable value, which means that the message conveys no payload; in this case, the receiver will get a zero-sized message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The address of the allocated buffer upon success, or NULL if the call fails.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga0cb4a6f6f3e87f730450b1b1c1bfa4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0cb4a6f6f3e87f730450b1b1c1bfa4bb">&#9670;&nbsp;</a></span>rt_queue_bind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_bind </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bind to a message queue. </p>
<p>This routine creates a new descriptor to refer to an existing message queue identified by its symbolic name. If the object does not exist on entry, the caller may block until a queue of the given name is created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The address of a queue descriptor filled in by the operation. Contents of this memory is undefined upon failure.</td></tr>
    <tr><td class="paramname">name</td><td>A valid NULL-terminated name which identifies the queue to bind to. This string should match the object name argument passed to <a class="el" href="group__alchemy__queue.html#gafcca092449615e243e02050d9fe9cedb" title="Create a message queue. ">rt_queue_create()</a>.</td></tr>
    <tr><td class="paramname">timeout</td><td>The number of clock ticks to wait for the registration to occur (see note). Passing TM_INFINITE causes the caller to block indefinitely until the object is registered. Passing TM_NONBLOCK causes the service to return immediately without waiting if the object is not registered on entry.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task before the retrieval has completed.</li>
<li>-EWOULDBLOCK is returned if <em>timeout</em> is equal to TM_NONBLOCK and the searched object is not registered on entry.</li>
<li>-ETIMEDOUT is returned if the object cannot be retrieved within the specified amount of time.</li>
<li>-EPERM is returned if this service should block, but was not called from a Xenomai thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The <em>timeout</em> value is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

</div>
</div>
<a id="gafcca092449615e243e02050d9fe9cedb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafcca092449615e243e02050d9fe9cedb">&#9670;&nbsp;</a></span>rt_queue_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_create </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>poolsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>qlimit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a message queue. </p>
<p>Create a message queue object which allows multiple tasks to exchange data through the use of variable-sized messages. A message queue is created empty.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The address of a queue descriptor which can be later used to identify uniquely the created object, upon success of this call.</td></tr>
    <tr><td class="paramname">name</td><td>An ASCII string standing for the symbolic name of the queue. When non-NULL and non-empty, a copy of this string is used for indexing the created queue into the object registry.</td></tr>
    <tr><td class="paramname">poolsize</td><td>The size (in bytes) of the message buffer pool to be pre-allocated for holding messages. Message buffers will be claimed and released to this pool. The buffer pool memory cannot be extended. See note.</td></tr>
    <tr><td class="paramname">qlimit</td><td>This parameter allows to limit the maximum number of messages which can be queued at any point in time, sending to a full queue begets an error. The special value Q_UNLIMITED can be passed to disable the limit check.</td></tr>
    <tr><td class="paramname">mode</td><td>The queue creation mode. The following flags can be OR'ed into this bitmask, each of them affecting the new queue:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Q_FIFO makes tasks pend in FIFO order on the queue for consuming messages.</li>
<li>Q_PRIO makes tasks pend in priority order on the queue.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>mode</em> is invalid or <em>poolsize</em> is zero.</li>
<li>-ENOMEM is returned if the system fails to get memory from the main heap in order to create the queue.</li>
<li>-EEXIST is returned if the <em>name</em> is conflicting with an already registered queue.</li>
<li>-EPERM is returned if this service was called from an asynchronous context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-secondary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Queues can be shared by multiple processes which belong to the same Xenomai session.</dd>
<dd>
Each message pending into the queue consumes four long words plus the actual payload size, aligned to the next long word boundary. e.g. a 6 byte message on a 32 bit platform would require 24 bytes of storage into the pool.</dd></dl>
<p>When <em>qlimit</em> is given (i.e. different from Q_UNLIMITED), this overhead is accounted for automatically, so that <em>qlimit</em> messages of <em>poolsize</em> / <em>qlimit</em> bytes can be stored into the pool concurrently. Otherwise, <em>poolsize</em> is increased by 5% internally to cope with such overhead. </p>

</div>
</div>
<a id="ga78663d153bbaa62a19d23b7916b3c0d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78663d153bbaa62a19d23b7916b3c0d9">&#9670;&nbsp;</a></span>rt_queue_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_delete </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a message queue. </p>
<p>This routine deletes a queue object previously created by a call to <a class="el" href="group__alchemy__queue.html#gafcca092449615e243e02050d9fe9cedb" title="Create a message queue. ">rt_queue_create()</a>. All resources attached to that queue are automatically released, including all pending messages.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>q</em> is not a valid queue descriptor.</li>
<li>-EPERM is returned if this service was called from an asynchronous context.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">mode-unrestricted, switch-secondary</a> </dd></dl>

</div>
</div>
<a id="ga80a8f862917b9092ec5f7ebbfc435a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80a8f862917b9092ec5f7ebbfc435a6a">&#9670;&nbsp;</a></span>rt_queue_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_flush </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush pending messages from a queue. </p>
<p>This routine flushes all messages currently pending in a queue, releasing all message buffers appropriately.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>q</em> is not a valid queue descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga7dde50ae5c62445b781bd6087f5b58c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7dde50ae5c62445b781bd6087f5b58c0">&#9670;&nbsp;</a></span>rt_queue_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_free </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a message buffer. </p>
<p>This service releases a message buffer to the queue's internal pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">buf</td><td>The address of the message buffer to free. Even zero-sized messages carrying no payload data must be freed, since they are assigned a valid memory space to store internal information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned upon success, or -EINVAL if <em>buf</em> is not a valid message buffer previously allocated by the <a class="el" href="group__alchemy__queue.html#ga1f2d9dd0be6cb739ebfe97a7ce158302" title="Allocate a message buffer. ">rt_queue_alloc()</a> service, or the caller did not get ownership of the message through a successful return from <a class="el" href="group__alchemy__queue.html#ga53f06e6c79aad6996e3c98103e06e464" title="Receive from a queue (with relative scalar timeout). ">rt_queue_receive()</a>.</dd></dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga210650dcda8e22635fa8d1f167d84afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga210650dcda8e22635fa8d1f167d84afb">&#9670;&nbsp;</a></span>rt_queue_inquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_inquire </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRT__QUEUE__INFO.html">RT_QUEUE_INFO</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query queue status. </p>
<p>This routine returns the status information about the specified queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">info</td><td>A pointer to the <a class="el" href="structRT__QUEUE__INFO.html#RT_QUEUE_INFO">return</a>buffer" to copy the information to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned and status information is written to the structure pointed at by <em>info</em> upon success. Otherwise:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>q</em> is not a valid queue descriptor.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga7baca65c1d6abfc51f170f7f9b5e6d31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7baca65c1d6abfc51f170f7f9b5e6d31">&#9670;&nbsp;</a></span>rt_queue_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_queue_read </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read from a queue (with relative scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__queue.html#gaa804ad003381fa7d6c67ca3fcc5851a3" title="Read from a queue. ">rt_queue_read_timed()</a> accepting a relative timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">buf</td><td>A pointer to a memory area which will be written upon success with the received message payload.</td></tr>
    <tr><td class="paramname">size</td><td>The length in bytes of the memory area pointed to by <em>buf</em>.</td></tr>
    <tr><td class="paramname">timeout</td><td>A delay expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__queue.html#gaa804ad003381fa7d6c67ca3fcc5851a3">rt_queue_read_timed()</a>.</p>

</div>
</div>
<a id="gaa804ad003381fa7d6c67ca3fcc5851a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa804ad003381fa7d6c67ca3fcc5851a3">&#9670;&nbsp;</a></span>rt_queue_read_timed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_queue_read_timed </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from a queue. </p>
<p>This service reads the next available message from a given queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">buf</td><td>A pointer to a memory area which will be written upon success with the received message payload. The internal message buffer conveying the data is automatically freed by this call. If &ndash;enable-pshared is enabled in the configuration, <em>buf</em> must have been obtained from the Xenomai memory allocator via xnmalloc() or any service based on it, such as <a class="el" href="group__alchemy__heap.html#ga52678149ff2b66e47aa8cdcddab653a4" title="Allocate a block from a heap (with relative scalar timeout). ">rt_heap_alloc()</a>.</td></tr>
    <tr><td class="paramname">size</td><td>The length in bytes of the memory area pointed to by <em>buf</em>. Messages larger than <em>size</em> are truncated appropriately.</td></tr>
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks, specifying a time limit to wait for a message to be available from the queue (see note). Passing NULL causes the caller to block indefinitely until a message is available. Passing { .tv_sec = 0, .tv_nsec = 0 } causes the service to return immediately without blocking in case no message is available.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes copied to <em>buf</em> is returned upon success. Zero is a possible value corresponding to a zero-sized message passed to <a class="el" href="group__alchemy__queue.html#ga1f667487f19b7611a999481a9eb56757" title="Send a message to a queue. ">rt_queue_send()</a> or rt_queue_write(). Otherwise:</dd></dl>
<ul>
<li>-ETIMEDOUT is returned if <em>abs_timeout</em> is reached before a message arrives.</li>
<li>-EWOULDBLOCK is returned if <em>abs_timeout</em> is { .tv_sec = 0, .tv_nsec = 0 } and no message is immediately available on entry to the call.</li>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task before a message was available.</li>
<li>-EINVAL is returned if <em>q</em> is not a valid queue descriptor.</li>
<li>-EIDRM is returned if <em>q</em> is deleted while the caller was waiting for a message. In such event, <em>q</em> is no more valid upon return of this service.</li>
<li>-EPERM is returned if this service should block, but was not called from a Xenomai thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd><em>abs_timeout</em> is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__alchemy__queue.html#ga7baca65c1d6abfc51f170f7f9b5e6d31">rt_queue_read()</a>, and <a class="el" href="group__alchemy__queue.html#ga0d29fcc0592c5da196df9f6cb6fd84d3">rt_queue_read_until()</a>.</p>

</div>
</div>
<a id="ga0d29fcc0592c5da196df9f6cb6fd84d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d29fcc0592c5da196df9f6cb6fd84d3">&#9670;&nbsp;</a></span>rt_queue_read_until()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_queue_read_until </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read from a queue (with absolute scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__queue.html#gaa804ad003381fa7d6c67ca3fcc5851a3" title="Read from a queue. ">rt_queue_read_timed()</a> accepting an absolute timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">buf</td><td>A pointer to a memory area which will be written upon success with the received message payload.</td></tr>
    <tr><td class="paramname">size</td><td>The length in bytes of the memory area pointed to by <em>buf</em>.</td></tr>
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__queue.html#gaa804ad003381fa7d6c67ca3fcc5851a3">rt_queue_read_timed()</a>.</p>

</div>
</div>
<a id="ga53f06e6c79aad6996e3c98103e06e464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53f06e6c79aad6996e3c98103e06e464">&#9670;&nbsp;</a></span>rt_queue_receive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_queue_receive </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive from a queue (with relative scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__queue.html#ga23257e3a6ad962b5e02a54b2e252bbca" title="Receive a message from a queue (with absolute timeout date). ">rt_queue_receive_timed()</a> accepting a relative timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">bufp</td><td>A pointer to a memory location which will be written with the address of the received message.</td></tr>
    <tr><td class="paramname">timeout</td><td>A delay expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__queue.html#ga23257e3a6ad962b5e02a54b2e252bbca">rt_queue_receive_timed()</a>.</p>

</div>
</div>
<a id="ga23257e3a6ad962b5e02a54b2e252bbca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23257e3a6ad962b5e02a54b2e252bbca">&#9670;&nbsp;</a></span>rt_queue_receive_timed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_queue_receive_timed </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive a message from a queue (with absolute timeout date). </p>
<p>This service receives the next available message from a given queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">bufp</td><td>A pointer to a memory location which will be written with the address of the received message, upon success. Once consumed, the message space should be freed using <a class="el" href="group__alchemy__queue.html#ga7dde50ae5c62445b781bd6087f5b58c0" title="Free a message buffer. ">rt_queue_free()</a>.</td></tr>
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks, specifying a time limit to wait for a message to be available from the queue (see note). Passing NULL causes the caller to block indefinitely until a message is available. Passing { .tv_sec = 0, .tv_nsec = 0 } causes the service to return immediately without blocking in case no message is available.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes available from the received message is returned upon success. Zero is a possible value corresponding to a zero-sized message passed to <a class="el" href="group__alchemy__queue.html#ga1f667487f19b7611a999481a9eb56757" title="Send a message to a queue. ">rt_queue_send()</a> or rt_queue_write(). Otherwise:</dd></dl>
<ul>
<li>-ETIMEDOUT is returned if <em>abs_timeout</em> is reached before a message arrives.</li>
<li>-EWOULDBLOCK is returned if <em>abs_timeout</em> is { .tv_sec = 0, .tv_nsec = 0 } and no message is immediately available on entry to the call.</li>
<li>-EINTR is returned if <a class="el" href="group__alchemy__task.html#ga770281eeca009c0a08a7c4a9fd849ac1" title="Unblock a real-time task. ">rt_task_unblock()</a> was called for the current task before a message was available.</li>
<li>-EINVAL is returned if <em>q</em> is not a valid queue descriptor.</li>
<li>-EIDRM is returned if <em>q</em> is deleted while the caller was waiting for a message. In such event, <em>q</em> is no more valid upon return of this service.</li>
<li>-EPERM is returned if this service should block, but was not called from a Xenomai thread.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd><em>abs_timeout</em> is interpreted as a multiple of the Alchemy clock resolution (see &ndash;alchemy-clock-resolution option, defaults to 1 nanosecond). </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__alchemy__queue.html#ga53f06e6c79aad6996e3c98103e06e464">rt_queue_receive()</a>, and <a class="el" href="group__alchemy__queue.html#gaf6bc941d00c44d2ed4302aec747f9e09">rt_queue_receive_until()</a>.</p>

</div>
</div>
<a id="gaf6bc941d00c44d2ed4302aec747f9e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6bc941d00c44d2ed4302aec747f9e09">&#9670;&nbsp;</a></span>rt_queue_receive_until()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rt_queue_receive_until </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RTIME&#160;</td>
          <td class="paramname"><em>abs_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive from a queue (with absolute scalar timeout). </p>
<p>This routine is a variant of <a class="el" href="group__alchemy__queue.html#ga23257e3a6ad962b5e02a54b2e252bbca" title="Receive a message from a queue (with absolute timeout date). ">rt_queue_receive_timed()</a> accepting an absolute timeout specification expressed as a scalar value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">bufp</td><td>A pointer to a memory location which will be written with the address of the received message.</td></tr>
    <tr><td class="paramname">abs_timeout</td><td>An absolute date expressed in clock ticks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">xthread-nowait, switch-primary</a> </dd></dl>

<p class="reference">References <a class="el" href="group__alchemy__queue.html#ga23257e3a6ad962b5e02a54b2e252bbca">rt_queue_receive_timed()</a>.</p>

</div>
</div>
<a id="ga1f667487f19b7611a999481a9eb56757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f667487f19b7611a999481a9eb56757">&#9670;&nbsp;</a></span>rt_queue_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_send </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to a queue. </p>
<p>This service sends a complete message to a given queue. The message must have been allocated by a previous call to <a class="el" href="group__alchemy__queue.html#ga1f2d9dd0be6cb739ebfe97a7ce158302" title="Allocate a message buffer. ">rt_queue_alloc()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
    <tr><td class="paramname">buf</td><td>The address of the message buffer to be sent. The message buffer must have been allocated using the <a class="el" href="group__alchemy__queue.html#ga1f2d9dd0be6cb739ebfe97a7ce158302" title="Allocate a message buffer. ">rt_queue_alloc()</a> service. Once passed to <a class="el" href="group__alchemy__queue.html#ga1f667487f19b7611a999481a9eb56757" title="Send a message to a queue. ">rt_queue_send()</a>, the memory pointed to by <em>buf</em> is no more under the control of the sender and thus should not be referenced by it anymore; deallocation of this memory must be handled on the receiving side.</td></tr>
    <tr><td class="paramname">size</td><td>The actual size in bytes of the message, which may be lower than the allocated size for the buffer obtained from <a class="el" href="group__alchemy__queue.html#ga1f2d9dd0be6cb739ebfe97a7ce158302" title="Allocate a message buffer. ">rt_queue_alloc()</a>. Zero is a valid value, in which case an empty message will be sent.</td></tr>
    <tr><td class="paramname">mode</td><td>A set of flags affecting the operation:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Q_URGENT causes the message to be prepended to the message queue, ensuring a LIFO ordering.</li>
<li>Q_NORMAL causes the message to be appended to the message queue, ensuring a FIFO ordering.</li>
<li>Q_BROADCAST causes the message to be sent to all tasks currently waiting for messages. The message is not copied; a reference count is maintained instead so that the message will remain valid until the last receiver releases its own reference using <a class="el" href="group__alchemy__queue.html#ga7dde50ae5c62445b781bd6087f5b58c0" title="Free a message buffer. ">rt_queue_free()</a>, after which the message space will be returned to the queue's internal pool.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Upon success, this service returns the number of receivers which got awaken as a result of the operation. If zero is returned, no task was waiting on the receiving side of the queue, and the message has been enqueued. Upon error, one of the following error codes is returned:</dd></dl>
<ul>
<li>-EINVAL is returned if <em>q</em> is not a message queue descriptor, <em>mode</em> is invalid, or <em>buf</em> is NULL.</li>
<li>-ENOMEM is returned if queuing the message would exceed the limit defined for the queue at creation.</li>
</ul>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">unrestricted, switch-primary</a> </dd></dl>

</div>
</div>
<a id="ga0d038345e1eb8d0633e6108af68387d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d038345e1eb8d0633e6108af68387d3">&#9670;&nbsp;</a></span>rt_queue_unbind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rt_queue_unbind </td>
          <td>(</td>
          <td class="paramtype">RT_QUEUE *&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unbind from a message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The queue descriptor.</td></tr>
  </table>
  </dd>
</dl>
<p>This routine releases a previous binding to a message queue. After this call has returned, the descriptor is no more valid for referencing this object.</p>
<dl class="section user"><dt>Tags</dt><dd><a class="el" href="api-tags.html">thread-unrestricted</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: kernel/drivers/gpio Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dir_a1c4286f83fc0e6c89d06a9bd1df46d0.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">gpio Directory Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Directory dependency graph for gpio:</div>
<div class="dyncontent">
<div class="center"><img src="dir_a1c4286f83fc0e6c89d06a9bd1df46d0_dep.png" border="0" usemap="#dir__a1c4286f83fc0e6c89d06a9bd1df46d0__dep" alt="kernel/drivers/gpio"/></div>
<map name="dir__a1c4286f83fc0e6c89d06a9bd1df46d0__dep" id="dir__a1c4286f83fc0e6c89d06a9bd1df46d0__dep">
<area shape="rect" id="node1" href="dir_a1c4286f83fc0e6c89d06a9bd1df46d0.html" title="gpio" alt="" coords="27,52,99,100"/>
<area shape="rect" id="node2" href="dir_d44c64559bbebec7f509842c48db8b23.html" title="include" alt="" coords="27,148,99,196"/>
<area shape="rect" id="edge1-headlabel" href="dir_000094_000000.html" title="1" alt="" coords="67,122,75,137"/>
<area shape="rect" id="clust1" href="dir_0de1d64efa6df97eacc8f5b0f9da3e59.html" title="drivers" alt="" coords="16,16,109,111"/>
</map>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_0de1d64efa6df97eacc8f5b0f9da3e59.html">drivers</a></li><li class="navelem"><a class="el" href="dir_a1c4286f83fc0e6c89d06a9bd1df46d0.html">gpio</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             /**
 * @file
 * This file is part of the Xenomai project.
 *
 * @author Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_UAPI_UDD_H
#define _RTDM_UAPI_UDD_H

/**
 * @addtogroup rtdm_udd
 *
 * @{
 */

/**
 * @anchor udd_signotify
 * @brief UDD event notification descriptor
 *
 * This structure shall be used to pass the information required to
 * enable/disable the notification by signal upon interrupt receipt.
 *
 * If PID is zero or negative, the notification is disabled.
 * Otherwise, the Cobalt thread whose PID is given will receive the
 * Cobalt signal also mentioned, along with the count of interrupts at
 * the time of the receipt stored in siginfo.si_int. A Cobalt thread
 * must explicitly wait for notifications using the sigwaitinfo() or
 * sigtimedwait() services (no asynchronous mode available).
 */
struct udd_signotify {
	/**
	 * PID of the Cobalt thread to notify upon interrupt
	 * receipt. If @a pid is zero or negative, the notification is
	 * disabled.
	 */
	pid_t pid;
	/**
	 * Signal number to send to PID for notifying, which must be
	 * in the range [SIGRTMIN .. SIGRTMAX] inclusive. This value
	 * is not considered if @a pid is zero or negative.
	 */
	int sig;
};

/**
 * @anchor udd_ioctl_codes @name UDD_IOCTL
 * IOCTL requests
 *
 * @{
 */

/**
 * Enable the interrupt line. The UDD-class mini-driver should handle
 * this request when received through its ->ioctl() handler if
 * provided. Otherwise, the UDD core enables the interrupt line in the
 * interrupt controller before returning to the caller.
 */
#define UDD_RTIOC_IRQEN		_IO(RTDM_CLASS_UDD, 0)
/**
 * Disable the interrupt line. The UDD-class mini-driver should handle
 * this request when received through its ->ioctl() handler if
 * provided. Otherwise, the UDD core disables the interrupt line in
 * the interrupt controller before returning to the caller.
 *
 * @note The mini-driver must handle the UDD_RTIOC_IRQEN request for a
 * custom IRQ from its ->ioctl() handler, otherwise such request
 * receives -EIO from the UDD core.
 */
#define UDD_RTIOC_IRQDIS	_IO(RTDM_CLASS_UDD, 1)
/**
 * Enable/Disable signal notification upon interrupt event. A valid
 * @ref udd_signotify "notification descriptor" must be passed along
 * with this request, which is handled by the UDD core directly.
 *
 * @note The mini-driver must handle the UDD_RTIOC_IRQDIS request for
 * a custom IRQ from its ->ioctl() handler, otherwise such request
 * receives -EIO from the UDD core.
 */
#define UDD_RTIOC_IRQSIG	_IOW(RTDM_CLASS_UDD, 2, struct udd_signotify)

/** @} */
/** @} */

#endif /* !_RTDM_UAPI_UDD_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /**
 * @note Copyright (C) 2016 Philippe Gerum <rpm@xenomai.org>
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 */
#ifndef _RTDM_UAPI_SPI_H
#define _RTDM_UAPI_SPI_H

#include <linux/types.h>

struct rtdm_spi_config {
	__u32 speed_hz;
	__u16 mode;
	__u8 bits_per_word;
};

struct rtdm_spi_iobufs {
	__u32 io_len;
	__u32 i_offset;
	__u32 o_offset;
	__u32 map_len;
};

#define SPI_RTIOC_SET_CONFIG		_IOW(RTDM_CLASS_SPI, 0, struct rtdm_spi_config)
#define SPI_RTIOC_GET_CONFIG		_IOR(RTDM_CLASS_SPI, 1, struct rtdm_spi_config)
#define SPI_RTIOC_SET_IOBUFS		_IOR(RTDM_CLASS_SPI, 2, struct rtdm_spi_iobufs)
#define SPI_RTIOC_TRANSFER		_IO(RTDM_CLASS_SPI, 3)

#endif /* !_RTDM_UAPI_SPI_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /**
 * @file
 * Real-Time Driver Model for Xenomai, testing device profile header
 *
 * @note Copyright (C) 2005 Jan Kiszka <jan.kiszka@web.de>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * @ingroup rttesting
 */
#ifndef _RTDM_UAPI_TESTING_H
#define _RTDM_UAPI_TESTING_H

#include <linux/types.h>

#define RTTST_PROFILE_VER		2

typedef struct rttst_bench_res {
	__s32 avg;
	__s32 min;
	__s32 max;
	__s32 overruns;
	__s32 test_loops;
} rttst_bench_res_t;

typedef struct rttst_interm_bench_res {
	struct rttst_bench_res last;
	struct rttst_bench_res overall;
} rttst_interm_bench_res_t;

typedef struct rttst_overall_bench_res {
	struct rttst_bench_res result;
	__s32 *histogram_avg;
	__s32 *histogram_min;
	__s32 *histogram_max;
} rttst_overall_bench_res_t;

#define RTTST_TMBENCH_INVALID		-1 /* internal use only */
#define RTTST_TMBENCH_TASK		0
#define RTTST_TMBENCH_HANDLER		1

typedef struct rttst_tmbench_config {
	int mode;
	int priority;
	__u64 period;
	int warmup_loops;
	int histogram_size;
	int histogram_bucketsize;
	int freeze_max;
} rttst_tmbench_config_t;

struct rttst_swtest_task {
	unsigned int index;
	unsigned int flags;
};

/* Possible values for struct rttst_swtest_task::flags. */
#define RTTST_SWTEST_FPU		0x1
#define RTTST_SWTEST_USE_FPU		0x2 /* Only for kernel-space tasks. */
#define RTTST_SWTEST_FREEZE		0x4 /* Only for kernel-space tasks. */

struct rttst_swtest_dir {
	unsigned int from;
	unsigned int to;
};

struct rttst_swtest_error {
	struct rttst_swtest_dir last_switch;
	unsigned int fp_val;
};

#define RTTST_RTDM_NORMAL_CLOSE		0
#define RTTST_RTDM_DEFER_CLOSE_CONTEXT	1

#define RTTST_RTDM_MAGIC_PRIMARY	0xfefbfefb
#define RTTST_RTDM_MAGIC_SECONDARY	0xa5b9a5b9

#define RTIOC_TYPE_TESTING		RTDM_CLASS_TESTING

/*!
 * @name Sub-Classes of RTDM_CLASS_TESTING
 * @{ */
/** subclass name: "timerbench" */
#define RTDM_SUBCLASS_TIMERBENCH	0
/** subclass name: "irqbench" */
#define RTDM_SUBCLASS_IRQBENCH		1
/** subclass name: "switchtest" */
#define RTDM_SUBCLASS_SWITCHTEST	2
/** subclase name: "rtdm" */
#define RTDM_SUBCLASS_RTDMTEST		3
/** @} */

/*!
 * @anchor TSTIOCTLs @name IOCTLs
 * Testing device IOCTLs
 * @{ */
#define RTTST_RTIOC_INTERM_BENCH_RES \
	_IOWR(RTIOC_TYPE_TESTING, 0x00, struct rttst_interm_bench_res)

#define RTTST_RTIOC_TMBENCH_START \
	_IOW(RTIOC_TYPE_TESTING, 0x10, struct rttst_tmbench_config)

#define RTTST_RTIOC_TMBENCH_STOP \
	_IOWR(RTIOC_TYPE_TESTING, 0x11, struct rttst_overall_bench_res)

#define RTTST_RTIOC_SWTEST_SET_TASKS_COUNT \
	_IOW(RTIOC_TYPE_TESTING, 0x30, __u32)

#define RTTST_RTIOC_SWTEST_SET_CPU \
	_IOW(RTIOC_TYPE_TESTING, 0x31, __u32)

#define RTTST_RTIOC_SWTEST_REGISTER_UTASK \
	_IOW(RTIOC_TYPE_TESTING, 0x32, struct rttst_swtest_task)

#define RTTST_RTIOC_SWTEST_CREATE_KTASK \
	_IOWR(RTIOC_TYPE_TESTING, 0x33, struct rttst_swtest_task)

#define RTTST_RTIOC_SWTEST_PEND \
	_IOR(RTIOC_TYPE_TESTING, 0x34, struct rttst_swtest_task)

#define RTTST_RTIOC_SWTEST_SWITCH_TO \
	_IOR(RTIOC_TYPE_TESTING, 0x35, struct rttst_swtest_dir)

#define RTTST_RTIOC_SWTEST_GET_SWITCHES_COUNT \
	_IOR(RTIOC_TYPE_TESTING, 0x36, __u32)

#define RTTST_RTIOC_SWTEST_GET_LAST_ERROR \
	_IOR(RTIOC_TYPE_TESTING, 0x37, struct rttst_swtest_error)

#define RTTST_RTIOC_SWTEST_SET_PAUSE \
	_IOW(RTIOC_TYPE_TESTING, 0x38, __u32)

#define RTTST_RTIOC_RTDM_DEFER_CLOSE \
	_IOW(RTIOC_TYPE_TESTING, 0x40, __u32)

#define RTTST_RTIOC_RTDM_ACTOR_GET_CPU \
	_IOR(RTIOC_TYPE_TESTING, 0x41, __u32)
  
#define RTTST_RTIOC_RTDM_PING_PRIMARY \
	_IOR(RTIOC_TYPE_TESTING, 0x42, __u32)
  
#define RTTST_RTIOC_RTDM_PING_SECONDARY \
	_IOR(RTIOC_TYPE_TESTING, 0x43, __u32)
  
/** @} */

#endif /* !_RTDM_UAPI_TESTING_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         /**
 * @file
 * Analogy for Linux, UAPI bits
 * @note Copyright (C) 1997-2000 David A. Schleef <ds@schleef.org>
 * @note Copyright (C) 2008 Alexis Berlemont <alexis.berlemont@free.fr>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_UAPI_ANALOGY_H
#define _RTDM_UAPI_ANALOGY_H

/* --- Misc precompilation constant --- */
#define A4L_NAMELEN 20

#define A4L_INFINITE 0
#define A4L_NONBLOCK (-1)

/* --- Common Analogy types --- */

typedef unsigned short sampl_t;
typedef unsigned long lsampl_t;

/* MMAP ioctl argument structure */
struct a4l_mmap_arg {
	unsigned int idx_subd;
	unsigned long size;
	void *ptr;
};
typedef struct a4l_mmap_arg a4l_mmap_t;

/* Constants related with buffer size
   (might be used with BUFCFG ioctl) */
#define A4L_BUF_MAXSIZE 0x1000000
#define A4L_BUF_DEFSIZE 0x10000
#define A4L_BUF_DEFMAGIC 0xffaaff55

/* BUFCFG ioctl argument structure */
struct a4l_buffer_config {
	/* NOTE: with the last buffer implementation, the field
	   idx_subd became useless; the buffer are now
	   per-context. So, the buffer size configuration is specific
	   to an opened device. There is a little exception: we can
	   define a default buffer size for a device.
	   So far, a hack is used to implement the configuration of
	   the default buffer size */
	unsigned int idx_subd;
	unsigned long buf_size;
};
typedef struct a4l_buffer_config a4l_bufcfg_t;

/* BUFINFO ioctl argument structure */
struct a4l_buffer_info {
	unsigned int idx_subd;
	unsigned long buf_size;
	unsigned long rw_count;
};
typedef struct a4l_buffer_info a4l_bufinfo_t;

/* BUFCFG2 / BUFINFO2 ioctl argument structure */
struct a4l_buffer_config2 {
	unsigned long wake_count;
	unsigned long reserved[3];
};
typedef struct a4l_buffer_config2 a4l_bufcfg2_t;

/* POLL ioctl argument structure */
struct a4l_poll {
	unsigned int idx_subd;
	unsigned long arg;
};
typedef struct a4l_poll a4l_poll_t;

/* DEVCFG ioctl argument structure */
struct a4l_link_desc {
	unsigned char bname_size;
	char *bname;
	unsigned int opts_size;
	void *opts;
};
typedef struct a4l_link_desc a4l_lnkdesc_t;

/* DEVINFO ioctl argument structure */
struct a4l_dev_info {
	char board_name[A4L_NAMELEN];
	char driver_name[A4L_NAMELEN];
	int nb_subd;
	int idx_read_subd;
	int idx_write_subd;
};
typedef struct a4l_dev_info a4l_dvinfo_t;

#define CIO 'd'
#define A4L_DEVCFG _IOW(CIO,0,a4l_lnkdesc_t)
#define A4L_DEVINFO _IOR(CIO,1,a4l_dvinfo_t)
#define A4L_SUBDINFO _IOR(CIO,2,a4l_sbinfo_t)
#define A4L_CHANINFO _IOR(CIO,3,a4l_chinfo_arg_t)
#define A4L_RNGINFO _IOR(CIO,4,a4l_rnginfo_arg_t)
#define A4L_CMD _IOWR(CIO,5,a4l_cmd_t)
#define A4L_CANCEL _IOR(CIO,6,unsigned int)
#define A4L_INSNLIST _IOR(CIO,7,unsigned int)
#define A4L_INSN _IOR(CIO,8,unsigned int)
#define A4L_BUFCFG _IOR(CIO,9,a4l_bufcfg_t)
#define A4L_BUFINFO _IOWR(CIO,10,a4l_bufinfo_t)
#define A4L_POLL _IOR(CIO,11,unsigned int)
#define A4L_MMAP _IOWR(CIO,12,unsigned int)
#define A4L_NBCHANINFO _IOR(CIO,13,a4l_chinfo_arg_t)
#define A4L_NBRNGINFO _IOR(CIO,14,a4l_rnginfo_arg_t)

/* These IOCTLs are bound to be merged with A4L_BUFCFG and A4L_BUFINFO
   at the next major release */
#define A4L_BUFCFG2 _IOR(CIO,15,a4l_bufcfg_t)
#define A4L_BUFINFO2 _IOWR(CIO,16,a4l_bufcfg_t)

/*!
 * @addtogroup analogy_lib_async1
 * @{
 */

/*!
 * @anchor ANALOGY_CMD_xxx @name ANALOGY_CMD_xxx
 * @brief Common command flags definitions
 * @{
 */

/**
 * Do not execute the command, just check it
 */
#define A4L_CMD_SIMUL 0x1
/**
 * Perform data recovery / transmission in bulk mode
 */
#define A4L_CMD_BULK 0x2
/**
 * Perform a command which will write data to the device
 */
#define A4L_CMD_WRITE 0x4

	  /*! @} ANALOGY_CMD_xxx */

/*!
 * @anchor TRIG_xxx @name TRIG_xxx
 * @brief Command triggers flags definitions
 * @{
 */

/**
 * Never trigger
 */
#define TRIG_NONE	0x00000001
/**
 * Trigger now + N ns
 */
#define TRIG_NOW	0x00000002
/**
 * Trigger on next lower level trig
 */
#define TRIG_FOLLOW	0x00000004
/**
 * Trigger at time N ns
 */
#define TRIG_TIME	0x00000008
/**
 * Trigger at rate N ns
 */
#define TRIG_TIMER	0x00000010
/**
 * Trigger when count reaches N
 */
#define TRIG_COUNT	0x00000020
/**
 * Trigger on external signal N
 */
#define TRIG_EXT	0x00000040
/**
 * Trigger on analogy-internal signal N
 */
#define TRIG_INT	0x00000080
/**
 * Driver defined trigger
 */
#define TRIG_OTHER	0x00000100
/**
 * Wake up on end-of-scan
 */
#define TRIG_WAKE_EOS	0x0020
/**
 * Trigger not implemented yet
 */
#define TRIG_ROUND_MASK 0x00030000
/**
 * Trigger not implemented yet
 */
#define TRIG_ROUND_NEAREST 0x00000000
/**
 * Trigger not implemented yet
 */
#define TRIG_ROUND_DOWN 0x00010000
/**
 * Trigger not implemented yet
 */
#define TRIG_ROUND_UP 0x00020000
/**
 * Trigger not implemented yet
 */
#define TRIG_ROUND_UP_NEXT 0x00030000

	  /*! @} TRIG_xxx */

/*!
 * @anchor CHAN_RNG_AREF @name Channel macros
 * @brief Specific precompilation macros and constants useful for the
 * channels descriptors tab located in the command structure
 * @{
 */

/**
 * Channel indication macro
 */
#define CHAN(a) ((a) & 0xffff)
/**
 * Range definition macro
 */
#define RNG(a) (((a) & 0xff) << 16)
/**
 * Reference definition macro
 */
#define AREF(a) (((a) & 0x03) << 24)
/**
 * Flags definition macro
 */
#define FLAGS(a) ((a) & CR_FLAGS_MASK)
/**
 * Channel + range + reference definition macro
 */
#define PACK(a, b, c) (a | RNG(b) | AREF(c))
/**
 * Channel + range + reference + flags definition macro
 */
#define PACK_FLAGS(a, b, c, d) (PACK(a, b, c) | FLAGS(d))

/**
 * Analog reference is analog ground
 */
#define AREF_GROUND 0x00
/**
 * Analog reference is analog common
 */
#define AREF_COMMON 0x01
/**
 * Analog reference is differential
 */
#define AREF_DIFF 0x02
/**
 * Analog reference is undefined
 */
#define AREF_OTHER 0x03

	  /*! @} CHAN_RNG_AREF */

#if !defined(DOXYGEN_CPP)

#define CR_FLAGS_MASK 0xfc000000
#define CR_ALT_FILTER (1<<26)
#define CR_DITHER CR_ALT_FILTER
#define CR_DEGLITCH CR_ALT_FILTER
#define CR_ALT_SOURCE (1<<27)
#define CR_EDGE	(1<<30)
#define CR_INVERT (1<<31)

#endif /* !DOXYGEN_CPP */

/*!
 * @brief Structure describing the asynchronous instruction
 * @see a4l_snd_command()
 */

struct a4l_cmd_desc {
	unsigned char idx_subd;
			       /**< Subdevice to which the command will be applied. */

	unsigned long flags;
			       /**< Command flags */

	/* Command trigger characteristics */
	unsigned int start_src;
			       /**< Start trigger type */
	unsigned int start_arg;
			       /**< Start trigger argument */
	unsigned int scan_begin_src;
			       /**< Scan begin trigger type */
	unsigned int scan_begin_arg;
			       /**< Scan begin trigger argument */
	unsigned int convert_src;
			       /**< Convert trigger type */
	unsigned int convert_arg;
			       /**< Convert trigger argument */
	unsigned int scan_end_src;
			       /**< Scan end trigger type */
	unsigned int scan_end_arg;
			       /**< Scan end trigger argument */
	unsigned int stop_src;
			       /**< Stop trigger type */
	unsigned int stop_arg;
			   /**< Stop trigger argument */

	unsigned char nb_chan;
			   /**< Count of channels related with the command */
	unsigned int *chan_descs;
			    /**< Tab containing channels descriptors */

	/* Driver specific fields */
	unsigned int valid_simul_stages;
			   /** < cmd simulation valid stages (driver dependent) */

	unsigned int data_len;
			   /**< Driver specific buffer size */
	sampl_t *data;
	                   /**< Driver specific buffer pointer */
};
typedef struct a4l_cmd_desc a4l_cmd_t;

/*! @} analogy_lib_async1 */

/* --- Range section --- */

/** Constant for internal use only (must not be used by driver
    developer).  */
#define A4L_RNG_FACTOR 1000000

/**
 * Volt unit range flag
 */
#define A4L_RNG_VOLT_UNIT 0x0
/**
 * MilliAmpere unit range flag
 */
#define A4L_RNG_MAMP_UNIT 0x1
/**
 * No unit range flag
 */
#define A4L_RNG_NO_UNIT 0x2
/**
 * External unit range flag
 */
#define A4L_RNG_EXT_UNIT 0x4

/**
 * Macro to retrieve the range unit from the range flags
 */
#define A4L_RNG_UNIT(x) (x & (A4L_RNG_VOLT_UNIT |	\
			      A4L_RNG_MAMP_UNIT |	\
			      A4L_RNG_NO_UNIT |		\
			      A4L_RNG_EXT_UNIT))

/* --- Subdevice flags desc stuff --- */

/* TODO: replace ANALOGY_SUBD_AI with ANALOGY_SUBD_ANALOG
   and ANALOGY_SUBD_INPUT */

/* Subdevice types masks */
#define A4L_SUBD_MASK_READ 0x80000000
#define A4L_SUBD_MASK_WRITE 0x40000000
#define A4L_SUBD_MASK_SPECIAL 0x20000000

/*!
 * @addtogroup analogy_subdevice
 * @{
 */

/*!
 * @anchor ANALOGY_SUBD_xxx @name Subdevices types
 * @brief Flags to define the subdevice type
 * @{
 */

/**
 * Unused subdevice
 */
#define A4L_SUBD_UNUSED (A4L_SUBD_MASK_SPECIAL|0x1)
/**
 * Analog input subdevice
 */
#define A4L_SUBD_AI (A4L_SUBD_MASK_READ|0x2)
/**
 * Analog output subdevice
 */
#define A4L_SUBD_AO (A4L_SUBD_MASK_WRITE|0x4)
/**
 * Digital input subdevice
 */
#define A4L_SUBD_DI (A4L_SUBD_MASK_READ|0x8)
/**
 * Digital output subdevice
 */
#define A4L_SUBD_DO (A4L_SUBD_MASK_WRITE|0x10)
/**
 * Digital input/output subdevice
 */
#define A4L_SUBD_DIO (A4L_SUBD_MASK_SPECIAL|0x20)
/**
 * Counter subdevice
 */
#define A4L_SUBD_COUNTER (A4L_SUBD_MASK_SPECIAL|0x40)
/**
 * Timer subdevice
 */
#define A4L_SUBD_TIMER (A4L_SUBD_MASK_SPECIAL|0x80)
/**
 * Memory, EEPROM, DPRAM
 */
#define A4L_SUBD_MEMORY (A4L_SUBD_MASK_SPECIAL|0x100)
/**
 * Calibration subdevice  DACs
 */
#define A4L_SUBD_CALIB (A4L_SUBD_MASK_SPECIAL|0x200)
/**
 * Processor, DSP
 */
#define A4L_SUBD_PROC (A4L_SUBD_MASK_SPECIAL|0x400)
/**
 * Serial IO subdevice
 */
#define A4L_SUBD_SERIAL (A4L_SUBD_MASK_SPECIAL|0x800)
/**
 * Mask which gathers all the types
 */
#define A4L_SUBD_TYPES (A4L_SUBD_UNUSED |	 \
			   A4L_SUBD_AI |	 \
			   A4L_SUBD_AO |	 \
			   A4L_SUBD_DI |	 \
			   A4L_SUBD_DO |	 \
			   A4L_SUBD_DIO |	 \
			   A4L_SUBD_COUNTER | \
			   A4L_SUBD_TIMER |	 \
			   A4L_SUBD_MEMORY |	 \
			   A4L_SUBD_CALIB |	 \
			   A4L_SUBD_PROC |	 \
			   A4L_SUBD_SERIAL)

/*! @} ANALOGY_SUBD_xxx */

/*!
 * @anchor ANALOGY_SUBD_FT_xxx @name Subdevice features
 * @brief Flags to define the subdevice's capabilities
 * @{
 */

/* Subdevice capabilities */
/**
 * The subdevice can handle command (i.e it can perform asynchronous
 * acquisition)
 */
#define A4L_SUBD_CMD 0x1000
/**
 * The subdevice support mmap operations (technically, any driver can
 * do it; however, the developer might want that his driver must be
 * accessed through read / write
 */
#define A4L_SUBD_MMAP 0x8000

/*! @} ANALOGY_SUBD_FT_xxx */

/*!
 * @anchor ANALOGY_SUBD_ST_xxx @name Subdevice status
 * @brief Flags to define the subdevice's status
 * @{
 */

/* Subdevice status flag(s) */
/**
 * The subdevice is busy, a synchronous or an asynchronous acquisition
 * is occuring
 */
#define A4L_SUBD_BUSY_NR 0
#define A4L_SUBD_BUSY (1 << A4L_SUBD_BUSY_NR)

/**
 * The subdevice is about to be cleaned in the middle of the detach
 * procedure
 */
#define A4L_SUBD_CLEAN_NR 1
#define A4L_SUBD_CLEAN (1 << A4L_SUBD_CLEAN_NR)


/*! @} ANALOGY_SUBD_ST_xxx */

/* --- Subdevice related IOCTL arguments structures --- */

/* SUDBINFO IOCTL argument */
struct a4l_subd_info {
	unsigned long flags;
	unsigned long status;
	unsigned char nb_chan;
};
typedef struct a4l_subd_info a4l_sbinfo_t;

/* CHANINFO / NBCHANINFO IOCTL arguments */
struct a4l_chan_info {
	unsigned long chan_flags;
	unsigned char nb_rng;
	unsigned char nb_bits;
};
typedef struct a4l_chan_info a4l_chinfo_t;

struct a4l_chinfo_arg {
	unsigned int idx_subd;
	void *info;
};
typedef struct a4l_chinfo_arg a4l_chinfo_arg_t;

/* RNGINFO / NBRNGINFO IOCTL arguments */
struct a4l_rng_info {
	long min;
	long max;
	unsigned long flags;
};
typedef struct a4l_rng_info a4l_rnginfo_t;

struct a4l_rng_info_arg {
	unsigned int idx_subd;
	unsigned int idx_chan;
	void *info;
};
typedef struct a4l_rng_info_arg a4l_rnginfo_arg_t;

/*! @} */

#define A4L_INSN_MASK_READ 0x8000000
#define A4L_INSN_MASK_WRITE 0x4000000
#define A4L_INSN_MASK_SPECIAL 0x2000000

/*!
 * @addtogroup analogy_lib_sync1
 * @{
 */

/*!
 * @anchor ANALOGY_INSN_xxx @name Instruction type
 * @brief Flags to define the type of instruction
 * @{
 */

/**
 * Read instruction
 */
#define A4L_INSN_READ (0 | A4L_INSN_MASK_READ)
/**
 * Write instruction
 */
#define A4L_INSN_WRITE (1 | A4L_INSN_MASK_WRITE)
/**
 * "Bits" instruction
 */
#define A4L_INSN_BITS (2 | A4L_INSN_MASK_READ | \
		       A4L_INSN_MASK_WRITE)
/**
 * Configuration instruction
 */
#define A4L_INSN_CONFIG (3 | A4L_INSN_MASK_READ | \
			 A4L_INSN_MASK_WRITE)
/**
 * Get time instruction
 */
#define A4L_INSN_GTOD (4 | A4L_INSN_MASK_READ | \
		       A4L_INSN_MASK_SPECIAL)
/**
 * Wait instruction
 */
#define A4L_INSN_WAIT (5 | A4L_INSN_MASK_WRITE | \
		       A4L_INSN_MASK_SPECIAL)
/**
 * Trigger instruction (to start asynchronous acquisition)
 */
#define A4L_INSN_INTTRIG (6 | A4L_INSN_MASK_WRITE | \
			  A4L_INSN_MASK_SPECIAL)

	  /*! @} ANALOGY_INSN_xxx */

/**
 * Maximal wait duration
 */
#define A4L_INSN_WAIT_MAX 100000

/*!
 * @anchor INSN_CONFIG_xxx @name Configuration instruction type
 * @brief Values to define the type of configuration instruction
 * @{
 */

#define A4L_INSN_CONFIG_DIO_INPUT		0
#define A4L_INSN_CONFIG_DIO_OUTPUT		1
#define A4L_INSN_CONFIG_DIO_OPENDRAIN		2
#define A4L_INSN_CONFIG_ANALOG_TRIG		16
#define A4L_INSN_CONFIG_ALT_SOURCE		20
#define A4L_INSN_CONFIG_DIGITAL_TRIG		21
#define A4L_INSN_CONFIG_BLOCK_SIZE		22
#define A4L_INSN_CONFIG_TIMER_1			23
#define A4L_INSN_CONFIG_FILTER			24
#define A4L_INSN_CONFIG_CHANGE_NOTIFY		25
#define A4L_INSN_CONFIG_SERIAL_CLOCK		26
#define A4L_INSN_CONFIG_BIDIRECTIONAL_DATA	27
#define A4L_INSN_CONFIG_DIO_QUERY		28
#define A4L_INSN_CONFIG_PWM_OUTPUT		29
#define A4L_INSN_CONFIG_GET_PWM_OUTPUT		30
#define A4L_INSN_CONFIG_ARM			31
#define A4L_INSN_CONFIG_DISARM			32
#define A4L_INSN_CONFIG_GET_COUNTER_STATUS	33
#define A4L_INSN_CONFIG_RESET			34
#define A4L_INSN_CONFIG_GPCT_SINGLE_PULSE_GENERATOR	1001	/* Use CTR as single pulsegenerator */
#define A4L_INSN_CONFIG_GPCT_PULSE_TRAIN_GENERATOR	1002	/* Use CTR as pulsetraingenerator */
#define A4L_INSN_CONFIG_GPCT_QUADRATURE_ENCODER	1003	/* Use the counter as encoder */
#define A4L_INSN_CONFIG_SET_GATE_SRC		2001	/* Set gate source */
#define A4L_INSN_CONFIG_GET_GATE_SRC		2002	/* Get gate source */
#define A4L_INSN_CONFIG_SET_CLOCK_SRC		2003	/* Set master clock source */
#define A4L_INSN_CONFIG_GET_CLOCK_SRC		2004	/* Get master clock source */
#define A4L_INSN_CONFIG_SET_OTHER_SRC		2005	/* Set other source */
#define A4L_INSN_CONFIG_SET_COUNTER_MODE	4097
#define A4L_INSN_CONFIG_SET_ROUTING		4099
#define A4L_INSN_CONFIG_GET_ROUTING		4109

/*! @} INSN_CONFIG_xxx */

/*!
 * @anchor ANALOGY_COUNTER_xxx @name Counter status bits
 * @brief Status bits for INSN_CONFIG_GET_COUNTER_STATUS
 * @{
 */

#define A4L_COUNTER_ARMED		0x1
#define A4L_COUNTER_COUNTING		0x2
#define A4L_COUNTER_TERMINAL_COUNT	0x4

	  /*! @} ANALOGY_COUNTER_xxx */

/*!
 * @anchor ANALOGY_IO_DIRECTION @name IO direction
 * @brief Values to define the IO polarity
 * @{
 */

#define A4L_INPUT	0
#define A4L_OUTPUT	1
#define A4L_OPENDRAIN	2

	  /*! @} ANALOGY_IO_DIRECTION */


/*!
 * @anchor ANALOGY_EV_xxx @name Events types
 * @brief Values to define the Analogy events. They might used to send
 * some specific events through the instruction interface.
 * @{
 */

#define A4L_EV_START		0x00040000
#define A4L_EV_SCAN_BEGIN	0x00080000
#define A4L_EV_CONVERT		0x00100000
#define A4L_EV_SCAN_END		0x00200000
#define A4L_EV_STOP		0x00400000

/*! @} ANALOGY_EV_xxx */

/*!
 * @brief Structure describing the synchronous instruction
 * @see a4l_snd_insn()
 */

struct a4l_instruction {
	unsigned int type;
		       /**< Instruction type */
	unsigned int idx_subd;
			   /**< Subdevice to which the instruction will be applied. */
	unsigned int chan_desc;
			    /**< Channel descriptor */
	unsigned int data_size;
			    /**< Size of the intruction data */
	void *data;
		    /**< Instruction data */
};
typedef struct a4l_instruction a4l_insn_t;

/*!
 * @brief Structure describing the list of synchronous instructions
 * @see a4l_snd_insnlist()
 */

struct a4l_instruction_list {
	unsigned int count;
			/**< Instructions count */
	a4l_insn_t *insns;
			  /**< Tab containing the instructions pointers */
};
typedef struct a4l_instruction_list a4l_insnlst_t;

/*! @} analogy_lib_sync1 */

struct a4l_calibration_subdev {
	a4l_sbinfo_t *info;
	char *name;
	int slen;
	int idx;
};

struct a4l_calibration_subdev_data {
	int index;
	int channel;
	int range;
	int expansion;
	int nb_coeff;
	double *coeff;

};

struct a4l_calibration_data {
	char *driver_name;
	char *board_name;
	int nb_ai;
	struct a4l_calibration_subdev_data *ai;
	int nb_ao;
	struct a4l_calibration_subdev_data *ao;
};

struct a4l_polynomial {
	int expansion;
	int order;
	int nb_coeff;
	double *coeff;
};


#endif /* _RTDM_UAPI_ANALOGY_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /*
 * This file is part of the Xenomai project.
 *
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_UAPI_AUTOTUNE_H
#define _RTDM_UAPI_AUTOTUNE_H

#include <linux/types.h>

#define RTDM_CLASS_AUTOTUNE		RTDM_CLASS_MISC
#define RTDM_SUBCLASS_AUTOTUNE		0

struct autotune_setup {
	__u32 period;
	__u32 quiet;
};

#define AUTOTUNE_RTIOC_IRQ		_IOW(RTDM_CLASS_AUTOTUNE, 0, struct autotune_setup)
#define AUTOTUNE_RTIOC_KERN		_IOW(RTDM_CLASS_AUTOTUNE, 1, struct autotune_setup)
#define AUTOTUNE_RTIOC_USER		_IOW(RTDM_CLASS_AUTOTUNE, 2, struct autotune_setup)
#define AUTOTUNE_RTIOC_PULSE		_IOW(RTDM_CLASS_AUTOTUNE, 3, __u64)
#define AUTOTUNE_RTIOC_RUN		_IOR(RTDM_CLASS_AUTOTUNE, 4, __u32)
#define AUTOTUNE_RTIOC_RESET		_IO(RTDM_CLASS_AUTOTUNE, 5)

#endif /* !_RTDM_UAPI_AUTOTUNE_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             /**
 * @note Copyright (C) 2016 Philippe Gerum <rpm@xenomai.org>
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 */
#ifndef _RTDM_UAPI_GPIO_H
#define _RTDM_UAPI_GPIO_H

#define GPIO_RTIOC_DIR_OUT		_IOW(RTDM_CLASS_GPIO, 0, int)
#define GPIO_RTIOC_DIR_IN		_IO(RTDM_CLASS_GPIO, 1)
#define GPIO_RTIOC_IRQEN		_IOW(RTDM_CLASS_GPIO, 2, int) /* GPIO trigger */
#define GPIO_RTIOC_IRQDIS		_IO(RTDM_CLASS_GPIO, 3)

#define GPIO_TRIGGER_NONE		0x0 /* unspecified */
#define GPIO_TRIGGER_EDGE_RISING	0x1
#define GPIO_TRIGGER_EDGE_FALLING	0x2
#define GPIO_TRIGGER_LEVEL_HIGH		0x4
#define GPIO_TRIGGER_LEVEL_LOW		0x8
#define GPIO_TRIGGER_MASK		0xf

#endif /* !_RTDM_UAPI_GPIO_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /**
 * @file
 * Real-Time Driver Model for Xenomai, serial device profile header
 *
 * @note Copyright (C) 2005-2007 Jan Kiszka <jan.kiszka@web.de>
 *
 * Xenomai is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Xenomai is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Xenomai; if not, write to the Free Software Foundation,
 * Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 */
#ifndef _RTDM_SERIAL_H
#define _RTDM_SERIAL_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/serial.h>

/**
 * @ingroup rtdm_profiles
 * @defgroup rtdm_serial Serial Devices
 *
 * This is the common interface a RTDM-compliant serial device has to
 * provide.  Feel free to comment on this profile via the Xenomai
 * mailing list <xenomai@xenomai.org> or directly to the author
 * <jan.kiszka@web.de>.
 *
 * @b Profile @b Revision: 3
 * @n
 * @n
 * @par Device Characteristics
 * @ref rtdm_driver_flags "Device Flags": @c RTDM_NAMED_DEVICE, @c RTDM_EXCLUSIVE @n
 * @n
 * @ref rtdm_driver_profile "Device Class": @c RTDM_CLASS_SERIAL @n
 * @n
 * Device Name: @c "/dev/rtdm/rtser<N>", N >= 0 @n
 * @n
 *
 * @par Supported Operations
 * @b Open @n
 * @coretags{secondary-only}
 * Specific return values: none @n
 * @n
 * @b Close @n
 * @coretags{secondary-only}
 * Specific return values: none @n
 * @n
 * @b IOCTL @n
 * @coretags{task-unrestricted}. See @ref SERIOCTLs "below" @n
 * Specific return values: see @ref SERIOCTLs "below" @n
 * @n
 * @b Read @n
 * @coretags{mode-unrestricted}
 * Specific return values:
 * - -ETIMEDOUT
 * - -EINTR (interrupted explicitly or by signal)
 * - -EAGAIN (no data available in non-blocking mode)
 * - -EBADF (device has been closed while reading)
 * - -EIO (hardware error or broken bit stream)
 * .
 * @n
 * @b Write @n
 * @coretags{mode-unrestricted}
 * Specific return values:
 * - -ETIMEDOUT
 * - -EINTR (interrupted explicitly or by signal)
 * - -EAGAIN (no data written in non-blocking mode)
 * - -EBADF (device has been closed while writing)
 */

#endif /* !_RTDM_SERIAL_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         /**
 * @file
 * @note Copyright (C) 2005, 2006 Jan Kiszka <jan.kiszka@web.de>
 * @note Copyright (C) 2005 Joerg Langenberg <joerg.langenberg@gmx.net>
 *
 * Xenomai is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Xenomai is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Xenomai; if not, write to the Free Software Foundation,
 * Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 */
#ifndef _RTDM_RTDM_H
#define _RTDM_RTDM_H

#include <linux/types.h>
#include <sys/ioctl.h>
#include <sys/socket.h>
#include <fcntl.h>
#include <stddef.h>
#include <stdint.h>
#include <errno.h>
#include <unistd.h>
#include <boilerplate/wrappers.h>

/**
 * @defgroup rtdm RTDM
 *
 * The Real-Time Driver Model (RTDM) provides a unified interface to
 * both users and developers of real-time device
 * drivers. Specifically, it addresses the constraints of mixed
 * RT/non-RT systems like Xenomai. RTDM conforms to POSIX
 * semantics (IEEE Std 1003.1) where available and applicable.
 *
 * @b API @b Revision: 8
 */

/**
 * @ingroup rtdm
 * @defgroup rtdm_user_api RTDM User API
 *
 * Application interface to RTDM services
 *
 * This is the upper interface of RTDM provided to application
 * programs both in kernel and user space. Note that certain functions
 * may not be implemented by every device. Refer to the @ref
 * rtdm_profiles "Device Profiles" for precise information.
 */

#include <rtdm/uapi/rtdm.h>

#endif /* !_RTDM_RTDM_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /**
 * @file
 * @note Copyright (C) 2006 Wolfgang Grandegger <wg@grandegger.com>
 *
 * @note Copyright (C) 2005, 2006 Sebastian Smolorz
 *                         <Sebastian.Smolorz@stud.uni-hannover.de>
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 */
#ifndef _RTDM_CAN_H
#define _RTDM_CAN_H

#include <net/if.h>
#include <rtdm/rtdm.h>
#include <rtdm/uapi/can.h>

/**
 * @ingroup rtdm_profiles
 * @defgroup rtdm_can CAN Devices
 *
 * This is the common interface a RTDM-compliant CAN device has to provide.
 * Feel free to report bugs and comments on this profile to the "Socketcan"
 * mailing list (Socketcan-core@lists.berlios.de) or directly to the authors
 * (wg@grandegger.com or Sebastian.Smolorz@stud.uni-hannover.de).
 *
 * @b Profile @b Revision: 2
 * @n
 * @n
 * @par Device Characteristics
 * @n
 * @ref rtdm_driver_flags "Device Flags": @c RTDM_PROTOCOL_DEVICE @n
 * @n
 * @ref rtdm_driver.protocol_family "Protocol Family": @c PF_CAN @n
 * @n
 * @ref rtdm_driver.socket_type "Socket Type": @c SOCK_RAW @n
 * @n
 * @ref rtdm_driver_profile "Device Class": @c RTDM_CLASS_CAN @n
 * @n
 *
 * @par Supported Operations
 * @n
 * @b Socket @n
 * @coretags{secondary-only}
 * @n
 * Specific return values:
 * - -EPROTONOSUPPORT (Protocol is not supported by the driver.
 *                     See @ref CAN_PROTO "CAN protocols"
 *                     for possible protocols.)
 * .
 * @n
 * @n
 * @b Close @n
 * Blocking calls to any of the @ref Send or @ref Recv "Receive" functions
 * will be unblocked when the socket is closed and return with an error. @n
 * @n
 * @coretags{secondary-only}
 * @n
 * Specific return values: none @n
 * @n
 * @n
 * @b IOCTL @n
 * @coretags{task-unrestricted}. see @ref CANIOCTLs "below"
 * Specific return values: see @ref CANIOCTLs "below" @n
 * @n
 * @n
 * @anchor Bind
 * @b Bind @n
 * Binds a socket to one or all CAN devices (see struct sockaddr_can). If
 * a filter list has been defined with setsockopt (see @ref Sockopts),
 * it will be used upon reception of CAN frames to decide whether the
 * bound socket will receive a frame. If no filter has been defined, the
 * socket will receive @b all CAN frames on the specified interface(s). @n
 * @n
 * Binding to special interface index @c 0 will make the socket receive
 * CAN frames from all CAN interfaces. @n
 * @n
 * Binding to an interface index is also relevant for the @ref Send functions
 * because they will transmit a message over the interface the socket is
 * bound to when no socket address is given to them. @n
 * @n
 * @n
 * @coretags{secondary-only}
 * @n
 * Specific return values:
 * - -EFAULT (It was not possible to access user space memory area at the
 *            specified address.)
 * - -ENOMEM (Not enough memory to fulfill the operation)
 * - -EINVAL (Invalid address family, or invalid length of address structure)
 * - -ENODEV (Invalid CAN interface index)
 * - -ENOSPC (No enough space for filter list)
 * - -EBADF  (Socket is about to be closed)
 * - -EAGAIN (Too many receivers. Old binding (if any) is still active.
 *            Close some sockets and try again.)
 * .
 * @n
 * @n
 * @anchor Sockopts
 * <b>Setsockopt, Getsockopt</b>@n
 * These functions allow to set and get various socket options. Currently,
 * only CAN raw sockets are supported. @n
 * @n
 * Supported Levels and Options:
 * @n
 * - Level @b SOL_CAN_RAW : CAN RAW protocol (see @ref CAN_RAW)
 *   - Option @ref CAN_RAW_FILTER : CAN filter list
 *   - Option @ref CAN_RAW_ERR_FILTER : CAN error mask
 *   - Option @ref CAN_RAW_LOOPBACK : CAN TX loopback to local sockets
 *   .
 * .
 * @n
 * @coretags{task-unrestricted}
 * Specific return values: see links to options above. @n
 * @n
 * @n
 * @anchor Recv
 * <b>Recv, Recvfrom, Recvmsg</b> @n
 * These functions receive CAN messages from a socket. Only one
 * message per call can be received, so only one buffer with the correct length
 * must be passed. For @c SOCK_RAW, this is the size of struct can_frame. @n
 * @n
 * Unlike a call to one of the @ref Send functions, a Recv function will not
 * return with an error if an interface is down (due to bus-off or setting
 * of stop mode) or in sleep mode. Moreover, in such a case there may still
 * be some CAN messages in the socket buffer which could be read out
 * successfully. @n
 * @n
 * It is possible to receive a high precision timestamp with every CAN
 * message. The condition is a former instruction to the socket via
 * @ref RTCAN_RTIOC_TAKE_TIMESTAMP. The timestamp will be copied to the
 * @c msg_control buffer of <TT>struct msghdr</TT> if it points to a valid
 * memory location with size of @ref nanosecs_abs_t. If this
 * is a NULL pointer the timestamp will be discarded silently. @n
 * @n
 * @b Note: A @c msg_controllen of @c 0 upon completion of the function call
 *          indicates that no timestamp is available for that message.
 * @n
 * @n
 * Supported Flags [in]:
 * - MSG_DONTWAIT (By setting this flag the operation will only succeed if
 *                 it would not block, i.e. if there is a message in the
 *                 socket buffer. This flag takes precedence over a timeout
 *                 specified by @ref RTCAN_RTIOC_RCV_TIMEOUT.)
 * - MSG_PEEK     (Receive a message but leave it in the socket buffer. The
 *                 next receive operation will get that message again.)
 * .
 * @n
 * Supported Flags [out]: none @n
 * @n
 * @coretags{mode-unrestricted}
 * @n
 * Specific return values:
 * - Non-negative value (Indicating the successful reception of a CAN message.
 *   For @c SOCK_RAW, this is the size of struct can_frame regardless of
 *   the actual size of the payload.)
 * - -EFAULT (It was not possible to access user space memory area at one
 *            of the specified addresses.)
 * - -EINVAL (Unsupported flag detected, or invalid length of socket address
 *            buffer, or invalid length of message control buffer)
 * - -EMSGSIZE (Zero or more than one iovec buffer passed, or buffer too
 *              small)
 * - -EAGAIN (No data available in non-blocking mode)
 * - -EBADF (Socket was closed.)
 * - -EINTR (Operation was interrupted explicitly or by signal.)
 * - -ETIMEDOUT (Timeout)
 * .
 * @n
 * @n
 * @anchor Send
 * <b>Send, Sendto, Sendmsg</b> @n
 * These functions send out CAN messages. Only one message per call can
 * be transmitted, so only one buffer with the correct length must be passed.
 * For @c SOCK_RAW, this is the size of struct can_frame. @n
 * @n
 * The following only applies to @c SOCK_RAW: If a socket address of
 * struct sockaddr_can is given, only @c can_ifindex is used. It is also
 * possible to omit the socket address. Then the interface the socket is
 * bound to will be used for sending messages. @n
 * @n
 * If an interface goes down (due to bus-off or setting of stop mode) all
 * senders that were blocked on this interface will be woken up. @n
 * @n
 * @n
 * Supported Flags:
 * - MSG_DONTWAIT (By setting this flag the transmit operation will only
 *                 succeed if it would not block. This flag takes precedence
 *                 over a timeout specified by @ref RTCAN_RTIOC_SND_TIMEOUT.)
 * .
 * @coretags{mode-unrestricted}
 * @n
 * Specific return values:
 * - Non-negative value equal to given buffer size (Indicating the
 *   successful completion of the function call. See also note.)
 * - -EOPNOTSUPP (MSG_OOB flag is not supported.)
 * - -EINVAL (Unsupported flag detected @e or: Invalid length of socket
 *            address @e or: Invalid address family @e or: Data length code
 *            of CAN frame not between 0 and 15 @e or: CAN standard frame has
 *            got an ID not between 0 and 2031)
 * - -EMSGSIZE (Zero or more than one buffer passed or invalid size of buffer)
 * - -EFAULT (It was not possible to access user space memory area at one
 *            of the specified addresses.)
 * - -ENXIO (Invalid CAN interface index - @c 0 is not allowed here - or
 *           socket not bound or rather bound to all interfaces.)
 * - -ENETDOWN (Controller is bus-off or in stopped state.)
 * - -ECOMM (Controller is sleeping)
 * - -EAGAIN (Cannot transmit without blocking but a non-blocking
 *            call was requested.)
 * - -EINTR (Operation was interrupted explicitly or by signal)
 * - -EBADF (Socket was closed.)
 * - -ETIMEDOUT (Timeout)
 * .
 * @b Note: A successful completion of the function call does not implicate a
 *          successful transmission of the message.
 *
 * @{
 *
 * @anchor CANutils @name CAN example and utility programs
 * @{
 * @example rtcanconfig.c
 * @example rtcansend.c
 * @example rtcanrecv.c
 * @example can-rtt.c
 * @}
 *
 * @}
 */
#endif /* !_RTDM_CAN_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 /*
 * This file is part of the Xenomai project.
 *
 * Copyright (C) 2009 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_IPC_H
#define _RTDM_IPC_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/ipc.h>

#endif /* !_RTDM_IPC_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            /*
 * This file is part of the Xenomai project.
 *
 * Copyright (C) 2015 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_UDD_H
#define _RTDM_UDD_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/udd.h>

#endif /* !_RTDM_UDD_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            /*
 * Copyright (C) 2016 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_SPI_H
#define _RTDM_SPI_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/spi.h>

#endif /* !_RTDM_SPI_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            /**
 * @file
 * Real-Time Driver Model for Xenomai, testing device profile header
 *
 * @note Copyright (C) 2005 Jan Kiszka <jan.kiszka@web.de>
 *
 * Xenomai is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * Xenomai is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Xenomai; if not, write to the Free Software Foundation,
 * Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 */
#ifndef _RTDM_TESTING_H
#define _RTDM_TESTING_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/testing.h>

/**
 * @ingroup rtdm_profiles
 * @defgroup rtdm_testing Testing Devices
 *
 * This group of devices is intended to provide in-kernel testing
 * results.  Feel free to comment on this profile via the Xenomai
 * mailing list <xenomai@xenomai.org> or directly to the author
 * <jan.kiszka@web.de>.
 *
 * @b Profile @b Revision: 2
 * @n
 * @n
 * @par Device Characteristics
 * @ref rtdm_driver_flags "Device Flags": @c RTDM_NAMED_DEVICE @n
 * @n
 * @ref rtdm_driver_profile "Device Class": @c RTDM_CLASS_TESTING @n
 * @n
 *
 * @par Supported Operations
 * @b Open @n
 * @coretags{secondary-only}
 * Specific return values: none @n
 * @n
 * @b Close @n
 * @coretags{secondary-only}
 * Specific return values: none @n
 * @n
 * @b IOCTL @n
 * @coretags{task-unrestricted}. See @ref TSTIOCTLs below @n
 * Specific return values: see @ref TSTIOCTLs below @n
 */

#endif /* _RTDM_TESTING_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /*
 * This file is part of the Xenomai project.
 *
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_AUTOTUNE_H
#define _RTDM_AUTOTUNE_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/autotune.h>

#endif /* !_RTDM_AUTOTUNE_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*
 * Copyright (C) 2016 Philippe Gerum <rpm@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _RTDM_GPIO_H
#define _RTDM_GPIO_H

#include <rtdm/rtdm.h>
#include <rtdm/uapi/gpio.h>

#endif /* !_RTDM_GPIO_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*
 * Copyright (C) 2010 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */

#ifndef _BOILERPLATE_LOCK_H
#define _BOILERPLATE_LOCK_H

#include <pthread.h>
#include <boilerplate/atomic.h>
#include <boilerplate/wrappers.h>
#include <boilerplate/debug.h>

/*
 * CANCEL_DEFER/RESTORE() should enclose any emulator code prior to
 * holding a lock, or invoking inner boilerplate/copperplate services
 * (which usually do so), to change the system state. A proper cleanup
 * handler should be pushed prior to acquire such lock.
 *
 * Those macros ensure that cancellation type is switched to deferred
 * mode while the section is traversed, then restored to its original
 * value upon exit.
 *
 * WARNING: inner services MAY ASSUME that cancellability is deferred
 * for the caller, so you really want to define protected sections as
 * required in the higher interface layers.
 */
struct service {
	int cancel_type;
};

#ifdef CONFIG_XENO_ASYNC_CANCEL

#define CANCEL_DEFER(__s)					\
	do {								\
		pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED,		\
				      &(__s).cancel_type);		\
	} while (0)

#define CANCEL_RESTORE(__s)					\
	do {								\
		pthread_setcanceltype((__s).cancel_type, NULL);		\
		backtrace_check();					\
	} while (0)

#else  /* !CONFIG_XENO_ASYNC_CANCEL */

#define CANCEL_DEFER(__s)	do { (void)(__s); } while (0)

#define CANCEL_RESTORE(__s)	do { } while (0)

#endif  /* !CONFIG_XENO_ASYNC_CANCEL */

struct cleanup_block {
	pthread_mutex_t *lock;
	void (*handler)(void *arg);
	void *arg;
};

#define __push_cleanup_args(__cb, __lock, __fn, __arg)	\
	((__cb)->lock = (__lock)),			\
	((__cb)->handler = (void (*)(void *))(__fn)),	\
	((__cb)->arg = (__arg))

#define push_cleanup_handler(__cb, __lock, __fn, __arg)			\
	pthread_cleanup_push((void (*)(void *))__run_cleanup_block,	\
			     (__push_cleanup_args(__cb, __lock, __fn, __arg), (__cb)))

#define pop_cleanup_handler(__cb)	\
	pthread_cleanup_pop(0)

#define push_cleanup_lock(__lock)	\
	pthread_cleanup_push((void (*)(void *))__RT(pthread_mutex_unlock), (__lock))

#define pop_cleanup_lock(__lock)	\
	pthread_cleanup_pop(0)

#ifdef CONFIG_XENO_DEBUG
int __check_cancel_type(const char *locktype);
#else
#define __check_cancel_type(__locktype)				\
	({ (void)__locktype; 0; })
#endif

#define __do_lock(__lock, __op)					\
	({							\
		int __ret;					\
		__ret = -__RT(pthread_mutex_##__op(__lock));	\
		__ret;						\
	})

#define __do_lock_nocancel(__lock, __type, __op)			\
	({								\
		__bt(__check_cancel_type(#__op "_nocancel"));		\
		__do_lock(__lock, __op);				\
	})

#define __do_unlock(__lock)					\
	({							\
		int __ret;					\
		__ret = -__RT(pthread_mutex_unlock(__lock));	\
		__ret;						\
	})
/*
 * Macros to enter/leave critical sections within inner
 * routines. Actually, they are mainly aimed at self-documenting the
 * code, by specifying basic assumption(s) about the code being
 * traversed. In effect, they are currently aliases to the standard
 * pthread_mutex_* API, except for the _safe form.
 *
 * The _nocancel suffix indicates that no cancellation point is
 * traversed by the protected code, therefore we don't need any
 * cleanup handler since we are guaranteed to run in deferred cancel
 * mode after CANCEL_DEFER(). A runtime check is inserted in
 * debug mode, which triggers when cancellability is not in deferred
 * mode while an attempt is made to acquire a _nocancel lock.
 *
 * read/write_lock() forms must be enclosed within the scope of a
 * cleanup handler since the protected code may reach cancellation
 * points. push_cleanup_lock() is a simple shorthand to push
 * pthread_mutex_unlock as the cleanup handler.
 */
#define read_lock(__lock)			\
	__do_lock(__lock, lock)

#define read_trylock(__lock)			\
	__do_lock(__lock, trylock)

#define read_lock_nocancel(__lock)		\
	__do_lock_nocancel(__lock, read_lock, lock)

#define read_trylock_nocancel(__lock)		\
	__do_lock_nocancel(__lock, read_trylock, trylock)

#define read_unlock(__lock)			\
	__do_unlock(__lock)

#define write_lock(__lock)			\
	__do_lock(__lock, lock)

#define write_trylock(__lock)			\
	__do_lock(__lock, trylock)

#define write_lock_nocancel(__lock)		\
	__do_lock_nocancel(__lock, write_lock, lock)

#define write_trylock_nocancel(__lock)		\
	__do_lock_nocancel(__lock, write_trylock, trylock)

#define write_unlock(__lock)			\
	__do_unlock(__lock)

#define __do_lock_safe(__lock, __state, __op)				\
	({								\
		int __ret, __oldstate;					\
		__bt(__check_cancel_type(#__op "_safe"));		\
		pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, &__oldstate); \
		__ret = -__RT(pthread_mutex_##__op(__lock));		\
		if (__ret)						\
			pthread_setcancelstate(__oldstate, NULL);	\
		__state = __oldstate;					\
		__ret;							\
	})

#define __do_unlock_safe(__lock, __state)				\
	({								\
		int __ret, __restored_state = __state;			\
		__ret = -__RT(pthread_mutex_unlock(__lock));		\
		pthread_setcancelstate(__restored_state, NULL);		\
		__ret;							\
	})

/*
 * The _safe call form is available when undoing the changes from an
 * update section upon cancellation using a cleanup handler is not an
 * option (e.g. too complex), or in situations where the protected
 * code shall fully run; in such cases, cancellation is disabled
 * throughout the section.
 */

#define write_lock_safe(__lock, __state)	\
	__do_lock_safe(__lock, __state, lock)

#define write_trylock_safe(__lock, __state)	\
	__do_lock_safe(__lock, __state, trylock)

#define write_unlock_safe(__lock, __state)	\
	__do_unlock_safe(__lock, __state)

#define read_lock_safe(__lock, __state)	\
	__do_lock_safe(__lock, __state, lock)

#define read_unlock_safe(__lock, __state)	\
	__do_unlock_safe(__lock, __state)

#ifdef CONFIG_XENO_DEBUG
#define mutex_type_attribute PTHREAD_MUTEX_ERRORCHECK
#else
#define mutex_type_attribute PTHREAD_MUTEX_NORMAL
#endif

#endif /* _BOILERPLATE_LOCK_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /*
 * Copyright (C) 2015 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _BOILERPLATE_TUNABLES_H
#define _BOILERPLATE_TUNABLES_H

#include <assert.h>
#include <boilerplate/setup.h>

#ifdef __cplusplus
extern "C" {
#endif

static inline int __may_change_config_tunable(void)
{
	return !__config_done;
}

#define __tunable_set_call(__name, __scope)	\
	__assign_ ## __name ## _ ## __scope

#define __tunable_get_call(__name, __scope)	\
	__read_ ## __name ## _ ## __scope

#define __define_tunable(__name, __type, __val, __scope)	\
	void __tunable_set_call(__name, __scope)(typeof(__type) __val)

#define __read_tunable(__name, __type, __scope)	\
	typeof(__type) __tunable_get_call(__name, __scope)(void)

#define define_config_tunable(__name, __type, __val)	\
	__define_tunable(__name, __type, __val, config)

#define define_runtime_tunable(__name, __type, __val)	\
	__define_tunable(__name, __type, __val, runtime)

#define read_config_tunable(__name, __type)		\
	__read_tunable(__name, __type, config)

#define read_runtime_tunable(__name, __type)		\
	__read_tunable(__name, __type, runtime)

#define set_config_tunable(__name, __val)			\
	do {							\
		assert(__may_change_config_tunable());		\
		__tunable_set_call(__name, config)(__val);	\
	} while (0)

#define get_config_tunable(__name)		\
	__tunable_get_call(__name, config)()

#define set_runtime_tunable(__name, __val)	\
	__tunable_set_call(__name, runtime)(__val)

#define get_runtime_tunable(__name)		\
	__tunable_get_call(__name, runtime)()

static inline define_config_tunable(cpu_affinity, cpu_set_t, cpus)
{
	__base_setup_data.cpu_affinity = cpus;
}

static inline read_config_tunable(cpu_affinity, cpu_set_t)
{
	return __base_setup_data.cpu_affinity;
}

static inline define_config_tunable(no_mlock, int, nolock)
{
	__base_setup_data.no_mlock = nolock;
}

static inline read_config_tunable(no_mlock, int)
{
	return __base_setup_data.no_mlock;
}

static inline define_config_tunable(no_sanity, int, nosanity)
{
	__base_setup_data.no_sanity = nosanity;
}

static inline read_config_tunable(no_sanity, int)
{
	return __base_setup_data.no_sanity;
}

static inline define_runtime_tunable(verbosity_level, int, level)
{
	__base_setup_data.verbosity_level = level;
}

static inline read_runtime_tunable(verbosity_level, int)
{
	return __base_setup_data.verbosity_level;
}

static inline define_runtime_tunable(trace_level, int, level)
{
	__base_setup_data.trace_level = level;
}

static inline read_runtime_tunable(trace_level, int)
{
	return __base_setup_data.trace_level;
}

#ifdef __cplusplus
}
#endif

#endif /* !_BOILERPLATE_TUNABLES_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _BOILERPLATE_TIME_H
#define _BOILERPLATE_TIME_H

#include <time.h>

typedef unsigned long long ticks_t;

typedef long long sticks_t;

#ifdef __cplusplus
extern "C" {
#endif

void timespec_sub(struct timespec *__restrict r,
		  const struct timespec *__restrict t1,
		  const struct timespec *__restrict t2);

void timespec_subs(struct timespec *__restrict r,
		   const struct timespec *__restrict t1,
		   sticks_t t2);

void timespec_add(struct timespec *__restrict r,
		  const struct timespec *__restrict t1,
		  const struct timespec *__restrict t2);

void timespec_adds(struct timespec *__restrict r,
		   const struct timespec *__restrict t1,
		   sticks_t t2);

void timespec_sets(struct timespec *__restrict r,
		   ticks_t ns);

#ifdef __cplusplus
}
#endif

static inline sticks_t timespec_scalar(const struct timespec *__restrict t)
{
	return t->tv_sec * 1000000000LL + t->tv_nsec;
}

static inline int __attribute__ ((always_inline))
timespec_before(const struct timespec *__restrict t1,
		const struct timespec *__restrict t2)
{
	if (t1->tv_sec < t2->tv_sec)
		return 1;

	if (t1->tv_sec == t2->tv_sec &&
	    t1->tv_nsec < t2->tv_nsec)
		return 1;

	return 0;
}

static inline int __attribute__ ((always_inline))
timespec_before_or_same(const struct timespec *__restrict t1,
			const struct timespec *__restrict t2)
{
	if (t1->tv_sec < t2->tv_sec)
		return 1;

	if (t1->tv_sec == t2->tv_sec &&
	    t1->tv_nsec <= t2->tv_nsec)
		return 1;

	return 0;
}

static inline int __attribute__ ((always_inline))
timespec_after(const struct timespec *__restrict t1,
	       const struct timespec *__restrict t2)
{
	return !timespec_before_or_same(t1, t2);
}

static inline int __attribute__ ((always_inline))
timespec_after_or_same(const struct timespec *__restrict t1,
		       const struct timespec *__restrict t2)
{
	return !timespec_before(t1, t2);
}

#endif /* _BOILERPLATE_TIME_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /*
 * Copyright (C) 2010 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */

#ifndef _BOILERPLATE_PRIVATE_LIST_H
#define _BOILERPLATE_PRIVATE_LIST_H

#ifndef _BOILERPLATE_LIST_H
#error "Do not include this file directly. Use <boilerplate/list.h> instead."
#endif

struct pvholder {
	struct pvholder *next;
	struct pvholder *prev;
};

struct pvlistobj {
	struct pvholder head;
};

#define PRIVATE_LIST_INITIALIZER(__name) \
	{ .head = { .next = &((__name).head), .prev = &((__name).head) } }

#define DEFINE_PRIVATE_LIST(__name) \
	struct pvlistobj __name = PRIVATE_LIST_INITIALIZER(__name)

static inline void initpvh(struct pvholder *holder)
{
	holder->next = holder;
	holder->prev = holder;
}

static inline void atpvh(struct pvholder *head, struct pvholder *holder)
{
	/* Inserts the new element right after the heading one. */
	holder->prev = head;
	holder->next = head->next;
	holder->next->prev = holder;
	head->next = holder;
}

static inline void dtpvh(struct pvholder *holder)
{
	holder->prev->next = holder->next;
	holder->next->prev = holder->prev;
}

static inline void pvlist_init(struct pvlistobj *list)
{
	initpvh(&list->head);
}

static inline void pvholder_init(struct pvholder *holder)
{
	initpvh(holder);
}

/*
 * XXX: pvholder_init() is mandatory if you later want to use this
 * predicate.
 */
static inline int pvholder_linked(const struct pvholder *holder)
{
	return !(holder->prev == holder->next &&
		 holder->prev == holder);
}

static inline void pvlist_prepend(struct pvholder *holder, struct pvlistobj *list)
{
	atpvh(&list->head, holder);
}

static inline void pvlist_append(struct pvholder *holder, struct pvlistobj *list)
{
	atpvh(list->head.prev, holder);
}

static inline void pvlist_insert(struct pvholder *next, struct pvholder *prev)
{
	atpvh(prev, next);
}

static inline void pvlist_join(struct pvlistobj *lsrc, struct pvlistobj *ldst)
{
	struct pvholder *headsrc = lsrc->head.next;
	struct pvholder *tailsrc = lsrc->head.prev;
	struct pvholder *headdst = &ldst->head;

	headsrc->prev->next = tailsrc->next;
	tailsrc->next->prev = headsrc->prev;
	headsrc->prev = headdst;
	tailsrc->next = headdst->next;
	headdst->next->prev = tailsrc;
	headdst->next = headsrc;
}

static inline void pvlist_remove(struct pvholder *holder)
{
	dtpvh(holder);
}

static inline void pvlist_remove_init(struct pvholder *holder)
{
	dtpvh(holder);
	initpvh(holder);
}

static inline int pvlist_empty(const struct pvlistobj *list)
{
	return list->head.next == &list->head;
}

static inline struct pvholder *pvlist_pop(struct pvlistobj *list)
{
	struct pvholder *holder = list->head.next;
	pvlist_remove(holder);
	return holder;
}

static inline int pvlist_heading_p(const struct pvholder *holder,
				   const struct pvlistobj *list)
{
	return list->head.next == holder;
}

#define pvlist_entry(ptr, type, member)				\
	container_of(ptr, type, member)

#define pvlist_first_entry(list, type, member)			\
	pvlist_entry((list)->head.next, type, member)

#define pvlist_last_entry(list, type, member)			\
	pvlist_entry((list)->head.prev, type, member)

#define pvlist_prev_entry(pos, list, member)				\
	({								\
		typeof(*pos) *__prev = NULL;				\
		if ((list)->head.next != &(pos)->member)		\
			__prev = pvlist_entry((pos)->member.prev,	\
					      typeof(*pos), member);	\
		__prev;							\
	})

#define pvlist_next_entry(pos, list, member)				\
	({								\
		typeof(*pos) *__next = NULL;				\
		if ((list)->head.prev != &(pos)->member)		\
			__next = pvlist_entry((pos)->member.next,	\
					      typeof(*pos), member);	\
		__next;							\
	})

#define pvlist_pop_entry(list, type, member) ({				\
			struct pvholder *__holder = pvlist_pop(list);	\
			pvlist_entry(__holder, type, member); })

#define pvlist_for_each(pos, list)					\
	for (pos = (list)->head.next;					\
	     pos != &(list)->head; pos = (pos)->next)

#define pvlist_for_each_reverse(pos, list)				\
	for (pos = (list)->head.prev;					\
	     pos != &(list)->head; pos = (pos)->prev)

#define pvlist_for_each_safe(pos, tmp, list)				\
	for (pos = (list)->head.next,					\
		     tmp = (pos)->next;					\
	     pos != &(list)->head;					\
	     pos = tmp, tmp = (pos)->next)

#define pvlist_for_each_entry(pos, list, member)			\
	for (pos = pvlist_entry((list)->head.next,			\
			      typeof(*pos), member);			\
	     &(pos)->member != &(list)->head;				\
	     pos = pvlist_entry((pos)->member.next,			\
			      typeof(*pos), member))

#define pvlist_for_each_entry_safe(pos, tmp, list, member)		\
	for (pos = pvlist_entry((list)->head.next,			\
			      typeof(*pos), member),			\
		     tmp = pvlist_entry((pos)->member.next,		\
				      typeof(*pos), member);		\
	     &(pos)->member != &(list)->head;				\
	     pos = tmp, tmp = pvlist_entry((pos)->member.next,		\
					 typeof(*pos), member))

#define pvlist_for_each_entry_reverse(pos, list, member)		\
	for (pos = pvlist_entry((list)->head.prev,			\
			      typeof(*pos), member);			\
	     &pos->member != &(list)->head;				\
	     pos = pvlist_entry(pos->member.prev,			\
			      typeof(*pos), member))

#define pvlist_for_each_entry_reverse_safe(pos, tmp, list, member)	\
	for (pos = pvlist_entry((list)->head.prev,			\
			      typeof(*pos), member),			\
		     tmp = pvlist_entry((pos)->member.prev,		\
				      typeof(*pos), member);		\
	     &(pos)->member != &(list)->head;				\
	     pos = tmp, tmp = pvlist_entry((pos)->member.prev,		\
					 typeof(*pos), member))

#endif /* !_BOILERPLATE_PRIVATE_LIST_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /*
 * Copyright (C) 2011 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _BOILERPLATE_DEBUG_H
#define _BOILERPLATE_DEBUG_H

#include <stdint.h>
#include <stddef.h>
#include <xeno_config.h>

#ifdef CONFIG_XENO_DEBUG

#include <pthread.h>
#include <boilerplate/compiler.h>

static inline int must_check(void)
{
	return 1;
}

struct error_frame {
	int retval;
	int lineno;
	const char *fn;
	const char *file;
	struct error_frame *next;
};

struct backtrace_data {
	const char *name;
	struct error_frame *inner;
	pthread_mutex_t lock;
	char eundef[16];
};

#ifdef __cplusplus
extern "C" {
#endif

void backtrace_init_context(struct backtrace_data *btd,
			    const char *name);

void backtrace_destroy_context(struct backtrace_data *btd);

void backtrace_dump(struct backtrace_data *btd);

void backtrace_log(int retval, const char *fn,
		   const char *file, int lineno);

void backtrace_check(void);

void __debug(const char *name, const char *fmt, ...);

char *__get_error_buf(size_t *sizep);

void debug_init(void);

#ifdef __cplusplus
}
#endif

#define __bt(__exp)						\
	({							\
		typeof(__exp) __ret = (__exp);			\
		if (unlikely(__ret < 0))			\
			backtrace_log((int)__ret, __FUNCTION__,	\
				      __FILE__, __LINE__);	\
		__ret;						\
	})

#define __bterrno(__exp)					\
	({							\
		typeof(__exp) __ret = (__exp);			\
		if (unlikely(__ret < 0))			\
			backtrace_log(-errno, __FUNCTION__,	\
				      __FILE__, __LINE__);	\
		__ret;						\
	})

#else /* !CONFIG_XENO_DEBUG */

static inline int must_check(void)
{
	return 0;
}

struct backtrace_data {
};

#define __bt(__exp)			(__exp)

#define __bterrno(__exp)		(__exp)

#define backtrace_init_context(btd, name)	\
	do { (void)(btd); (void)(name); } while (0)

#define backtrace_destroy_context(btd)	\
	do { (void)(btd); } while (0)

#define backtrace_dump(btd)		\
	do { (void)(btd); } while (0)

#define backtrace_check()		\
	do { } while (0)
/*
 * XXX: We have no thread-private backtrace context in non-debug mode,
 * so there is a potential race if multiple threads want to write to
 * this buffer. This looks acceptable though, since this is primarily
 * a debug feature, and the race won't damage the system anyway.
 */
#define __get_error_buf(sizep)			\
	({					\
		static char __buf[16];		\
		*(sizep) = sizeof(__buf);	\
		__buf;				\
	})

#define debug_init()	do { } while (0)

#endif /* !CONFIG_XENO_DEBUG */

static inline int bad_pointer(const void *ptr)
{
	return ptr == NULL || ((intptr_t)ptr & (sizeof(intptr_t)-1)) != 0;
}

#endif /* _BOILERPLATE_DEBUG_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _BOILERPLATE_COMPILER_H
#define _BOILERPLATE_COMPILER_H

#include <stddef.h>

#define container_of(ptr, type, member)					\
	({								\
		const __typeof__(((type *)0)->member) *__mptr = (ptr);	\
		(type *)((char *)__mptr - offsetof(type, member));	\
	})

#define __stringify_1(x...)	#x
#define __stringify(x...)	__stringify_1(x)

#ifndef likely
#define likely(x)	__builtin_expect(!!(x), 1)
#define unlikely(x)	__builtin_expect(!!(x), 0)
#endif

#ifndef __noreturn
#define __noreturn	__attribute__((__noreturn__))
#endif

#ifndef __must_check
#define __must_check	__attribute__((__warn_unused_result__))
#endif

#ifndef __weak
#define __weak		__attribute__((__weak__))
#endif

#ifndef __maybe_unused
#define __maybe_unused	__attribute__((__unused__))
#endif

#ifndef __aligned
#define __aligned(__n)	__attribute__((aligned (__n)))
#endif

#ifndef __deprecated
#define __deprecated	__attribute__((__deprecated__))
#endif

#ifdef __cplusplus
extern "C" {
#endif
	
void __invalid_operand_size(void);

#define ctz(__v)							\
	({								\
		int __ret;						\
		if (!__v)						\
			__ret = sizeof(__v) * 8;			\
		else							\
			switch (sizeof(__v)) {				\
			case sizeof(int):				\
				__ret = __builtin_ctz((unsigned int)__v); \
				break;					\
			case sizeof(long long):				\
				__ret = __builtin_ctzll(__v);		\
				break;					\
			default:					\
				__invalid_operand_size();		\
			}						\
		__ret;							\
	})

#define clz(__v)							\
	({								\
		int __ret;						\
		if (!__v)						\
			__ret = sizeof(__v) * 8;			\
		else							\
			switch (sizeof(__v)) {				\
			case sizeof(int):				\
				__ret = __builtin_clz((unsigned int)__v); \
				break;					\
			case sizeof(long long):				\
				__ret = __builtin_clzll(__v);		\
				break;					\
			default:					\
				__invalid_operand_size();		\
			}						\
		__ret;							\
	})
	
#ifdef __cplusplus
}
#endif
	
#endif /* _BOILERPLATE_COMPILER_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             /*
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _BOILERPLATE_LIBC_H
#define _BOILERPLATE_LIBC_H

#include <limits.h>

#ifdef __IN_XENO__
/*
 * Quirks for dealing with outdated libc* issues.  This header will be
 * parsed by the Xenomai implementation only, applications based on it
 * have to provide their own set of wrappers as they should decide by
 * themselves what to do when a feature is missing.
 */
#include <xeno_config.h>
#include <errno.h>
#include <boilerplate/compiler.h>

#if !HAVE_DECL_PTHREAD_PRIO_NONE
enum {
	PTHREAD_PRIO_NONE,
	PTHREAD_PRIO_INHERIT,
	PTHREAD_PRIO_PROTECT
};
#endif /* !HAVE_DECL_PTHREAD_PRIO_NONE */

#ifndef HAVE_FORK
static inline int fork(void)
{
	errno = ENOSYS;
	return -1;
}
#endif

#ifndef HAVE_PTHREAD_ATFORK
#ifndef HAVE_FORK
static inline
int pthread_atfork(void (*prepare)(void), void (*parent)(void),
		   void (*child)(void))
{
	return 0;
}
#else
#error "fork() without pthread_atfork()"
#endif
#endif /* !HAVE_PTHREAD_ATFORK */

#ifndef HAVE_PTHREAD_GETATTR_NP
static inline
int pthread_getattr_np(pthread_t th, pthread_attr_t *attr)
{
	return ENOSYS;
}
#endif /* !HAVE_PTHREAD_GETATTR_NP */

#ifndef HAVE_PTHREAD_CONDATTR_SETCLOCK
static inline
int pthread_condattr_setclock(pthread_condattr_t *__restrict__ attr,
			      clockid_t clock_id)
{
	return clock_id == CLOCK_REALTIME ? 0 : ENOSYS;
}
#endif	/* !HAVE_PTHREAD_CONDATTR_SETCLOCK */

#ifndef HAVE_PTHREAD_CONDATTR_GETCLOCK
static inline
int pthread_condattr_getclock(const pthread_condattr_t *__restrict__ attr,
			      clockid_t *__restrict__ clock_id)
{
	*clock_id = CLOCK_REALTIME;

	return 0;
}
#endif	/* !HAVE_PTHREAD_CONDATTR_GETCLOCK */

#ifndef HAVE_PTHREAD_MUTEXATTR_SETPROTOCOL
static inline
int pthread_mutexattr_setprotocol(pthread_mutexattr_t *__restrict__ attr,
				  int protocol)
{
	return protocol == PTHREAD_PRIO_NONE ? 0 : ENOSYS;
}
#endif /* !HAVE_PTHREAD_MUTEXATTR_SETPROTOCOL */

#ifndef HAVE_PTHREAD_MUTEXATTR_GETPROTOCOL
static inline
int pthread_mutexattr_getprotocol(const pthread_mutexattr_t *
				  __restrict__ attr, int *__restrict__ protocol)
{
	*protocol = PTHREAD_PRIO_NONE;

	return 0;
}
#endif /* !HAVE_PTHREAD_MUTEXATTR_GETPROTOCOL */

#ifndef HAVE_PTHREAD_ATTR_SETAFFINITY_NP
#include <sched.h>
static inline
int pthread_attr_setaffinity_np(pthread_attr_t *attr,
				size_t cpusetsize, const cpu_set_t *cpuset)
{
	if (CPU_ISSET(0, cpuset) && CPU_COUNT(cpuset) == 1)
		return 0;
	return ENOSYS;
}
#endif /* !HAVE_PTHREAD_ATTR_SETAFFINITY_NP */

#ifndef HAVE_PTHREAD_SETAFFINITY_NP
static inline
int pthread_setaffinity_np(pthread_t thread, size_t cpusetsize,
			   const cpu_set_t *cpuset)
{
	if (CPU_ISSET(0, cpuset) && CPU_COUNT(cpuset) == 1)
		return 0;
	return ENOSYS;
}
#endif /* !HAVE_PTHREAD_SETAFFINITY_NP */

#if !defined(HAVE_CLOCK_NANOSLEEP) && defined(CONFIG_XENO_MERCURY)
/*
 * Best effort for a Mercury setup based on an outdated libc lacking
 * "advanced" real-time support.  Too bad if the system clock is set
 * during sleep time. This is a non-issue for Cobalt, as the libcobalt
 * implementation will always be picked instead.
 */
__weak int clock_nanosleep(clockid_t clock_id, int flags,
			   const struct timespec *request,
			   struct timespec *remain)
{
	struct timespec now, tmp;

	tmp = *request;
	if (flags) {
		clock_gettime(CLOCK_REALTIME, &now);
		tmp.tv_sec -= now.tv_sec;
		tmp.tv_nsec -= now.tv_nsec;
		if (tmp.tv_nsec < 0) {
			tmp.tv_sec--;
			tmp.tv_nsec += 1000000000;
		}
	}

	return nanosleep(&tmp, remain);
}
#endif /* !HAVE_CLOCK_NANOSLEEP && MERCURY */

#ifndef HAVE_SCHED_GETCPU
/*
 * Might be declared in uClibc headers but not actually implemented,
 * so we make the placeholder a weak symbol.
 */
__weak int sched_getcpu(void)
{
	return 0;   /* outdated uClibc: assume uniprocessor. */
}
#endif /* !HAVE_SCHED_GETCPU */

#ifndef HAVE_SHM_OPEN
__weak int shm_open(const char *name, int oflag, mode_t mode)
{
	errno = ENOSYS;
	return -1;
}
#endif	/* !HAVE_SHM_OPEN */

#ifndef HAVE_SHM_UNLINK
__weak int shm_unlink(const char *name)
{
	errno = ENOSYS;
	return -1;
}
#endif	/* !HAVE_SHM_UNLINK */

#ifndef HAVE_PTHREAD_MUTEXATTR_SETROBUST_NP
#define pthread_mutexattr_setrobust_np(__attr, __robust)	\
	({ ENOSYS; })
#endif /* !HAVE_PTHREAD_MUTEXATTR_SETROBUST_NP */

#if !defined(HAVE_PTHREAD_SETNAME_NP) && defined(CONFIG_XENO_MERCURY)
static inline
int pthread_setname_np(pthread_t thread, const char *name)
{
	return ENOSYS;
}
#endif /* !HAVE_PTHREAD_SETNAME_NP && MERCURY */

#endif /* __IN_XENO__ */

#if defined(__COBALT_WRAP__) || defined(__IN_XENO__)
/*
 * clock_nanosleep() and pthread_setname_np() must be declared when the libc
 * does not declare them, both for compiling xenomai, and for compiling
 * applications wrapping these symbols to the libcobalt versions.
 */
#ifndef HAVE_CLOCK_NANOSLEEP
int clock_nanosleep(clockid_t clock_id, int flags,
		    const struct timespec *request,
		    struct timespec *remain);
#endif /* !HAVE_CLOCK_NANOSLEEP */

#ifndef HAVE_PTHREAD_SETNAME_NP
int pthread_setname_np(pthread_t thread, const char *name);
#endif /* !HAVE_PTHREAD_SETNAME_NP */
#endif /* __COBALT_WRAP__ || __IN_XENO__ */

#ifndef PTHREAD_STACK_DEFAULT
#define PTHREAD_STACK_DEFAULT			\
	({					\
		int __ret = PTHREAD_STACK_MIN;	\
		if (__ret < 65536)		\
			__ret = 65536;		\
		__ret;				\
	})
#endif /* !PTHREAD_STACK_DEFAULT */

#endif /* _BOILERPLATE_LIBC_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_ERRNOLIB_H
#define _XENOMAI_VXWORKS_ERRNOLIB_H

#include <errno.h>
#include <vxworks/taskLib.h>

#define OK	0
#define ERROR	(-1)

#define WIND_TASK_ERR_BASE	0x00030000
#define WIND_MEM_ERR_BASE	0x00110000
#define WIND_SEM_ERR_BASE	0x00160000
#define WIND_OBJ_ERR_BASE	0x003d0000
#define WIND_MSGQ_ERR_BASE	0x00410000
#define WIND_INT_ERR_BASE	0x00430000

#define S_objLib_OBJ_ID_ERROR		(WIND_OBJ_ERR_BASE + 0x0001)
#define S_objLib_OBJ_UNAVAILABLE	(WIND_OBJ_ERR_BASE + 0x0002)
#define S_objLib_OBJ_DELETED		(WIND_OBJ_ERR_BASE + 0x0003)
#define S_objLib_OBJ_TIMEOUT		(WIND_OBJ_ERR_BASE + 0x0004)
#define S_objLib_OBJ_NO_METHOD		(WIND_OBJ_ERR_BASE + 0x0005)

#define S_taskLib_NAME_NOT_FOUND	(WIND_TASK_ERR_BASE + 0x0065)
#define S_taskLib_TASK_HOOK_TABLE_FULL	(WIND_TASK_ERR_BASE + 0x0066)
#define S_taskLib_TASK_HOOK_NOT_FOUND	(WIND_TASK_ERR_BASE + 0x0067)
#define S_taskLib_ILLEGAL_PRIORITY	(WIND_TASK_ERR_BASE + 0x006d)

#define S_semLib_INVALID_STATE		(WIND_SEM_ERR_BASE + 0x0065)
#define S_semLib_INVALID_OPTION		(WIND_SEM_ERR_BASE + 0x0066)
#define S_semLib_INVALID_QUEUE_TYPE	(WIND_SEM_ERR_BASE + 0x0067)
#define S_semLib_INVALID_OPERATION	(WIND_SEM_ERR_BASE + 0x0068)

#define S_msgQLib_INVALID_MSG_LENGTH		(WIND_MSGQ_ERR_BASE + 0x0001)
#define S_msgQLib_NON_ZERO_TIMEOUT_AT_INT_LEVEL	(WIND_MSGQ_ERR_BASE + 0x0002)
#define S_msgQLib_INVALID_QUEUE_TYPE		(WIND_MSGQ_ERR_BASE + 0x0003)

#define S_intLib_NOT_ISR_CALLABLE	(WIND_INT_ERR_BASE + 0x0001)

#define S_memLib_NOT_ENOUGH_MEMORY	(WIND_MEM_ERR_BASE + 0x0001)
#define S_memLib_INVALID_NBYTES		(WIND_MEM_ERR_BASE + 0x0002)

#ifdef __cplusplus
extern "C" {
#endif

void printErrno(int status);

STATUS errnoSet(int status);

int errnoGet(void);

int errnoOfTaskGet(TASK_ID task_id);

STATUS errnoOfTaskSet(TASK_ID task_id, int status);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_ERRNOLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_INTLIB_H
#define _XENOMAI_VXWORKS_INTLIB_H

#include <vxworks/types.h>

#ifdef __cplusplus
extern "C" {
#endif

BOOL intContext(void);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_INTLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_SYSLIB_H
#define _XENOMAI_VXWORKS_SYSLIB_H

#include <vxworks/types.h>

#ifdef __cplusplus
extern "C" {
#endif

int sysClkRateGet(void);

STATUS sysClkRateSet(int hz);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_SYSLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_LSTLIB_H
#define _XENOMAI_VXWORKS_LSTLIB_H

#include <boilerplate/list.h>
#include <vxworks/types.h>

typedef struct LIST {
	struct pvlistobj list;
	int count;
} LIST;

typedef struct NODE {
	struct pvholder link;
	struct LIST *list;
} NODE;

static inline void lstInit(LIST *l)
{
	pvlist_init(&l->list);
	l->count = 0;
}

static inline void lstAdd(LIST *l, NODE *n)
{
	pvholder_init(&n->link);
	pvlist_append(&n->link, &l->list);
	n->list = l;
	l->count++;
}

static inline int lstCount(LIST *l)
{
	return l->count;
}

static inline void lstDelete(LIST *l, NODE *n)
{
	pvlist_remove(&n->link);
	n->list = NULL;
	l->count--;
}

static inline NODE *lstFirst(LIST *l)
{
	if (l == NULL || pvlist_empty(&l->list))
		return NULL;

	return pvlist_first_entry(&l->list, struct NODE, link);
}

static inline NODE *lstGet(LIST *l)
{
	struct NODE *n;

	if (l == NULL || pvlist_empty(&l->list))
		return NULL;

	n = pvlist_pop_entry(&l->list, struct NODE, link);
	n->list = NULL;
	l->count--;

	return n;
}

static inline void lstInsert(LIST *l, NODE *nprev, NODE *n)
{
	pvholder_init(&n->link);

	if (nprev == NULL)
		pvlist_prepend(&n->link, &l->list);
	else
		pvlist_insert(&n->link, &nprev->link);

	n->list = l;
	l->count++;
}

static inline NODE *lstLast(LIST *l)
{
	if (l == NULL || pvlist_empty(&l->list))
		return NULL;

	return pvlist_last_entry(&l->list, struct NODE, link);
}

static inline NODE *lstNext(NODE *n)
{
	if (n->list == NULL || &n->link == n->list->list.head.prev)
		return NULL;

	return container_of(n->link.next, struct NODE, link);
}

static inline NODE *lstPrevious(NODE *n)
{
	if (n->list == NULL || &n->link == n->list->list.head.next)
		return NULL;

	return container_of(n->link.prev, struct NODE, link);
}

static inline void lstFree(LIST *l)
{
	lstInit(l);
}

#ifdef __cplusplus
extern "C" {
#endif

void lstExtract(LIST *lsrc, NODE *nstart, NODE *nend, LIST *ldst);

NODE *lstNth(LIST *l, int nodenum);

NODE *lstNStep(NODE *n, int steps);

int lstFind(LIST *l, NODE *n);

void lstConcat(LIST *ldst, LIST *lsrc);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_LSTLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_TYPES_H
#define _XENOMAI_VXWORKS_TYPES_H

#include <stdint.h>

#undef STATUS
typedef int STATUS;
typedef int BOOL;

typedef unsigned int UINT;

typedef unsigned long ULONG;

#define NO_WAIT		0
#define WAIT_FOREVER	(-1)

#endif /* !_XENOMAI_VXWORKS_TYPES_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /*
 * Copyright (C) 2011 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */

#ifndef _COPPERPLATE_SEMOBJ_H
#define _COPPERPLATE_SEMOBJ_H

#include <boilerplate/compiler.h>
#include <copperplate/reference.h>

struct semobj_waitentry {
	pid_t pid;
	char name[32];
};

#ifdef CONFIG_XENO_COBALT

#include <semaphore.h>

struct semobj_corespec {
	sem_t sem;
};

#else  /* CONFIG_XENO_MERCURY */

#include <copperplate/syncobj.h>

struct semobj_corespec {
	struct syncobj sobj;
	int flags;
	int value;
};

#endif /* CONFIG_XENO_MERCURY */

struct semobj {
	struct semobj_corespec core;
	fnref_type(void (*)(struct semobj *smobj)) finalizer;
};

#define SEMOBJ_PRIO	0x1
#define SEMOBJ_PULSE	0x2
#define SEMOBJ_WARNDEL	0x4

#ifdef __cplusplus
extern "C" {
#endif

int semobj_init(struct semobj *smobj,
		int flags, int value,
		fnref_type(void (*)(struct semobj *smobj)) finalizer);

int semobj_destroy(struct semobj *smobj);

void semobj_uninit(struct semobj *smobj);

int semobj_post(struct semobj *smobj);

int semobj_broadcast(struct semobj *smobj);

int semobj_wait(struct semobj *smobj,
		const struct timespec *timeout) __must_check;

int semobj_getvalue(struct semobj *smobj, int *sval);

int semobj_inquire(struct semobj *smobj, size_t waitsz,
		   struct semobj_waitentry *waitlist,
		   int *val_r);

#ifdef __cplusplus
}
#endif

#endif /* _COPPERPLATE_SEMOBJ_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /*
 * Copyright (C) 2012 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */

#ifndef _COPPERPLATE_EVENTOBJ_H
#define _COPPERPLATE_EVENTOBJ_H

#include <boilerplate/compiler.h>
#include <copperplate/reference.h>

struct eventobj_waitentry {
	pid_t pid;
	char name[32];
};

#ifdef CONFIG_XENO_COBALT

#include <cobalt/uapi/event.h>

struct eventobj_corespec {
	cobalt_event_t event;
};

struct eventobj_wait_struct {
};

#define EVOBJ_FIFO  COBALT_EVENT_FIFO
#define EVOBJ_PRIO  COBALT_EVENT_PRIO

#define EVOBJ_ALL   COBALT_EVENT_ALL
#define EVOBJ_ANY   COBALT_EVENT_ANY

#else  /* CONFIG_XENO_MERCURY */

#include <copperplate/syncobj.h>

struct eventobj_corespec {
	struct syncobj sobj;
	unsigned int value;
	int flags;
};

struct eventobj_wait_struct {
	unsigned int value;
	int mode;
};

#define EVOBJ_FIFO  0x0
#define EVOBJ_PRIO  0x1

#define EVOBJ_ALL   0x0
#define EVOBJ_ANY   0x1

#endif /* CONFIG_XENO_MERCURY */

struct eventobj {
	struct eventobj_corespec core;
	fnref_type(void (*)(struct eventobj *evobj)) finalizer;
};

#ifdef __cplusplus
extern "C" {
#endif

int eventobj_init(struct eventobj *evobj,
		  unsigned int value, int flags,
		  fnref_type(void (*)(struct eventobj *evobj)) finalizer) __must_check;

int eventobj_destroy(struct eventobj *evobj);

void eventobj_uninit(struct eventobj *evobj);
  
int eventobj_post(struct eventobj *evobj,
		  unsigned int bits);

int eventobj_wait(struct eventobj *evobj,
		  unsigned int bits,
		  unsigned int *bits_r,
		  int mode,
		  const struct timespec *timeout) __must_check;

int eventobj_clear(struct eventobj *evobj,
		   unsigned int bits,
		   unsigned int *bits_r);

int eventobj_inquire(struct eventobj *evobj, size_t waitsz,
		     struct eventobj_waitentry *waitlist,
		     unsigned int *bits_r);

#ifdef __cplusplus
}
#endif

#endif /* _COPPERPLATE_EVENTOBJ_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */

#ifndef _COPPERPLATE_TRACEOBJ_H
#define _COPPERPLATE_TRACEOBJ_H

#include <pthread.h>

struct threadobj;

struct traceobj {
	pthread_mutex_t lock;
	pthread_cond_t join;
	const char *label;
	int nr_marks;
	int cur_mark;
	struct tracemark *marks;
	int nr_threads;
};

#define traceobj_assert(trobj, cond)					\
do {									\
	int __ret = (cond);						\
	if (!__ret)							\
		__traceobj_assert_failed(trobj, __FILE__, __LINE__, __STRING(cond)); \
} while(0)

#define traceobj_check(__trobj, __status, __expected)			\
do {									\
	if (__status != __expected)					\
		__traceobj_check_abort(__trobj, __FILE__, __LINE__, 	\
				       __status, __expected);		\
} while(0)

#define traceobj_check_warn(__trobj, __status, __expected)		\
do {									\
	if (__status != __expected)					\
		__traceobj_check_warn(__trobj, __FILE__, __LINE__, 	\
				      __status, __expected);		\
} while(0)

#define traceobj_mark(trobj, mark)	\
	__traceobj_mark(trobj, __FILE__, __LINE__, mark)

#ifdef __cplusplus
extern "C" {
#endif

int traceobj_init(struct traceobj *trobj,
		  const char *label, int nr_marks);

void traceobj_verify(struct traceobj *trobj, int tseq[], int nr_seq);

void traceobj_destroy(struct traceobj *trobj);

void traceobj_enter(struct traceobj *trobj);

void traceobj_exit(struct traceobj *trobj);

void traceobj_unwind(struct traceobj *trobj);

void traceobj_join(struct traceobj *trobj);

void __traceobj_assert_failed(struct traceobj *trobj,
			      const char *file, int line, const char *cond);

void __traceobj_check_abort(struct traceobj *trobj,
			    const char *file, int line,
			    int received, int expected);

void __traceobj_check_warn(struct traceobj *trobj,
			   const char *file, int line,
			   int received, int expected);
	
void __traceobj_mark(struct traceobj *trobj,
		     const char *file, int line, int mark);

#ifdef __cplusplus
}
#endif

#endif /* _COPPERPLATE_TRACEOBJ_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ELF          (    =  4   D"   4   	 (     p  Ȕ  Ȕ                 4   4  4                 T  T  T                                                                          p  p  p  h   h         Qtd                          Rtd              /lib/ld-linux-armhf.so.3             GNU                        GNU ݔ\50R3M#@g         GNU x;*6R&.k&%            Pzk	4(0%H          	   
                                                   #   $   &   '   (   )           *       +               ,   .   2   <9vכ|Bɭ #H bd{g 4Ͱum|AM|.N=~]:)>f@}[;AYyc>d>~|~Sk|v 5,]G zqX|9@CE~|}L\tWc׊3wT<                               ,               ;               O               y                                    i                                                                                                              *                                       h             >                                                     o             V             1             \                                    c             9             F                                                             7                                               E                       T                                    *                                                 libcobalt.so.2 _ITM_deregisterTMCloneTable __gmon_start__ _Jv_RegisterClasses _ITM_registerTMCloneTable __wrap_clock_nanosleep __wrap_pthread_join __wrap_setsockopt __wrap_bind xenomai_auto_bootstrap __wrap_pthread_attr_init __wrap_pthread_create xenomai_init _fini __wrap_recvfrom __wrap_sigwait __wrap_close __wrap_connect __wrap_socket __wrap___printf_chk __wrap_write libpthread.so.0 pthread_attr_setschedpolicy open pthread_cancel __errno_location pthread_sigmask pthread_attr_setdetachstate pthread_attr_setschedparam pthread_attr_setinheritsched read libc.so.6 exit perror __stack_chk_fail abort strlen sigemptyset sigaddset malloc __libc_start_main free ld-linux-armhf.so.3 __stack_chk_guard _edata __bss_start __bss_start__ __bss_end__ __end__ _end /usr/xenomai/lib GLIBC_2.4                                                                                  ii           /         ii           u         ii                   $            *    '       $  %  (    ,  
  0    4    8    <    @    D    H    L    P  ,  T    X    \     `    d    h  /  l  	  p  !  t  &  x  0  |  "        -                  @-  -`   Ə	ʌ` Ə	ʌX Ə	ʌP Ə	ʌH Ə	ʌ@ Ə	ʌ8 Ə	ʌ0 Ə	ʌ( Ə	ʌ  Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ  Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌx Ə	ʌp Ə	ʌh Ə	ʌ` Ə	ʌX Ə	ʌP-AOet*FFF0F&F0F / F۽BOEI  !  ~(F F'DB4%F &(F6z0DBp <F (ЧB % %FO Fd50DB #iFH%0@]  B   &-AB;hG" F"5b!!B!  F# !#L!#!#iF#I]#  #F FF   (=,B1F,$!,!,,I93F,(F \F  ȹx h(h1F h(h1F 5;h0FB6I0   H O O jFMHK~    U  0 0   R/<ꄐ     KB  + pG@   +G  BB  sY pG@   *GB#x##pA` h+@  G@ Bh PiF ]Yh]  B!
Fho -C/,QI3  % #F 0F"Oq"$0F"o$Os@0	'PI@1I"   8  # 0F!F"0FI40  I 0  I0  I,0  B!
Fho -Ci"o%#P04(I,0  kI3  ' #F 0F"Oq" (J0F"OsP0 (CI'OHFF XI|1  J 5D  FFh FP!FF0F0FLIt0  I0  I 0  Il0     -CFNFMF~D}Dv
= $4U?8FAFJFGBѽ   |  pG @-     server      Г          (  @  H  T  d  t        client  /proc/self/cmdline  socket  iddp-demo   setsockopt  bind    recvfrom    %s: received %d bytes, "%.*s" from port %d
 connect sendto  %s: sent %d bytes, "%.*s"
  pthread_create  Surfing With The Alien  Lords of Karma  Banana Mango    Psycho Monkey   Luminous Flesh Giants   Moroccan Sunset Satch Boogie    Flying In A Blue Dream  Ride    Summer Song Speed Of Light  Crystal Planet  Raspberry Jam Delta-V   Champagne?  Clouds Race Across The Sky  Engines Of Creation t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           I                   u     /                                          o؁          T  
                                      l     \              o  o   o                                                                                                                                             GCC: (Ubuntu/Linaro 4.8.4-2ubuntu1~14.04.1) 4.8.4 GCC: (Ubuntu/Linaro 4.8.2-16ubuntu3) 4.8.2 A6   aeabi ,   7-A 
A	
" .symtab .strtab .shstrtab .interp .note.ABI-tag .note.gnu.build-id .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .text .fini .rodata .ARM.exidx .eh_frame .init_array .fini_array .jcr .dynamic .got .data .bss .comment .ARM.attributes                                                    T  T                    #         p  p                     1             H                  D   o   ؁    |               N         T  T  0              V                              ^   o     	  f                k   o     	  `                z   	      \  \
                     	      l  l
                                                                                     H  H  P                                                             (                      p   Ȕ                              Д                                                                                                                                                                                                                                                  0          ]                      p        !  7                                8!  
                               &   
     d         	              1                                       T            p                        ؁            T                                                \       	     l       
                             H                                    Ȕ            Д                                                                                                                                 ^   p         a   <         ^   Ȕ         ^   `         ^            ^            d            a            a   H         p   I       ^           ^            ^            ^                                            a   P            Q          ]          9      ^   P         a            ^                           @               ^                                     ?  l         B  l        ^            ?           ?           O           ?           ?                               a                      ^            a                      ^                               ^                    8          ^           D         ^            c           a   T         ^            a                       ^   Д         o  Д        ^           }                                                              ^            ?           ^            ?                                                                    '             7             G         d          o          v          |                                                                                                                               D             _          l             ~                                                                               
                      '             O         ^             p             }           U  @         6                                                                                
  =                               6   "  +          7         N        S             j              ~                                                                                                   /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-linux-gnueabihf/lib/../lib/crt1.o $d $t bootstrap.c xenomai_bootstrap early_argc early_argv iddp-label.c fail server client __FUNCTION__.10686 msg __FUNCTION__.10699 /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-linux-gnueabihf/lib/../lib/crti.o $a call_weak_fn /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-linux-gnueabihf/lib/../lib/crtn.o crtstuff.c __JCR_LIST__ deregister_tm_clones register_tm_clones __do_global_dtors_aux completed.9528 __do_global_dtors_aux_fini_array_entry frame_dummy __frame_dummy_init_array_entry elf-init.oS __FRAME_END__ __JCR_END__ __init_array_end _DYNAMIC __init_array_start _GLOBAL_OFFSET_TABLE_ __libc_csu_fini _ITM_deregisterTMCloneTable data_start __bss_start__ __wrap_pthread_create read@@GLIBC_2.4 free@@GLIBC_2.4 __stack_chk_guard@@GLIBC_2.4 _bss_end__ _edata _fini __bss_end__ __stack_chk_fail@@GLIBC_2.4 __wrap_bind __wrap_pthread_attr_init __wrap_sigwait __wrap_clock_nanosleep xenomai_init perror@@GLIBC_2.4 __wrap_recvfrom pthread_attr_setschedparam@@GLIBC_2.4 pthread_sigmask@@GLIBC_2.4 __data_start malloc@@GLIBC_2.4 sigaddset@@GLIBC_2.4 __libc_start_main@@GLIBC_2.4 pthread_attr_setschedpolicy@@GLIBC_2.4 __wrap___printf_chk __gmon_start__ open@@GLIBC_2.4 __dso_handle exit@@GLIBC_2.4 pthread_attr_setinheritsched@@GLIBC_2.4 _IO_stdin_used strlen@@GLIBC_2.4 __wrap_close svtid __libc_csu_init xenomai_main __errno_location@@GLIBC_2.4 __wrap_socket __wrap_connect __wrap_setsockopt _end pthread_cancel@@GLIBC_2.4 _start cltid __end__ __wrap_main __bss_start xenomai_auto_bootstrap main sigemptyset@@GLIBC_2.4 _Jv_RegisterClasses __TMC_END__ _ITM_registerTMCloneTable pthread_attr_setdetachstate@@GLIBC_2.4 __wrap_pthread_join abort@@GLIBC_2.4 _init close@@GLIBC_2.4 __wrap_write                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_TICKLIB_H
#define _XENOMAI_VXWORKS_TICKLIB_H

#include <vxworks/types.h>

#ifdef __cplusplus
extern "C" {
#endif

ULONG tickGet(void);

void tickSet(ULONG ticks);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_TICKLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /*
 * Copyright (C) 2012 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_KERNLIB_H
#define _XENOMAI_VXWORKS_KERNLIB_H

#include <vxworks/types.h>

#ifdef __cplusplus
extern "C" {
#endif

STATUS kernelTimeSlice(int ticks);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_KERNLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 *
 * This file satisfies the references within the emulator code
 * mimicking a VxWorks-like API built upon the copperplate library.
 *
 * VxWorks is a registered trademark of Wind River Systems, Inc.
 */

#ifndef _XENOMAI_VXWORKS_TASKINFO_H
#define _XENOMAI_VXWORKS_TASKINFO_H

#include <vxworks/types.h>
#include <vxworks/taskLib.h>

typedef struct TASK_DESC {
	TASK_ID td_tid;
	int	td_priority;
	int	td_status;
	int	td_flags;
	char	td_name[32];
	FUNCPTR	td_entry;
	int	td_errorStatus;

	int	td_stacksize;
	char	*td_pStackBase;
	char	*td_pStackEnd;
} TASK_DESC;

#ifdef __cplusplus
extern "C" {
#endif

const char *taskName(TASK_ID task_id);

TASK_ID taskNameToId(const char *name);

TASK_ID taskIdDefault(TASK_ID task_id);

BOOL taskIsReady(TASK_ID task_id);

BOOL taskIsSuspended (TASK_ID task_id);

STATUS taskGetInfo(TASK_ID task_id, TASK_DESC *desc);

#ifdef __cplusplus
}
#endif

#endif /* !_XENOMAI_VXWORKS_TASKINFO_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /*
 * Copyright (C) 2005 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <sys/socket.h>

#ifndef _COBALT_SYS_SOCKET_H
#define _COBALT_SYS_SOCKET_H

#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif

COBALT_DECL(int, socket(int protocol_family,
			int socket_type, int protocol));

COBALT_DECL(ssize_t, recvmsg(int fd,
			     struct msghdr *msg, int flags));

COBALT_DECL(ssize_t, sendmsg(int fd,
			     const struct msghdr *msg, int flags));

COBALT_DECL(ssize_t, recvfrom(int fd, void *buf, size_t len, int flags,
			      struct sockaddr *from, socklen_t *fromlen));

COBALT_DECL(ssize_t, sendto(int fd, const void *buf, size_t len, int flags,
			    const struct sockaddr *to, socklen_t tolen));

COBALT_DECL(ssize_t, recv(int fd, void *buf,
			  size_t len, int flags));

COBALT_DECL(ssize_t, send(int fd, const void *buf,
			  size_t len, int flags));

COBALT_DECL(int, getsockopt(int fd, int level, int optname,
			    void *optval, socklen_t *optlen));

COBALT_DECL(int, setsockopt(int fd, int level, int optname,
			    const void *optval, socklen_t optlen));

COBALT_DECL(int, bind(int fd, const struct sockaddr *my_addr,
		      socklen_t addrlen));

COBALT_DECL(int, connect(int fd, const struct sockaddr *serv_addr,
			 socklen_t addrlen));

COBALT_DECL(int, listen(int fd, int backlog));

COBALT_DECL(int, accept(int fd, struct sockaddr *addr,
			socklen_t *addrlen));

COBALT_DECL(int, getsockname(int fd, struct sockaddr *name,
			     socklen_t *namelen));

COBALT_DECL(int, getpeername(int fd, struct sockaddr *name,
			     socklen_t *namelen));

COBALT_DECL(int, shutdown(int fd, int how));

#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_SYS_SOCKET_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*
 * Copyright (C) 2010 Gilles Chanteperdrix <gilles.chanteperdrix@xenomai.org>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <sys/select.h>

#ifndef _COBALT_SYS_SELECT_H
#define _COBALT_SYS_SELECT_H

#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif

COBALT_DECL(int, select(int __nfds, fd_set *__restrict __readfds,
			fd_set *__restrict __writefds,
			fd_set *__restrict __exceptfds,
			struct timeval *__restrict __timeout));
#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_SYS_SELECT_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /*
 * Copyright (C) 2013 Gilles Chanteperdrix <gilles.chanteperdrix@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_SYS_TIMERFD_H
#define _COBALT_SYS_TIMERFD_H

#pragma GCC system_header
#include_next <sys/timerfd.h>
#include <cobalt/wrappers.h>
#include <cobalt/uapi/time.h>

#ifdef __cplusplus
extern "C" {
#endif /* __cplusplus */

COBALT_DECL(int, timerfd_create(int clockid, int flags));

COBALT_DECL(int, timerfd_settime(int fd, int flags,
		const struct itimerspec *new_value,
		struct itimerspec *old_value));

COBALT_DECL(int, timerfd_gettime(int fd, struct itimerspec *curr_value));

#ifdef __cplusplus
}
#endif /* __cplusplus */

#endif /* _COBALT_SYS_TIMERFD_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*
 * Copyright (C) 2006 Gilles Chanteperdrix <gilles.chanteperdrix@xenomai.org>.
 * Copyright (C) 2007 Jan Kiszka <jan.kiszka@web.de>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <stdio.h>

#ifndef _COBALT_STDIO_H
#define _COBALT_STDIO_H

#include <stddef.h>
#include <stdarg.h>
#include <xeno_config.h>
#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif /* __cplusplus */

COBALT_DECL(int, vfprintf(FILE *stream, const char *fmt, va_list args));

#ifdef CONFIG_XENO_FORTIFY

COBALT_DECL(int, __vfprintf_chk(FILE *stream, int level,
				const char *fmt, va_list ap));

COBALT_DECL(int, __vprintf_chk(int flag,
			       const char *fmt, va_list ap));

COBALT_DECL(int, __printf_chk(int flag, const char *fmt, ...));

COBALT_DECL(int, __fprintf_chk(FILE *fp, int flag, const char *fmt, ...));

int __rt_vfprintf_chk(FILE *stream, int level,
		      const char *fmt, va_list args);

void __rt_vsyslog_chk(int priority, int level,
		      const char *fmt, va_list args);

#endif	/* CONFIG_XENO_FORTIFY */

COBALT_DECL(int, vprintf(const char *fmt, va_list args));

COBALT_DECL(int, fprintf(FILE *stream, const char *fmt, ...));

COBALT_DECL(int, printf(const char *fmt, ...));

COBALT_DECL(int, puts(const char *s));

COBALT_DECL(int, fputs(const char *s, FILE *stream));

#ifndef putchar
COBALT_DECL(int, putchar(int c));
#else
static inline int __real_putchar(int c)
{
	return putchar(c);
}
int __wrap_putchar(int c);
int __cobalt_putchar(int c);
#undef putchar
#define putchar __wrap_putchar
#endif

#ifndef fputc
COBALT_DECL(int, fputc(int c, FILE *stream));
#else
static inline int __real_fputc(int c, FILE *stream)
{
	return fputc(c, stream);
}
int __wrap_fputc(int c, FILE *stream);
int __cobalt_fputc(int c, FILE *stream);
#undef fputc
#define fputc __wrap_fputc
#endif

COBALT_DECL(size_t,
	    fwrite(const void *ptr, size_t sz, size_t nmemb, FILE *stream));

COBALT_DECL(int, fclose(FILE *stream));

int rt_vfprintf(FILE *stream, const char *format, va_list args);

int rt_vprintf(const char *format, va_list args);

int rt_fprintf(FILE *stream, const char *format, ...);

int rt_printf(const char *format, ...);

int rt_puts(const char *s);

int rt_fputs(const char *s, FILE *stream);

int rt_fputc(int c, FILE *stream);

int rt_putchar(int c);

size_t rt_fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);

void rt_syslog(int priority, const char *format, ...);

void rt_vsyslog(int priority, const char *format, va_list args);

int rt_print_init(size_t buffer_size, const char *name);

const char *rt_print_buffer_name(void);

void rt_print_flush_buffers(void);

#ifdef __cplusplus
}
#endif /* __cplusplus */

#endif /* !_COBALT_STDIO_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 /*
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_BOILERPLATE_SCHED_H
#define _COBALT_BOILERPLATE_SCHED_H

#include <cobalt/sched.h>

#endif /* _COBALT_BOILERPLATE_SCHED_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /*
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_BOILERPLATE_LIMITS_H
#define _COBALT_BOILERPLATE_LIMITS_H

#include <cobalt/uapi/kernel/limits.h>

#endif /* _COBALT_BOILERPLATE_LIMITS_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_BOILERPLATE_SIGNAL_H
#define _COBALT_BOILERPLATE_SIGNAL_H

#include <cobalt/signal.h>

/* Generates reserved signal numbers for Boilerplate/Copperplate. */
#define __SIGRSVD(n)	(SIGRTMIN + 8 + (n))

#define SIGAGENT	__SIGRSVD(0) /* Request to remote agent */
#define SIGPERIOD	__SIGRSVD(1) /* Periodic signal */

/* Generates private signal numbers for clients, up to SIGRTMAX. */
#define __SIGPRIV(n)	__SIGRSVD(8 + (n))

#define SIGSAFE_LOCK_ENTRY(__safelock)					\
  	do {								\
		push_cleanup_lock(__safelock);				\
		write_lock(__safelock);

#define SIGSAFE_LOCK_EXIT(__safelock)					\
		write_unlock(__safelock);				\
		pop_cleanup_lock(&__safelock);				\
	} while (0)

#endif /* _COBALT_BOILERPLATE_SIGNAL_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_BOILERPLATE_TRACE_H
#define _COBALT_BOILERPLATE_TRACE_H

#include <cobalt/trace.h>

#endif /* _COBALT_BOILERPLATE_TRACE_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_BOILERPLATE_WRAPPERS_H
#define _COBALT_BOILERPLATE_WRAPPERS_H

#include <cobalt/wrappers.h>

#endif /* !_COBALT_BOILERPLATE_WRAPPERS_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*
 * Copyright (C) 2006 Gilles Chanteperdrix <gilles.chanteperdrix@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <syslog.h>

#ifndef _COBALT_SYSLOG_H
#define _COBALT_SYSLOG_H

#include <stdarg.h>
#include <xeno_config.h>
#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif /* __cplusplus */

COBALT_DECL(void, syslog(int priority, const char *fmt, ...));

COBALT_DECL(void, vsyslog(int priority,
			  const char *fmt, va_list ap));

#ifdef CONFIG_XENO_FORTIFY

COBALT_DECL(void, __vsyslog_chk(int priority, int level,
				const char *fmt, va_list ap));

COBALT_DECL(void, __syslog_chk(int pri, int flag,
			       const char *fmt, ...));

#endif /* CONFIG_XENO_FORTIFY */

#ifdef __cplusplus
}
#endif /* __cplusplus */

#endif /* !_COBALT_SYSLOG_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 /*
 * Copyright (C) 2006 Gilles Chanteperdrix <gilles.chanteperdrix@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <signal.h>

#ifndef _COBALT_SIGNAL_H
#define _COBALT_SIGNAL_H

/* Re-read in case we came from selective __need* block. */
#include_next <signal.h>
#include <cobalt/wrappers.h>
#include <cobalt/uapi/signal.h>

#ifndef sigev_notify_thread_id
#define sigev_notify_thread_id	 _sigev_un._tid
#endif

#ifdef __cplusplus
extern "C" {
#endif

int cobalt_sigshadow_handler(int sig, siginfo_t *si,
			     void *ctxt);

void cobalt_sigdebug_handler(int sig, siginfo_t *si,
			     void *context);

COBALT_DECL(int, sigpending(sigset_t *set));

COBALT_DECL(int, sigwait(const sigset_t *set, int *sig));

COBALT_DECL(int, sigwaitinfo(const sigset_t *set, siginfo_t *si));

COBALT_DECL(int, sigtimedwait(const sigset_t *set, siginfo_t *si,
			      const struct timespec *timeout));

COBALT_DECL(int, kill(pid_t pid, int sig));

COBALT_DECL(int, sigqueue(pid_t pid, int sig,
			  const union sigval value));

#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_SIGNAL_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_TICKS_H
#define _COBALT_TICKS_H

#include <cobalt/uapi/kernel/types.h>

#ifdef __cplusplus
extern "C" {
#endif

xnticks_t cobalt_read_hrclock(void);

xnsticks_t cobalt_ticks_to_ns(xnsticks_t ticks);

xnsticks_t cobalt_ticks_to_ns_rounded(xnsticks_t ticks);

xnsticks_t cobalt_ns_to_ticks(xnsticks_t ns);

unsigned long long cobalt_divrem_billion(unsigned long long value,
					 unsigned long *rem);
#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_TICKS_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /*
 * Copyright (C) 2005 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <unistd.h>

#ifndef _COBALT_UNISTD_H
#define _COBALT_UNISTD_H

#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif

COBALT_DECL(ssize_t, read(int fd, void *buf, size_t nbyte));

COBALT_DECL(ssize_t, write(int fd, const void *buf, size_t nbyte));

COBALT_DECL(int, close(int fildes));

COBALT_DECL(unsigned int, sleep(unsigned int seconds));

#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_UNISTD_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    /*
 * Copyright (C) 2006 Jan Kiszka <jan.kiszka@web.de>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_TRACE_H
#define _COBALT_TRACE_H

#ifdef __cplusplus
extern "C" {
#endif

int xntrace_max_begin(unsigned long v);

int xntrace_max_end(unsigned long v);

int xntrace_max_reset(void);

int xntrace_user_start(void);

int xntrace_user_stop(unsigned long v);

int xntrace_user_freeze(unsigned long v, int once);

int xntrace_special(unsigned char id, unsigned long v);

int xntrace_special_u64(unsigned char id, unsigned long long v);

#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_TRACE_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         /*
 * Copyright (C) 2011 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_WRAPPERS_H
#define _COBALT_WRAPPERS_H

#include <boilerplate/compiler.h>

#define __stringify_1(x...)	#x
#define __stringify(x...)	__stringify_1(x)

#define __WRAP(call)		__wrap_ ## call
#define __STD(call)		__real_ ## call
#define __COBALT(call)		__cobalt_ ## call
#define __RT(call)		__COBALT(call)
#define COBALT_DECL(T, P)	\
	__typeof__(T) __RT(P);	\
	__typeof__(T) __STD(P); \
	__typeof__(T) __WRAP(P)

/*
 * 
 * Each "foo" Cobalt routine shadowing a POSIX service may be
 * overriden by an external library (see --with-cobalt-override
 * option), in which case we generate the following symbols:
 * 
 * __real_foo() => Original POSIX implementation.
 * __cobalt_foo() => Cobalt implementation.
 * __wrap_foo() => Weak alias to __cobalt_foo(), may be
 * overriden.
 *
 * In the latter case, the external library shall provide its own
 * implementation of __wrap_foo(), overriding Cobalt's foo()
 * version. The original Cobalt implementation can still be
 * referenced as __COBALT(foo).
 */
#define COBALT_IMPL(T, I, A)								\
__typeof__(T) __wrap_ ## I A __attribute__((alias("__cobalt_" __stringify(I)), weak));	\
__typeof__(T) __cobalt_ ## I A

#endif /* !_COBALT_WRAPPERS_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           /*
 * Copyright (C) 2005 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <semaphore.h>

#ifndef _COBALT_SEMAPHORE_H
#define _COBALT_SEMAPHORE_H

#include <boilerplate/atomic.h>
#include <cobalt/wrappers.h>
#include <cobalt/uapi/sem.h>

#ifdef __cplusplus
extern "C" {
#endif

COBALT_DECL(int, sem_init(sem_t *sem,
			  int pshared,
			  unsigned int value));

COBALT_DECL(int, sem_destroy(sem_t *sem));

COBALT_DECL(int, sem_post(sem_t *sem));

COBALT_DECL(int, sem_wait(sem_t *sem));

COBALT_DECL(int, sem_timedwait(sem_t *sem,
			       const struct timespec *abs_timeout));

COBALT_DECL(int, sem_trywait(sem_t *sem));

COBALT_DECL(int, sem_getvalue(sem_t *sem, int *value));

COBALT_DECL(sem_t *, sem_open(const char *name, int oflags, ...));

COBALT_DECL(int, sem_close(sem_t *sem));

COBALT_DECL(int, sem_unlink(const char *name));

int sem_init_np(sem_t *sem,
		int flags,
		unsigned int value);

int sem_broadcast_np(sem_t *sem);

#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_SEMAPHORE_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>RTCANRECV(1)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(3);
/*]]>*/
</script>
</head>
<body class="manpage" style="max-width:55em">
<div id="header">
<h1>
RTCANRECV(1) Manual Page
</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
<h2>NAME</h2>
<div class="sectionbody">
<p>rtcanrecv -
   Xenomai tool for receiving CAN messages
</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_synopsis">1. SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>rtcanrecv</strong> [&lt;can-interface&gt;] [Options]</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">2. DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>rtcanrecv</strong> is part of Xenomai. It is used to receive messages via a CAN
interface. The system must run a suitable Xenomai enabled kernel with the
respective module (xeno_native and the CAN driver).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_options">3. OPTIONS</h2>
<div class="sectionbody">
<div class="paragraph"><p>&lt;can-interface&gt; is the CAN interface file.</p></div>
<div class="paragraph"><p><strong>rtcanrecv</strong> accepts the following options:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>-f, --filter=id:mask[:id:mask]&#8230;</strong>
</dt>
<dd>
<p>
apply filter
</p>
</dd>
<dt class="hdlist1">
<strong>-e, --error=mask</strong>
</dt>
<dd>
<p>
receive error messages
</p>
</dd>
<dt class="hdlist1">
<strong>-t, --timeout=MS</strong>
</dt>
<dd>
<p>
timeout in ms
</p>
</dd>
<dt class="hdlist1">
<strong>-T, --timestamp</strong>
</dt>
<dd>
<p>
with absolute timestamp
</p>
</dd>
<dt class="hdlist1">
<strong>-R, --timestamp-rel</strong>
</dt>
<dd>
<p>
with relative timestamp
</p>
</dd>
<dt class="hdlist1">
<strong>-v, --verbose</strong>
</dt>
<dd>
<p>
be verbose
</p>
</dd>
<dt class="hdlist1">
<strong>-p, --print=MODULO</strong>
</dt>
<dd>
<p>
print every MODULO message
</p>
</dd>
<dt class="hdlist1">
<strong>-h, --help</strong>
</dt>
<dd>
<p>
this help
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">4. SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong><a href="../rtcanconfig/index.html">rtcanconfig(1)</a>, <a href="../rtcansend/index.html">rtcansend(1)</a></strong>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_authors">5. AUTHORS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>rtcanrecv</strong> was written by Wolfgang Grandegger, Jan
Kiszka and Philippe Gerum. This man page
was written by Roland Stigge.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2016-02-18 13:17:40 CET
</div>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>XENO-TEST(1)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(3);
/*]]>*/
</script>
</head>
<body class="manpage" style="max-width:55em">
<div id="header">
<h1>
XENO-TEST(1) Manual Page
</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
<h2>NAME</h2>
<div class="sectionbody">
<p>xeno-test -
   Run latency test under load
</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_synopsis">1. SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>xeno-test</strong> [ -l loadscript ] [ latency options ]</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">2. DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>xeno-test</strong> runs a series of test finishing with the latency test run
with a user script to generate load, in order to measure the best case
and worst case latencies. The default command used to generate load is
"dohell 900".</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_options">3. OPTIONS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>xeno-test</strong> accepts the following options:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>-l &lt;loadscript&gt;</strong>
</dt>
<dd>
<p>
run &lt;loadscript&gt; while running latency, in order to measure latency
under load, the <a href="../dohell/index.html">dohell(1)</a> script is provided for
this purpose, see its <a href="../dohell/index.html">manual page</a> for more details.
</p>
</dd>
<dt class="hdlist1">
<strong>other options</strong>
</dt>
<dd>
<p>
are passed to the latency test, see <a href="../latency/index.html">latency(1)</a>
for the list of supported options.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">4. SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong><a href="../dohell/index.html">dohell(1)</a>, <a href="../latency/index.html">latency(1)</a></strong>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_example">5. EXAMPLE</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><code>xeno-test -l "dohell -s 192.168.0.5 -m /mnt -l /ltp" -p 100 -g histo</code></pre>
</div></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2016-02-18 13:17:40 CET
</div>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Migrating from Xenomai 2.x to 3.x</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(3);
/*]]>*/
</script>
</head>
<body class="article" style="max-width:55em">
<div id="header">
<h1>Migrating from Xenomai 2.x to 3.x</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_configuration">1. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_user_programs_and_libraries">1.1. User programs and libraries</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
Changes in <code>xeno-config</code>
</dt>
<dd>
<p>
As with Xenomai 2.x, <code>xeno-config</code> is available for retrieving the
compilation and link flags for building Xenomai 3.x applications. This
script will work for both the Cobalt and Mercury environments
indifferently.
</p>
<div class="ulist"><ul>
<li>
<p>
Each <code>--skin=&lt;api&gt;</code> option specifier can be abbreviated as
 <code>--&lt;api&gt;</code>. For instance, <code>--psos</code> is a shorthand for <code>--skin=psos</code> on
 the command line.
</p>
</li>
<li>
<p>
Over Cobalt, only <strong>xeno-config --posix --ldflags</strong> (or <strong>--rtdm</strong> as
 an alias) returns the proper linker flags to cause POSIX routines
 invoked by the application to be wrapped to their respective Xenomai
 implementation. No other API will imply such wrapping. For this
 reason, <strong>--cobalt --ldflags</strong> should be used for linking exclusively
 against the Cobalt library (i.e. <code>libcobalt.so</code>) <strong>without</strong> symbol
 wrapping. Conversely, mentioning <strong>--posix</strong> along with other API
 switches with <strong>--ldflags</strong> will cause POSIX symbol wrapping to take
 place, e.g. use <strong>--posix --alchemy --ldflags</strong> for mixed API support
 with POSIX symbol wrapping.
</p>
</li>
<li>
<p>
Over <em>Mercury</em>, <code>--posix</code> and <code>--rtdm</code> are ignored placeholders,
   since the full POSIX API is available with the glibc and the
   threading library.
</p>
</li>
<li>
<p>
<code>--[skin=]alchemy</code> replaces the former <code>--skin=native</code> switch.
</p>
</li>
<li>
<p>
<code>--core</code> can be used to retrieve the name of the Xenomai core system
  for which <code>xeno-config</code> was generated. Possible output values are
  <code>cobalt</code> and <code>mercury</code>.
</p>
</li>
<li>
<p>
<code>--ccld</code> retrieves a C compiler command suitable for linking a
   Xenomai 3.x application.
</p>
</li>
<li>
<p>
<code>--info</code> retrieves the current system information, including the
   Xenomai release detected on the platform.
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
Auto-initialization
</dt>
<dd>
<p>
<code>--no-auto-init</code> can be passed to disable automatic initialization of
the Copperplate library when the application process enters the
<code>main()</code> routine.
</p>
</dd>
</dl></div>
<div class="paragraph" id="auto-init"><p>In such a case, the application code using any API based on the
Copperplate layer, shall call the <code>copperplate_init(int *argcp, char
*const **argvp)</code> routine manually, as part of its initialization
process, <em>before</em> any real-time service is invoked.</p></div>
<div class="paragraph"><p>This routine takes the addresses of the argument count and vector
passed to the main() routine respectively. copperplate_init() handles
the Xenomai options present in the argument vector, stripping them
out, leaving only unprocessed options on return in the vector,
updating the count accordingly.</p></div>
<div class="paragraph"><p><code>xeno-config</code> enables the Copperplate auto-init feature by default.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
x86 vsyscall support
</dt>
<dd>
<p>
The <code>--enable-x86-sep</code> configuration switch was renamed to
<code>--enable-x86-vsyscall</code> to fix a misnomer. This option should be left
enabled (default), unless <strong>linuxthreads</strong> are used instead of <strong>NPTL</strong>.
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_kernel_parameters_cobalt">1.2. Kernel parameters (Cobalt)</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
System parameters renamed
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
xeno_hal.supported_cpus &#8594; xenomai.supported_cpus
</p>
</li>
<li>
<p>
xeno_hal.clockfreq &#8594; xenomai.clockfreq
</p>
</li>
<li>
<p>
xeno_hal.disable &#8594; xenomai.state=disabled
</p>
</li>
<li>
<p>
xeno_hal.timerfreq &#8594; xenomai.timerfreq
</p>
</li>
<li>
<p>
xeno_hal.cpufreq &#8594; xenomai.cpufreq
</p>
</li>
<li>
<p>
xeno_nucleus.watchdog_timeout &#8594; xenomai.watchdog_timeout
</p>
</li>
<li>
<p>
xeno_nucleus.xenomai_gid &#8594; xenomai.allowed_group
</p>
</li>
<li>
<p>
xeno_nucleus.sysheap_size &#8594; xenomai.sysheap_size
</p>
</li>
<li>
<p>
xeno_hal.smi (x86 only) &#8594; xenomai.smi
</p>
</li>
<li>
<p>
xeno_hal.smi_mask (x86 only) &#8594; xenomai.smi_mask
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
Obsolete parameters dropped
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
xeno_rtdm.tick_arg
</p>
</li>
<li>
<p>
rtdm.devname_hashtab_size
</p>
</li>
<li>
<p>
rtdm.protocol_hashtab_size
</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Periodic timing is directly handled from the API layer in
user-space. Cobalt kernel timing is tickless.</p></div>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_the_system_state">2. Getting the system state</h2>
<div class="sectionbody">
<div class="paragraph"><p>When running Copperplate-based APIs (i.e. all but pure POSIX),
querying the state of the real-time system should be done via the new
Xenomai registery interface available with Xenomai 3.x, which is
turned on when <code>--enable-registry</code> is passed to the configuration
script for building the Xenomai libraries and programs.</p></div>
<div class="paragraph"><p>The new registry support is common to the Cobalt and Mercury cores,
with only marginal differences due to the presence (or lack of) co-
kernel in the system.</p></div>
<div class="sect2">
<h3 id="_new_fuse_based_registry_interface">2.1. New FUSE-based registry interface</h3>
<div class="paragraph"><p>The Xenomai system state is now fully exported via a FUSE-based
filesystem.  The hierarchy of the Xenomai registry is organized as
follows:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>/mount-point              /* registry fs root, defaults to /var/run/xenomai */
 /user                    /* user name */
    /session              /* shared session name or anon@&lt;pid&gt; */
      /pid                /* application (main) pid */
        /skin             /* API name: alchemy/vxworks/psos/... */
          /family         /* object class (task, semaphore, ...) */
             { exported objects... }
      /system             /* session-wide information */</code></pre>
</div></div>
<div class="paragraph"><p>Each leaf entry under a session hierarchy is normally viewable, for
retrieving the information attached to the corresponding object, such
as its state, and/or value. There can be multiple sessions hosted
under a single registry mount point.</p></div>
<div class="paragraph"><p>The /system hierarchy provides information about the current state of
the Xenomai core, aggregating data from all processes which belong to
the parent session. Typically, the status of all threads and heaps
created by the session can be retrieved.</p></div>
<div class="paragraph"><p>The registry daemon is a companion tool managing exactly one registry
mount point, which is specified by the --root option on the command
line. This daemon is automatically spawned by the registry support
code as required. There is normally no action required from users for
managing it.</p></div>
</div>
<div class="sect2">
<h3 id="_proc_xenomai_interface">2.2. /proc/xenomai interface</h3>
<div class="paragraph"><p>The /proc/xenomai interface is still available when running over the
Cobalt core, mainly for pure POSIX-based applications. The following
changes took place:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Thread status
</dt>
<dd>
<p>
All pseudo-files reporting the various thread states moved under the
new <code>sched/</code> hierarchy, i.e.
</p>
</dd>
</dl></div>
<div class="paragraph"><p><code>{sched, stat, acct}</code> &#8594; <code>sched/{threads, stat, acct}</code></p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Clocks
</dt>
<dd>
<p>
With the introduction of dynamic clock registration in the Cobalt
core, the <code>clock/</code> hierarchy was added, to reflect the current state
of all timers from the registered Xenomai clocks.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>There is no kernel-based time base management anymore with Xenomai
3.0.5. Functionally speaking, only the former <em>master</em> time base
remains, periodic timing is now controlled locally from the Xenomai
libraries in user-space.</p></div>
<div class="paragraph"><p>Xenomai 3.0.5 defines a built-in clock named <em>coreclk</em>, which has
the same properties than the former <em>master</em> time base available with
Xenomai 2.x (i.e. tickless with nanosecond resolution).</p></div>
<div class="paragraph"><p>The settings of existing clocks can be read from entries under the new
clock/ hierarchy. Active timers for each clock can be read from
entries under the new <code>timer/</code> hierarchy.</p></div>
<div class="paragraph"><p>As a consequence of these changes:</p></div>
<div class="ulist"><ul>
<li>
<p>
the information previously available from the <code>timer</code> entry is now
obtained by reading <code>clock/coreclk</code>.
</p>
</li>
<li>
<p>
the information previously available from <code>timerstat/master</code> is now
obtained by reading <code>timer/coreclk</code>.
</p>
</li>
</ul></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Core clock gravity
</dt>
<dd>
<p>
The gravity value for a Xenomai clock gives the amount of time by
which the next timer shot should be anticipated. This is a static
adjustment value, to account for the basic latency of the target
system for responding to external events. Such latency may be
introduced by hardware effects (e.g. bus or cache latency), or
software issues (e.g. code running with interrupts disabled).
</p>
</dd>
</dl></div>
<div class="paragraph"><p>The clock gravity management departs from Xenomai 2.x as follows:</p></div>
<div class="ulist"><ul>
<li>
<p>
different gravity values are applied, depending on which context a
  timer activates. This may be a real-time IRQ handler (<em>irq</em>), a RTDM
  driver task (<em>kernel</em>), or a Xenomai application thread running in
  user-space (<em>user</em>). Xenomai 2.x does not differentiate, only
  applying a global gravity value regardless of the activated context.
</p>
</li>
<li>
<p>
in addition to the legacy <code>latency</code> file which now reports
  the <em>user</em> timer gravity (in nanoseconds), i.e. used for timers
  activating user-space threads, the full gravity triplet applied to
  timers running on the core clock can be accessed by reading
  <code>clock/coreclk</code> (also in nanoseconds).
</p>
</li>
<li>
<p>
at reset, the <em>user</em> gravity for the core clock now represents the
sum of the scheduling <strong>and</strong> hardware timer reprogramming time as a
count of nanoseconds. This departs from Xenomai 2.x for which only the
former was accounted for as a global gravity value, regardless of the
target context for the timer.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The following command reports the current gravity triplet for the
target system, along with the setup information for the core timer:</p></div>
<div class="listingblock">
<div class="content">
<pre><code># cat xenomai/clock/coreclk
gravity: irq=848 kernel=8272 user=35303
devices: timer=decrementer, clock=timebase
 status: on+watchdog
  setup: 151
  ticks: 220862243033</code></pre>
</div></div>
<div class="paragraph"><p>Conversely, writing to this file manually changes the gravity values
of the Xenomai core clock:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>    /* change the user gravity (default) */
# echo 3000 &gt; /proc/xenomai/clock/coreclck
    /* change the IRQ gravity */
# echo 1000i &gt; /proc/xenomai/clock/coreclck
    /* change the user and kernel gravities */
# echo "2000u 1000k" &gt; /proc/xenomai/clock/coreclck</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>interfaces</code> removed
</dt>
<dd>
<p>
Only the POSIX and RTDM APIs remain implemented directly in kernel
space, and are always present when the Cobalt core enabled in the
configuration. All other APIs are implemented in user-space over the
Copperplate layer. This makes the former <code>interfaces</code> contents
basically useless, since the corresponding information for the
POSIX/RTDM interfaces can be obtained via <code>sched/threads</code>
unconditionally.
</p>
</dd>
<dt class="hdlist1">
<code>registry/usage</code> changed format
</dt>
<dd>
<p>
The new print out is &lt;used slot count&gt;/&lt;total slot count&gt;.
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_binary_object_features">3. Binary object features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_loading_xenomai_libraries_dynamically">3.1. Loading Xenomai libraries dynamically</h3>
<div class="paragraph"><p>The new <code>--enable-dlopen-libs</code> configuration switch must be turned on
to allow Xenomai libaries to be dynamically loaded via dlopen(3).</p></div>
<div class="paragraph"><p>This replaces the former <code>--enable-dlopen-skins</code> switch. Unlike the
latter, <code>--enable-dlopen-libs</code> does not implicitly disable support for
thread local storage, but rather selects a suitable TLS model
(i.e. <em>global-dynamic</em>).</p></div>
</div>
<div class="sect2">
<h3 id="_thread_local_storage">3.2. Thread local storage</h3>
<div class="paragraph"><p>The former <code>--with-__thread</code> configuration switch was renamed
<code>--enable-tls</code>.</p></div>
<div class="paragraph"><p>As mentioned earlier, TLS is now available to dynamically loaded
Xenomai libraries, e.g. <code>--enable-tls --enable-dlopen-libs</code> on a
configuration line is valid. This would select the <em>global-dynamic</em>
TLS model instead of <em>initial-exec</em>, to make sure all thread-local
variables may be accessed from any code module.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_process_level_management">4. Process-level management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_main_thread_shadowing">4.1. Main thread shadowing</h3>
<div class="paragraph"><p>Any application linked against <code>libcobalt</code> has its main thread
attached to the real-time system automatically, this operation is
called <em>auto-shadowing</em>. As a side-effect, the entire process&#8217;s memory
is locked, for current and future mappings
(i.e. <code>mlockall(MCL_CURRENT|MCL_FUTURE)</code>).</p></div>
</div>
<div class="sect2">
<h3 id="_shadow_signal_handler">4.2. Shadow signal handler</h3>
<div class="paragraph"><p>Xenomai&#8217;s <code>libcobalt</code> installs a handler for the SIGWINCH (aka
<em>SIGSHADOW</em>) signal. This signal may be sent by the Cobalt core to any
real-time application, for handling internal duties.</p></div>
<div class="paragraph"><p>Applications are allowed to interpose on the SIGSHADOW handler,
provided they first forward all signal notifications to this routine,
then eventually handle all events the Xenomai handler won&#8217;t process.</p></div>
<div class="paragraph"><p>This handler was renamed from <code>xeno_sigwinch_handler()</code> (Xenomai 2.x)
to <code>cobalt_sigshadow_handler()</code> in Xenomai 3.x. The function prototype
did not change though, i.e.:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>int cobalt_sigshadow_handler(int sig, siginfo_t *si, void *ctxt)</code></pre>
</div></div>
<div class="paragraph"><p>A non-zero value is returned whenever the event was handled internally
by the Xenomai system.</p></div>
</div>
<div class="sect2">
<h3 id="_debug_signal_handler">4.3. Debug signal handler</h3>
<div class="paragraph"><p>Xenomai&#8217;s <code>libcobalt</code> installs a handler for the SIGXCPU (aka
<em>SIGDEBUG</em>) signal. This signal may be sent by the Cobalt core to any
real-time application, for notifying various debug events.</p></div>
<div class="paragraph"><p>Applications are allowed to interpose on the SIGDEBUG handler,
provided they eventually forward all signal notifications they won&#8217;t
process to the Xenomai handler.</p></div>
<div class="paragraph"><p>This handler was renamed from <code>xeno_handle_mlock_alert()</code> (Xenomai
2.x) to <code>cobalt_sigdebug_handler()</code> in Xenomai 3.x. The function
prototype did not change though, i.e.:</p></div>
<div class="paragraph"><p><code>void cobalt_sigdebug_handler(int sig, siginfo_t *si, void *ctxt)</code></p></div>
</div>
<div class="sect2">
<h3 id="_copperplate_auto_initialization">4.4. Copperplate auto-initialization</h3>
<div class="paragraph"><p>Copperplate is a library layer which mediates between the real-time
core services available on the platform, and the API exposed to the
application. It provides typical programming abstractions for
emulating real-time APIs. All non-POSIX APIs are based on Copperplate
services (e.g. <em>alchemy</em>, <em>psos</em>, <em>vxworks</em>).</p></div>
<div class="paragraph"><p>When Copperplate is built for running over the Cobalt core, it sits on
top of the <code>libcobalt</code> library. Conversely, it is directly stacked on
top of the <strong>glibc</strong> or <strong>uClibc</strong> when built for running over the Mercury
core.</p></div>
<div class="paragraph"><p>Normally, Copperplate should initialize from a call issued by the
<code>main()</code> application routine. To make this process transparent for the
user, the <code>xeno-config</code> script emits link flags which temporarily
overrides the <code>main()</code> routine with a Copperplate-based replacement,
running the proper initialization code as required, before branching
back to the user-defined application entry point.</p></div>
<div class="paragraph"><p>This behavior may be disabled by passing the
<a href="#auto-init"><code>--no-auto-init</code></a> option.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rtdm_interface_changes">5. RTDM interface changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_files_renamed">5.1. Files renamed</h3>
<div class="ulist"><ul>
<li>
<p>
Redundant prefixes were removed from the following files:
</p>
</li>
</ul></div>
<div class="paragraph"><p>rtdm/rtdm_driver.h &#8594; rtdm/driver.h</p></div>
<div class="paragraph"><p>rtdm/rtcan.h &#8594; rtdm/can.h</p></div>
<div class="paragraph"><p>rtdm/rtserial.h &#8594; rtdm/serial.h</p></div>
<div class="paragraph"><p>rtdm/rttesting.h &#8594; rtdm/testing.h</p></div>
<div class="paragraph"><p>rtdm/rtipc.h &#8594; rtdm/ipc.h</p></div>
</div>
<div class="sect2">
<h3 id="_driver_api">5.2. Driver API</h3>
<div class="sect3">
<h4 id="_new_device_description_model">5.2.1. New device description model</h4>
<div class="paragraph"><p>Several changes have taken place in the device description passed to
<code>rtdm_dev_register()</code> (i.e. <code>struct rtdm_device</code>). Aside of fixing
consistency issues, the bulk of changes is aimed at narrowing the gap
between the regular Linux device driver model and RTDM.</p></div>
<div class="paragraph"><p>To this end, RTDM in Xenomai 3 shares the Linux namespace for named
devices, which are now backed by common character device objects from
the regular Linux device model. As a consequence of this, file
descriptors obtained on named RTDM devices are regular file
descriptors, visible from the <code>/proc/&lt;pid&gt;/fd</code> interface.</p></div>
<div class="sect4">
<h5 id="_named_device_description">Named device description</h5>
<div class="paragraph"><p>The major change required for supporting this closer integration of
RTDM into the regular Linux driver model involved splitting the device
driver properties from the device instance definitions, which used to
be combined in Xenomai 2.x into the <code>rtdm_device</code> descriptor.</p></div>
<div class="listingblock">
<div class="title">Xenomai 2.x named device description</div>
<div class="content">
<pre><code>static struct rtdm_device foo_device0 = {
        .struct_version         =       RTDM_DEVICE_STRUCT_VER,
        .device_flags           =       RTDM_NAMED_DEVICE|RTDM_EXCLUSIVE,
        .device_id              =       0
        .context_size           =       sizeof(struct foo_context),
        .ops = {
                .open           =       foo_open,
                .ioctl_rt       =       foo_ioctl_rt,
                .ioctl_nrt      =       foo_ioctl_nrt,
                .close          =       foo_close,
        },
        .device_class           =       RTDM_CLASS_EXPERIMENTAL,
        .device_sub_class       =       RTDM_SUBCLASS_FOO,
        .profile_version        =       42,
        .device_name            =       "foo0",
        .driver_name            =       "foo driver",
        .driver_version         =       RTDM_DRIVER_VER(1, 0, 0),
        .peripheral_name        =       "Ultra-void IV board driver",
        .proc_name              =       device.device_name,
        .provider_name          =       "Whoever",
};

static struct rtdm_device foo_device1 = {
        .struct_version         =       RTDM_DEVICE_STRUCT_VER,
        .device_flags           =       RTDM_NAMED_DEVICE|RTDM_EXCLUSIVE,
        .device_id              =       1
        .context_size           =       sizeof(struct foo_context),
        .ops = {
                .open           =       foo_open,
                .ioctl_rt       =       foo_ioctl_rt,
                .ioctl_nrt      =       foo_ioctl_nrt,
                .close          =       foo_close,
        },
        .device_class           =       RTDM_CLASS_EXPERIMENTAL,
        .device_sub_class       =       RTDM_SUBCLASS_FOO,
        .profile_version        =       42,
        .device_name            =       "foo1",
        .device_data            =       NULL,
        .driver_name            =       "foo driver",
        .driver_version         =       RTDM_DRIVER_VER(1, 0, 0),
        .peripheral_name        =       "Ultra-void IV board driver",
        .proc_name              =       device.device_name,
        .provider_name          =       "Whoever",
};

foo0.device_data = &amp;some_driver_data0;
ret = rtdm_dev_register(&amp;foo0);
...
foo1.device_data = &amp;some_driver_data1;
ret = rtdm_dev_register(&amp;foo1);</code></pre>
</div></div>
<div class="paragraph"><p>The legacy description above would only create "virtual" device
entries, private to the RTDM device namespace, with no visible
counterparts into the Linux device namespace.</p></div>
<div class="listingblock">
<div class="title">Xenomai 3.x named device description</div>
<div class="content">
<pre><code>static struct rtdm_driver foo_driver = {
        .profile_info           =       RTDM_PROFILE_INFO(foo,
                                                          RTDM_CLASS_EXPERIMENTAL,
                                                          RTDM_SUBCLASS_FOO,
                                                          42),
        .device_flags           =       RTDM_NAMED_DEVICE|RTDM_EXCLUSIVE,
        .device_count           =       2,
        .context_size           =       sizeof(struct foo_context),
        .ops = {
                .open           =       foo_open,
                .ioctl_rt       =       foo_ioctl_rt,
                .ioctl_nrt      =       foo_ioctl_nrt,
                .close          =       foo_close,
        },
};

static struct rtdm_device foo_devices[2] = {
        [ 0 ... 1 ] = {
                .driver = &amp;foo_driver,
                .label = "foo%d",
        },
};

MODULE_VERSION("1.0.0");
MODULE_DESCRIPTION("Ultra-void IV board driver");
MODULE_AUTHOR'"Whoever");

foo_devices[0].device_data = &amp;some_driver_data0;
ret = rtdm_dev_register(&amp;foo_devices[0]);
...
foo_devices[1].device_data = &amp;some_driver_data1;
ret = rtdm_dev_register(&amp;foo_devices[1]);</code></pre>
</div></div>
<div class="paragraph"><p>The current description above will cause the device nodes
/dev/rtdm/foo0 and /dev/rtdm/foo1 to be created in the Linux device
namespace. Application may open these device nodes for interacting
with the RTDM driver, as they would do with any regular <em>chrdev</em>
driver.</p></div>
</div>
<div class="sect4">
<h5 id="_protocol_device_description">Protocol device description</h5>
<div class="paragraph"><p>Similarly, the registration data for protocol devices have been
changed to follow the new generic layout:</p></div>
<div class="listingblock">
<div class="title">Xenomai 2.x protocol device description</div>
<div class="content">
<pre><code>static struct rtdm_device foo_device = {
        .struct_version =       RTDM_DEVICE_STRUCT_VER,
        .device_flags   =       RTDM_PROTOCOL_DEVICE,
        .context_size   =       sizeof(struct foo_context),
        .device_name    =       "foo",
        .protocol_family=       PF_FOO,
        .socket_type    =       SOCK_DGRAM,
        .socket_nrt     =       foo_socket,
        .ops = {
                .close_nrt      =       foo_close,
                .recvmsg_rt     =       foo_recvmsg,
                .sendmsg_rt     =       foo_sendmsg,
                .ioctl_rt       =       foo_ioctl,
                .ioctl_nrt      =       foo_ioctl,
                .read_rt        =       foo_read,
                .write_rt       =       foo_write,
                .select_bind    =       foo_select,
        },
        .device_class           =       RTDM_CLASS_EXPERIMENTAL,
        .device_sub_class       =       RTDM_SUBCLASS_FOO,
        .profile_version        =       1,
        .driver_name            =       "foo",
        .driver_version         =       RTDM_DRIVER_VER(1, 0, 0),
        .peripheral_name        =       "Unexpected protocol driver",
        .proc_name              =       device.device_name,
        .provider_name          =       "Whoever",
        .device_data            =       &amp;some_driver_data,
};

ret = rtdm_dev_register(&amp;foo_device);
...</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Xenomai 3.x protocol device description</div>
<div class="content">
<pre><code>static struct rtdm_driver foo_driver = {
        .profile_info           =       RTDM_PROFILE_INFO(foo,
                                                          RTDM_CLASS_EXPERIMENTAL,
                                                          RTDM_SUBCLASS_FOO,
                                                          1),
        .device_flags           =       RTDM_PROTOCOL_DEVICE,
        .device_count           =       1,
        .context_size           =       sizeof(struct foo_context),
        .protocol_family        =       PF_FOO,
        .socket_type            =       SOCK_DGRAM,
        .ops = {
                .socket         =       foo_socket,
                .close          =       foo_close,
                .recvmsg_rt     =       foo_recvmsg,
                .sendmsg_rt     =       foo_sendmsg,
                .ioctl_rt       =       foo_ioctl,
                .ioctl_nrt      =       foo_ioctl,
                .read_rt        =       foo_read,
                .write_rt       =       foo_write,
                .select         =       foo_select,
        },
};

static struct rtdm_device foo_device = {
        .driver = &amp;foo_driver,
        .label = "foo",
        .device_data = &amp;some_driver_data,
};

ret = rtdm_dev_register(&amp;foo_device);
...

MODULE_VERSION("1.0.0");
MODULE_DESCRIPTION("Unexpected protocol driver");
MODULE_AUTHOR'"Whoever");</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<code>.device_count</code> has been added to reflect the (maximum) number of
  device instances which may be managed by the driver. This
  information is used to dynamically reserve a range of major/minor
  numbers for named RTDM devices in the Linux device namespace, by a
  particular driver.  Device minors are assigned to RTDM device
  instances in order of registration starting from minor #0, unless
  RTDM_FIXED_MINOR is present in the device flags. In the latter case,
  rtdm_device.minor is used verbatim by the RTDM core when registering
  the device.
</p>
</li>
<li>
<p>
<code>.device_id</code> was removed from the device description, as the minor
  number it was most commonly holding is now available from a call to
  rtdm_fd_minor(). Drivers should use <code>.device_data</code> for storing
  private information attached to device instances.
</p>
</li>
<li>
<p>
<code>.struct_version</code> was dropped, as it provided no additional feature
  to the standard module versioning scheme.
</p>
</li>
<li>
<p>
<code>.proc_name</code> was dropped, as it is redundant with the device
  name. Above all, using a /proc information label different from the
  actual device name is unlikely to be a good idea.
</p>
</li>
<li>
<p>
<code>.device_class</code>, <code>.device_sub_class</code> and <code>.profile_version</code> numbers
  have been grouped in a dedicated profile information descriptor
  (<code>struct rtdm_profile_info</code>), one <strong>must</strong> initialize using the
  <code>RTDM_PROFILE_INFO()</code> macro.
</p>
</li>
<li>
<p>
<code>.driver_name</code> was dropped, as it adds no value to the plain module
  name (unless the module name is deliberately obfuscated, that is).
</p>
</li>
<li>
<p>
<code>.peripheral_name</code> was dropped, as this information should be
  conveyed by MODULE_DESCRIPTION().
</p>
</li>
<li>
<p>
<code>.provider_name</code> was dropped, as this information should be conveyed
  by MODULE_AUTHOR().
</p>
</li>
<li>
<p>
<code>.driver_version</code> was dropped, as this information should be
  conveyed by MODULE_VERSION().
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_of_file_descriptors">5.2.2. Introduction of file descriptors</h4>
<div class="paragraph"><p>Xenomai 3 introduces a file descriptor abstraction for RTDM
drivers. For this reason, all RTDM driver handlers and services which
used to receive a <code>user_info</code> opaque argument describing the calling
context, now receive a <code>rtdm_fd</code> pointer standing for the target file
descriptor for the operation.</p></div>
<div class="paragraph"><p>As a consequence of this:</p></div>
<div class="ulist"><ul>
<li>
<p>
The <code>rtdm_context_get/put()</code> call pair has been replaced by
  <code>rtdm_fd_get/put()</code>.
</p>
</li>
<li>
<p>
Likewise, the <code>rtdm_context_lock/unlock()</code> call pair has been
  replaced by <code>rtdm_fd_lock/unlock()</code>.
</p>
</li>
<li>
<p>
<code>rtdm_fd_to_private()</code> is available to fetch the context-private
  memory allocated by the driver for a particular RTDM file
  descriptor. Conversely, <code>rtdm_private_to_fd()</code> returns the file
  descriptor owning a particular context-private memory area.
</p>
</li>
<li>
<p>
+rtdm_fd_minor() retrieves the minor number assigned to the current
  named device instance using its file descriptor.
</p>
</li>
<li>
<p>
<code>xenomai/rtdm/open_files</code> and <code>xenomai/rtdm/fildes</code> now solely
  report file descriptors obtained using the driver-to-driver API.
  RTDM file descriptors obtained from applications appear under the
  regular /proc/&lt;pid&gt;/fd hierarchy. All RTDM file descriptors obtained
  by an application are automatically released when the latter exits.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/caution.png" alt="Caution" />
</td>
<td class="content">Because RTDM file descriptors may be released and destroyed
asynchronously, rtdm_fd_get() and rtdm_fd_lock() may return -EIDRM if
a file descriptor fetched from some driver-private registry becomes
stale prior to calling these services. Typically, this may happen if
the descriptor is released from the &#8594;close() handler implemented by
the driver. Therefore, make sure to always carefully check the return
value of these services.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">Unlike Xenomai 2.x, RTDM file descriptors returned to Xenomai 3
applications fall within the regular Linux range. Each open RTDM
connection is actually mapped over a regular file descriptor, which
RTDM services from <em>libcobalt</em> recognize and handle.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_updated_device_operation_descriptor">5.2.3. Updated device operation descriptor</h4>
<div class="paragraph"><p>As visible from the previous illustrations, a few handlers have been
moved to the device operation descriptor, some dropped, other renamed,
mainly for the sake of consistency:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>.select_bind</code> was renamed as <code>.select</code> in the device operation
  descriptor.
</p>
</li>
<li>
<p>
<code>.open_rt</code> was dropped, and <code>.open_nrt</code> renamed as <code>.open</code>.  Opening
  a named device instance always happens from secondary mode. In
  addition, the new handler is now part of the device operation
  descriptor <code>.ops</code>.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Opening a device instance most often requires allocating resources
managed by the Linux kernel (memory mappings, DMA etc), which is only
available to regular calling contexts.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Likewise, <code>.socket_rt</code> was dropped, and <code>.socket_nrt</code> renamed as
  <code>.socket</code>. Opening a protocol device instance always happens from
  secondary mode. In addition, the new handler is now part of the
  device operation descriptor <code>.ops</code>.
</p>
</li>
<li>
<p>
As a consequence of the previous changes, <code>.close_rt</code> was dropped,
  and <code>.close_nrt</code> renamed as <code>.close</code>. Closing a device instance
  always happens from secondary mode.
</p>
</li>
<li>
<p>
.open, .socket and .close handlers have become optional in Xenomai
  3.x.
</p>
</li>
<li>
<p>
The device operation descriptor <code>.ops</code> shows two new members, namely
  <code>.mmap</code> for handling memory mapping requests to the RTDM driver, and
  <code>get_unmapped_area</code>, mainly for supporting such memory mapping
  operations in MMU-less configurations. These handlers - named after
  the similar handlers defined in the regular file_operation
  descriptor - always operate from secondary mode on behalf of the
  calling task context, so that they may invoke regular kernel
  services safely.
</p>
</li>
</ul></div>
<div class="admonitionblock" id="rtdm-mmap">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">See the documentation in the
<a href="http://xenomai.org/documentation/xenomai-3/html/xeno3prm/">Programming
Reference Manual</a> covering the device registration and operation
handlers for a complete description.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_changes_to_rtdm_services">5.2.4. Changes to RTDM services</h4>
<div class="ulist"><ul>
<li>
<p>
rtdm_dev_unregister() loses the poll_delay argument, and its return
  value. Instead, this service waits indefinitely for all ongoing
  connection to be drop prior to unregistering the device. The new
  prototype is therefore:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>void rtdm_dev_unregister(struct rtdm_device *device);</code></pre>
</div></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Drivers are most often not willing to deal with receiving a device
busy condition from a module exit routine (which is the place devices
should be unregistered from).  Drivers which really want to deal with
such condition should simply use module refcounting in their own code.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
rtdm_task_init() shall be called from secondary mode.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Since Xenomai 3, rtdm_task_init() involves creating a regular kernel
thread, which will be given real-time capabilities, such as running
under the control of the Cobalt kernel. In order to invoke standard
kernel services, rtdm_task_init() must be called from a regular Linux
kernel context.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
rtdm_task_join() has been introduced to wait for termination of a
  RTDM task regardless of the caller&#8217;s execution mode, which may be
  primary or secondary. In addition, rtdm_task_join() does not need to
  poll for such event unlike rtdm_task_join_nrt().
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>rtdm_task_join() supersedes rtdm_task_join_nrt() feature-wise with
less usage restrictions, therefore the latter has become pointless. It
is therefore deprecated and will be phased out in the next release.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
A RTDM task cannot be forcibly removed from the scheduler by another
  thread for immediate deletion. Instead, the RTDM task is notified
  about a pending cancellation request, which it should act upon when
  detected. To this end, RTDM driver tasks should call the new
  <code>rtdm_task_should_stop()</code> service to detect such notification from
  their work loop, and exit accordingly.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Since Xenomai 3, a RTDM task is based on a regular kernel thread with
real-time capabilities when controlled by the Cobalt kernel. The Linux
kernel requires kernel threads to exit at their earliest convenience
upon notification, which therefore applies to RTDM tasks as well.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<code>rtdm_task_set_period()</code> now accepts a start date for the periodic
timeline. Zero can be passed to emulate the previous call form,
setting the first release point when the first period after the
current date elapses.
</p>
</li>
<li>
<p>
<code>rtdm_task_wait_period()</code> now copies back the count of overruns into
a user-provided variable if -ETIMEDOUT is returned. NULL can be passed
to emulate the previous call form, discarding this information.
</p>
</li>
<li>
<p>
Both <code>rtdm_task_set_period()</code> and <code>rtdm_task_wait_period()</code> may be
  invoked over a Cobalt thread context.
</p>
</li>
<li>
<p>
RTDM_EXECUTE_ATOMICALLY() is deprecated and will be phased out in
  the next release. Drivers should prefer the newly introduced RTDM
  wait queues, or switch to the Cobalt-specific
  cobalt_atomic_enter/leave() call pair, depending on the use case.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>This construct is not portable to a native implementation of RTDM, and
may be replaced by other means. The usage patterns of
RTDM_EXECUTE_ATOMICALLY() used to be:</p></div>
<div class="ulist"><ul>
<li>
<p>
somewhat abusing the big nucleus lock (i.e. nklock) grabbed by
  RTDM_EXECUTE_ATOMICALLY(), for serializing access to a section that
  should be given its own lock instead, improving concurrency in the
  same move. Such section does not call services from the Xenomai
  core, and does NOT specifically require the nucleus lock to be
  held. In this case, a RTDM lock (rtdm_lock_t) should be used to
  protect the section instead of RTDM_EXECUTE_ATOMICALLY().
</p>
</li>
<li>
<p>
protecting a section which calls into the Xenomai core, which
  exhibits one or more of the following characteristics:
</p>
<div class="ulist"><ul>
<li>
<p>
Some callee within the section may require the nucleus lock to
      be held on entry (e.g. Cobalt registry lookup). In what has to
      be a Cobalt-specific case, the new cobalt_atomic_enter/leave()
      call pair can replace RTDM_EXECUTE_ATOMICALLY(). However, this
      construct remains by definition non-portable to Mercury.
</p>
</li>
<li>
<p>
A set-condition-and-wakeup pattern has to be carried out
      atomically. In this case, RTDM_EXECUTE_ATOMICALLY() can be
      replaced by the wakeup side of a RTDM wait queue introduced in
      Xenomai 3 (e.g. rtdm_waitqueue_signal/broadcast()).
</p>
</li>
<li>
<p>
A test-condition-and-wait pattern has to be carried out
      atomically. In this case, RTDM_EXECUTE_ATOMICALLY() can be
      replaced by the wait side of a RTDM wait queue introduced in
      Xenomai 3 (e.g. rtdm_wait_condition()).
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>Please refer to kernel/drivers/ipc/iddp.c for an illustration of the
RTDM wait queue usage.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
rtdm_irq_request/free() and rtdm_irq_enable/disable() call pairs
  must be called from a Linux task context, which is a restriction
  that did not exist previously with Xenomai 2.x.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Recent evolutions of the Linux kernel with respect to IRQ management
involve complex processing for basic operations
(e.g. enabling/disabling the interrupt line) with some interrupt types
like MSI. Such processing cannot be made dual-kernel safe at a
reasonable cost, without encurring measurable latency or significant
code updates in the kernel.</p></div>
<div class="paragraph"><p>Since allocating, releasing, enabling or disabling real-time
interrupts is most commonly done from driver initialization/cleanup
context already, the Cobalt core has simply inherited those
requirements from the Linux kernel.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
The leading <em>user_info</em> argument to rtdm_munmap() has been
  removed.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>With the introduction of RTDM file descriptors (see below) replacing
all <em>user_info</em> context pointers, this argument has become irrelevant,
since this operation is not related to any file descriptor, but rather
to the current address space.</p></div>
</div></div>
<div class="paragraph"><p>The new prototype for this routine is therefore</p></div>
<div class="listingblock">
<div class="content">
<pre><code>int rtdm_munmap(void *ptr, size_t len);</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Additional memory mapping calls
</p>
</li>
</ul></div>
<div class="paragraph"><p>The new following routines are available to RTDM drivers, for mapping
memory over a user address space. They are intended to be called from
a &#8594;mmap() handler:</p></div>
<div class="ulist"><ul>
<li>
<p>
rtdm_mmap_kmem() for mapping logical kernel memory (i.e. having
  a direct physical mapping).
</p>
</li>
<li>
<p>
rtdm_mmap_vmem() for mapping purely virtual memory (i.e. with no
  direct physical mapping).
</p>
</li>
<li>
<p>
rtdm_mmap_iomem() for mapping I/O memory.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>static int foo_mmap(struct rtdm_fd *fd, struct vm_area_struct *vma)
{
        ...
        switch (memory_type) {
        case MEM_PHYSICAL:
                ret = rtdm_mmap_iomem(vma, addr);
                break;
        case MEM_LOGICAL:
                ret = rtdm_mmap_kmem(vma, (void *)addr);
                break;
        case MEM_VIRTUAL:
                ret = rtdm_mmap_vmem(vma, (void *)addr);
                break;
        default:
                return -EINVAL;
        }
        ...
}</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
the rtdm_nrtsig API has changed, the rtdm_nrtsig_init() function no
  longer returns errors, it has the void return type. The rtdm_nrtsig_t
  type has changed from an integer to a structure. In consequence, the
  nrtsig handler first argument is now a pointer to the rtdm_nrtsig_t
  structure.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Recent versions of the I-pipe patch support an ipipe_post_work_root()
service, which has the advantage over the VIRQ support, that it does not
require allocating one different VIRQ for each handler. As a consequence
drivers may use as many rtdm_nrtsig_t structures as they like, there is
no chance of running out of VIRQs.</p></div>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>The new relevant prototypes are therefore:</code></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><code>typedef void (*rtdm_nrtsig_handler_t)(rtdm_nrtsig_t *nrt_sig, void *arg);

void rtdm_nrtsig_init(rtdm_nrtsig_t *nrt_sig,
     rtdm_nrtsig_handler_t handler, void *arg);</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
a new rtdm_schedule_nrt_work() was added to allow scheduling a Linux
  work queue from primary mode.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Scheduling a Linux workqueue maybe a convenient way for adriver to recover
for an error which requires synchronization with Linux. Typically, recovering
from a PCI error may involve accessing the PCI config space, which requires
access to a Linux spinlock so can not be done from primary mode.</p></div>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>The prototype of this new service is:</code></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><code>void rtdm_schedule_nrt_work(struct work_struct *work);</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_adaptive_syscalls">5.2.5. Adaptive syscalls</h4>
<div class="paragraph"><p><code>ioctl()</code>, <code>read()</code>, <code>write()</code>, <code>recvmsg()</code> and <code>sendmsg()</code> have
become conforming RTDM calls, which means that Xenomai threads running
over the Cobalt core will be automatically switched to primary mode
prior to running the driver handler for the corresponding request.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Real-time handlers from RTDM drivers serve time-critical requests by
definition, which makes them preferred targets of adaptive calls over
non real-time handlers.</p></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">This behavior departs from Xenomai 2.x, which would run the call from
the originating context instead (e.g. <code>ioctl_nrt()</code> would be fired for
a caller running in secondary mode, and conversely <code>ioctl_rt()</code> would
be called for a request issued from primary mode).</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">RTDM drivers implementing differentiated <code>ioctl()</code> support for both
domains should serve all real-time only requests from <code>ioctl_rt()</code>,
returning <code>-ENOSYS</code> for any unrecognized request, which will cause the
adaptive switch to take place automatically to the <code>ioctl_nrt()</code>
handler. The <code>ioctl_nrt()</code> should then implement all requests which
may be valid from the regular Linux domain exclusively.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_application_interface">5.3. Application interface</h3>
<div class="paragraph"><p>Unlike with Xenomai 2.x, named RTDM device nodes in Xenomai 3 are
visible from the Linux device namespace. These nodes are automatically
created by the <em>hotplug</em> kernel facility. Application must open these
device nodes for interacting with RTDM drivers, as they would do with
any regular <em>chrdev</em> driver.</p></div>
<div class="paragraph"><p>All RTDM device nodes are created under the <code>rtdm/</code> sub-root from the
standard <code>/dev</code> hierarchy, to eliminate potential name clashes with
standard drivers.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/important.png" alt="Important" />
</td>
<td class="content">Enabling DEVTMPFS in the target kernel is recommended so that the
standard <code>/dev</code> tree immediately reflects updates to the RTDM device
namespace. You may want to enable CONFIG_DEVTMPFS and
CONFIG_DEVTMPFS_MOUNT.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Opening a named device instance with Xenomai 2.x</div>
<div class="content">
<pre><code>fd = open("foo", O_RDWR);
   or
fd = open("/dev/foo", O_RDWR);</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Opening a named device instance with Xenomai 3</div>
<div class="content">
<pre><code>fd = open("/dev/rtdm/foo", O_RDWR);</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">Applications can enable the CONFIG_XENO_OPT_RTDM_COMPAT_DEVNODE option
in the kernel configuration to enable legacy pathnames for named RTDM
devices. This compatibility option allows applications to open named
RTDM devices using the legacy naming scheme used by Xenomai 2.x.</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_retrieving_device_information">5.3.1. Retrieving device information</h4>
<div class="paragraph"><p>Device information can be retrieved via <em>sysfs</em>, instead of <em>procfs</em>
as with Xenomai 2.x. As a result of this change, <code>/proc/xenomai/rtdm</code>
disappeared entirely. Instead, the RTDM device information can now be
reached as follows:</p></div>
<div class="ulist"><ul>
<li>
<p>
/sys/devices/virtual/rtdm contains entries for all RTDM devices
present in the system (including named and protocol device types).
This directory is aliased to /sys/class/rtdm.
</p>
</li>
<li>
<p>
each /sys/devices/virtual/rtdm/&lt;device-name&gt; directory gives access
  to device information, available from virtual files:
</p>
<div class="ulist"><ul>
<li>
<p>
reading <code>profile</code> returns the class and subclass ids.
</p>
</li>
<li>
<p>
reading <code>refcount</code> returns the current count of outstanding
    connections to the device driver.
</p>
</li>
<li>
<p>
reading <code>flags</code> returns the device flags as defined by the device
    driver.
</p>
</li>
<li>
<p>
reading <code>type</code> returns the device type (<em>named</em> or <em>protocol</em>).
</p>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="_inter_driver_api">5.4. Inter-Driver API</h3>
<div class="paragraph"><p>The legacy (and redundant) rt_dev_*() API for calling the I/O services
exposed by a RTDM driver from another driver was dropped, in favour of
a direct use of the existing rtdm_*() API in kernel space. For
instance, calls to <code>rt_dev_open()</code> should be converted to
<code>rtdm_open()</code>, <code>rt_dev_socket()</code> to <code>rtdm_socket()</code> and so on.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Having two APIs for exactly the same purpose is uselessly confusing,
particularly for kernel programming. Since the user-space version of
the rt_dev_*() API was also dropped in favor of the regular POSIX I/O
calls exposed by <code>libcobalt</code>, the choice was made to retain the most
straightforward naming for the RTDM-to-RTDM API, keeping the <code>rtdm_</code>
prefix.</p></div>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analogy_interface_changes">6. Analogy interface changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_files_renamed_2">6.1. Files renamed</h3>
<div class="ulist"><ul>
<li>
<p>
DAQ drivers in kernel space now pull all Analogy core header files
  from &lt;rtdm/analogy/*.h&gt;. In addition:
</p>
</li>
</ul></div>
<div class="paragraph"><p>analogy/analogy_driver.h &#8594; rtdm/analogy/driver.h</p></div>
<div class="paragraph"><p>analogy/driver.h &#8594; rtdm/analogy/driver.h</p></div>
<div class="paragraph"><p>analogy/analogy.h &#8594; rtdm/analogy.h</p></div>
<div class="ulist"><ul>
<li>
<p>
DAQ drivers in kernel space should include &lt;rtdm/analogy/device.h&gt;
  instead of &lt;rtdm/analogy/driver.h&gt;.
</p>
</li>
<li>
<p>
Applications need to include only a single file for pulling all
  routine declarations and constant definitions required for invoking
  the Analogy services from user-space, namely &lt;rtdm/analogy.h&gt;, i.e.
</p>
</li>
</ul></div>
<div class="paragraph"><p>analogy/types.h
analogy/command.h
analogy/device.h
analogy/subdevice.h
analogy/instruction.h
analogy/ioctl.h &#8594; all files merged into rtdm/analogy.h</p></div>
<div class="paragraph"><p>As a consequence of these changes, the former include/analogy/ file
tree has been entirely removed.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rtnet_changes">7. RTnet changes</h2>
<div class="sectionbody">
<div class="paragraph"><p>RTnet is integrated into Xenomai 3, but some of its behaviour and
interfaces were changed in an attempt to simplify it.</p></div>
<div class="ulist"><ul>
<li>
<p>
a network driver kernel module can not be unloaded as long as the
  network interface it implements is up
</p>
</li>
<li>
<p>
the RTnet drivers API changed, to make it simpler, and closer to
  the mainline API
</p>
<div class="ulist"><ul>
<li>
<p>
module refcounting is now automatically done by the stack, no
    call is necessary to RTNET_SET_MODULE_OWNER, RTNET_MOD_INC_USE_COUNT,
    RTNET_MOD_DEC_USE_COUNT
</p>
</li>
<li>
<p>
per-driver skb receive pools were removed from drivers, they are
    now handled by the RTnet stack. In consequence, drivers now need
    to pass an additional argument to the rt_alloc_etherdev() service:
    the number of buffers in the pool. The new prototype is:
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>struct rtnet_device *rt_alloc_etherdev(unsigned sizeof_priv, unsigned rx_pool_size);</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
in consequence, any explicit call to rtskb_pool_init() can be
    removed. In addition, drivers should now use the
    rtnetdev_alloc_rtskb() to allocate buffers from the network device
    receive pool; much like its counterpart netdev_alloc_skb(), it takes
    as first argument a pointer to a network device structure. Its
    prototype is:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>struct rtskb *rtnetdev_alloc_rtskb(struct rtnet_device *dev, unsigned int size);</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
for driver which wish to explicitly handle skb pools, the
    signature of rtskb_pool_init has changed: it takes an additional
    pointer to a structure containing callbacks called when the first
    buffer is allocated and when the last buffer is returned, so that
    the rtskb_pool() can implicitly lock a parent structure. The new
    prototype is:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>struct rtskb_pool_lock_ops {
    int (*trylock)(void *cookie);
    void (*unlock)(void *cookie);
};

unsigned int rtskb_pool_init(struct rtskb_pool *pool,
                          unsigned int initial_size,
                          const struct rtskb_pool_lock_ops *lock_ops,
                          void *lock_cookie);</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
for the typical case where an skb pool locks the containing
    module, the function rtskb_module_pool_init() was added which has
    the same interface as the old rtskb_poll_init() function. Its
    prototype is:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>unsigned int rtskb_module_pool_init(struct rtskb_pool *pool,
                                        unsigned int initial_size);</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
in order to ease the port of recent drivers, the following
    services were added, which work much like their Linux counterpart:
    rtnetdev_priv(), rtdev_emerg(), rtdev_alert(), rtdev_crit(),
    rtdev_err(), rtdev_warn(), rtdev_notice(), rtdev_info(),
    rtdev_dbg(), rtdev_vdbg(), RTDEV_TX_OK, RTDEV_TX_BUSY,
    rtskb_checksum_none_assert(), rtskb_tx_timestamp(). Their
    declarations are equivalent to:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>#define RTDEV_TX_OK     0
#define RTDEV_TX_BUSY   1

void *rtndev_priv(struct rtnet_device *dev);

void rtdev_emerg(struct rntet_device *dev, const char *format, ...);
void rtdev_alert(struct rntet_device *dev, const char *format, ...);
void rtdev_crit(struct rntet_device *dev, const char *format, ...);
void rtdev_err(struct rntet_device *dev, const char *format, ...);
void rtdev_warn(struct rntet_device *dev, const char *format, ...);
void rtdev_notice(struct rntet_device *dev, const char *format, ...);
void rtdev_info(struct rntet_device *dev, const char *format, ...);
void rtdev_dbg(struct rntet_device *dev, const char *format, ...);
void rtdev_vdbg(struct rntet_device *dev, const char *format, ...);

void rtskb_checksum_non_assert(struct rtskb *skb);
void rtskb_tx_timestamp(struct rtskb *skb);</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_posix_interface_changes">8. POSIX interface changes</h2>
<div class="sectionbody">
<div class="paragraph"><p>As mentioned earlier, the former <strong>POSIX skin</strong> is known as the <strong>Cobalt
API</strong> in Xenomai 3.x, available as <code>libcobalt.{so,a}</code>. The Cobalt API
also includes the code of the former <code>libxenomai</code>, which is no longer
a standalone library.</p></div>
<div class="paragraph"><p><code>libcobalt</code> exposes the set of POSIX and ISO/C standard features
specifically implemented by Xenomai to honor real-time requirements
using the Cobalt core.</p></div>
<div class="sect2">
<h3 id="_interrupt_management">8.1. Interrupt management</h3>
<div class="ulist"><ul>
<li>
<p>
The former <code>pthread_intr</code> API once provided by Xenomai 2.x is gone.
</p>
</li>
</ul></div>
<div class="sidebarblock" id="irqhandling">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Handling real-time interrupt events from user-space can be done safely
only if some top-half code exists for acknowledging the issuing device
request from kernel space, particularly when the interrupt line is
shared. This should be done via a RTDM driver, exposing a <code>read(2)</code> or
<code>ioctl(2)</code> interface, for waiting for interrupt events from
applications running in user-space.</p></div>
</div></div>
<div class="paragraph"><p>Failing this, the low-level interrupt service code in user-space
would be sensitive to external thread management actions, such as
being stopped because of GDB/ptrace(2) interaction. Unfortunately,
preventing the device acknowledge code from running upon interrupt
request may cause unfixable breakage to happen (e.g. IRQ storm
typically).</p></div>
<div class="paragraph"><p>Since the application should provide proper top-half code in a
dedicated RTDM driver for synchronizing on IRQ receipt, the RTDM API
available in user-space is sufficient.</p></div>
<div class="paragraph"><p>Removing the <code>pthread_intr</code> API should be considered as a strong hint
for keeping driver code in kernel space, where it naturally belongs
to.</p></div>
<div class="admonitionblock" id="userirqtip">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">This said, in the seldom cases where running a device driver in
user-space is the best option, one may rely on the RTDM-based UDD
framework shipped with Xenomai 3. UDD stands for <em>User-space Device
Driver</em>, enabling interrupt control and I/O memory access interfaces
to applications in a safe manner. It is reminiscent of the UIO
framework available with the Linux kernel, adapted to the dual
kernel Cobalt environment.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_scheduling">8.2. Scheduling</h3>
<div class="ulist"><ul>
<li>
<p>
Cobalt implements the following POSIX.1-2001 services not present in
  Xenomai 2.x: <code>sched_setscheduler(2)</code>, <code>sched_getscheduler(2)</code>.
</p>
</li>
<li>
<p>
The <code>SCHED_FIFO</code>, <code>SCHED_RR</code>, <code>SCHED_SPORADIC</code> and <code>SCHED_TP</code>
  classes now support up to 256 priority levels, instead of 99 as
  previously with Xenomai 2.x. However, <code>sched_get_priority_max(2)</code>
  still returns 99. Only the Cobalt extended call forms
  (e.g. <code>pthread_attr_setschedparam_ex()</code>, <code>pthread_create_ex()</code>)
  recognize these additional levels.
</p>
</li>
<li>
<p>
The new <code>sched_get_priority_min_ex()</code> and
  <code>sched_get_priority_max_ex()</code> services should be used for querying
  the static priority range of Cobalt policies.
</p>
</li>
<li>
<p>
<code>pthread_setschedparam(3)</code> may cause a secondary mode switch for the
  caller, but will not cause any mode switch for the target thread
  unlike with Xenomai 2.x.
</p>
<div class="paragraph"><p>This is a requirement for maintaining both the <strong>glibc</strong> and the
Xenomai scheduler in sync, with respect to thread priorities, since
the former maintains a process-local priority cache for the threads
it knows about. Therefore, an explicit call to the the regular
<code>pthread_setschedparam(3)</code> shall be issued upon each priority change
Xenomai-wise, for maintaining consistency.</p></div>
<div class="paragraph"><p>In the Xenomai 2.x implementation, the thread being set a new
priority would receive a SIGSHADOW signal, triggering a call to
<code>pthread_setschedparam(3)</code> immediately.</p></div>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>The target Xenomai thread may hold a mutex or any resource which may
only be held in primary mode, in which case switching to secondary
mode for applying the priority change at any random location over a
signal handler may create a pathological issue. In addition,
<code>pthread_setschedparam(3)</code> is not async-safe, which makes the former
method fragile.</p></div>
</div></div>
<div class="paragraph"><p>Conversely, a thread which calls <code>pthread_setschedparam(3)</code> does know
unambiguously whether the current calling context is safe for the
incurred migration.</p></div>
<div class="ulist"><ul>
<li>
<p>
A new SCHED_WEAK class is available to POSIX threads, which may be
  optionally turned on using the <code>CONFIG_XENO_OPT_SCHED_WEAK</code> kernel
  configuration switch.
</p>
<div class="paragraph"><p>By this feature, Xenomai now accepts Linux real-time scheduling
policies (SCHED_FIFO, SCHED_RR) to be weakly scheduled by the Cobalt
core, within a low priority scheduling class (i.e. below the Xenomai
real-time classes, but still above the idle class).</p></div>
<div class="paragraph"><p>Xenomai 2.x already had a limited form of such policy, based on
scheduling SCHED_OTHER threads at the special SCHED_FIFO,0 priority
level in the Xenomai core. SCHED_WEAK is a generalization of such
policy, which provides for 99 priority levels, to cope with the full
extent of the regular Linux SCHED_FIFO/RR priority range.</p></div>
<div class="paragraph"><p>For instance, a (non real-time) Xenomai thread within the SCHED_WEAK
class at priority level 20 in the Cobalt core, may be scheduled with
policy SCHED_FIFO/RR at priority 20, by the Linux kernel. The code
fragment below would set the scheduling parameters accordingly,
assuming the Cobalt version of <code>pthread_setschedparam(3)</code> is invoked:</p></div>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>        struct sched_param param = {
               .sched_priority = -20,
        };

        pthread_setschedparam(tid, SCHED_FIFO, &amp;param);</code></pre>
</div></div>
<div class="paragraph"><p>Switching a thread to the SCHED_WEAK class can be done by negating
the priority level in the scheduling parameters sent to the Cobalt
core. For instance, SCHED_FIFO, prio=-7 would be scheduled as
SCHED_WEAK, prio=7 by the Cobalt core.</p></div>
<div class="paragraph"><p>SCHED_OTHER for a Xenomai-enabled thread is scheduled as
SCHED_WEAK,0 by the Cobalt core. When the SCHED_WEAK support is
disabled in the kernel configuration, only SCHED_OTHER is available
for weak scheduling of threads by the Cobalt core.</p></div>
<div class="ulist"><ul>
<li>
<p>
A new SCHED_QUOTA class is available to POSIX threads, which may be
  optionally turned on using the <code>CONFIG_XENO_OPT_SCHED_QUOTA</code> kernel
  configuration switch.
</p>
<div class="paragraph"><p>This policy enforces a limitation on the CPU consumption of
threads over a globally defined period, known as the quota
interval. This is done by pooling threads with common requirements
in groups, and giving each group a share of the global period (see
CONFIG_XENO_OPT_SCHED_QUOTA_PERIOD).</p></div>
<div class="paragraph"><p>When threads have entirely consumed the quota allotted to the group
they belong to, the latter is suspended as a whole, until the next
quota interval starts. At this point, a new runtime budget is given
to each group, in accordance with its share.</p></div>
</li>
<li>
<p>
When called from primary mode, sched_yield(2) now delays the caller
  for a short while <strong>only in case</strong> no context switch happened as a
  result of the manual round-robin. The delay ends next time the
  regular Linux kernel switches tasks, or a kernel (virtual) tick has
  elapsed (TICK_NSEC), whichever comes first.
</p>
<div class="paragraph"><p>Typically, a Xenomai thread undergoing the SCHED_FIFO or SCHED_RR
policy with no contender at the same priority level would still be
delayed for a while.</p></div>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>In most case, it is unwanted that sched_yield(2) does not cause any
context switch, since this service is commonly used for implementing a
poor man&#8217;s cooperative scheduling. A typical use case involves a
Xenomai thread running in primary mode which needs to yield the CPU to
another thread running in secondary mode. By waiting for a context
switch to happen in the regular kernel, we guarantee that the manual
round-robin takes place between both threads, despite the execution
mode mismatch. By limiting the incurred delay, we prevent a regular
high priority SCHED_FIFO thread stuck in a tight loop, from locking
out the delayed Xenomai thread indefinitely.</p></div>
</div></div>
</div>
<div class="sect2">
<h3 id="_thread_management">8.3. Thread management</h3>
<div class="ulist"><ul>
<li>
<p>
The minimum and default stack size is set to <code>max(64k,
  PTHREAD_STACK_MIN)</code>.
</p>
</li>
<li>
<p>
pthread_set_name_np() has been renamed to pthread_setname_np() with
  the same arguments, to conform with the GNU extension equivalent.
</p>
</li>
<li>
<p>
pthread_set_mode_np() has been renamed to pthread_setmode_np() for
  naming consistency with pthread_setname_np(). In addition, the call
  introduces the PTHREAD_DISABLE_LOCKBREAK mode flag, which disallows
  breaking the scheduler lock.
</p>
<div class="paragraph"><p>When unset (default case), a thread which holds the scheduler lock
drops it temporarily while sleeping.  When set, any attempt to block
while holding the scheduler lock will cause a break condition to be
immediately raised, with the caller receiving EINTR.</p></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/warning.png" alt="Warning" />
</td>
<td class="content">A Xenomai thread running with PTHREAD_DISABLE_LOCKBREAK and
PTHREAD_LOCK_SCHED both set may enter a runaway loop when attempting
to sleep on a resource or synchronization object (e.g. mutex or
condition variable).</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_semaphores">8.4. Semaphores</h3>
<div class="ulist"><ul>
<li>
<p>
With Cobalt, sem_wait(3), sem_trywait(3), sem_timedwait(3), and
  sem_post(3) have gained fast acquisition/release operations not
  requiring any system call, unless a contention exists on the
  resource. As a consequence, those services may not systematically
  switch callers executing in relaxed mode to real-time mode, unlike
  with Xenomai 2.x.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_process_management">8.5. Process management</h3>
<div class="ulist"><ul>
<li>
<p>
In a <code>fork(2)</code> &#8594; <code>exec(2)</code> sequence, all Cobalt API objects created
  by the child process before it calls <code>exec(2)</code> are automatically
  flushed by the Xenomai core.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="real-time-signals">8.6. Real-time signals</h3>
<div class="ulist"><ul>
<li>
<p>
Support for Xenomai real-time signals is available.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Cobalt replacements for <code>sigwait(3)</code>, <code>sigwaitinfo(2)</code>,
<code>sigtimedwait(2)</code>, <code>sigqueue(3)</code> and <code>kill(2)</code> are
available. <code>pthread_kill(3)</code> was changed to send thread-directed
Xenomai signals (instead of regular Linux signals).</p></div>
<div class="paragraph"><p>Cobalt-based signals are stricly real-time. Both the sender and
receiver sides work exclusively from the primary domain. However, only
synchronous handling is available, with a thread waiting explicitly
for a set of signals, using one of the <code>sigwait</code> calls. There is no
support for asynchronous delivery of signals to handlers. For this
reason, there is no provision in the Cobalt API for masking signals,
as Cobalt signals are implicitly blocked for a thread until the latter
invokes one of the <code>sigwait</code> calls.</p></div>
<div class="paragraph"><p>Signals from SIGRTMIN..SIGRTMAX are queued.</p></div>
<div class="paragraph"><p>COBALT_DELAYMAX is defined as the maximum number of overruns which can
be reported by the Cobalt core in the siginfo.si_overrun field, for
any signal.</p></div>
<div class="ulist"><ul>
<li>
<p>
Cobalt&#8217;s <code>kill(2)</code> implementation supports group signaling.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Cobalt&#8217;s implementation of kill(2) behaves identically to the regular
system call for non thread-directed signals (i.e. pid &#8656; 0). In this
case, the caller switches to secondary mode.</p></div>
<div class="paragraph"><p>Otherwise, Cobalt first attempts to deliver a thread-directed signal
to the thread whose kernel TID matches the given process id. If this
thread is not waiting for signals at the time of the call, kill(2) then
attempts to deliver the signal to a thread from the same process,
which currently waits for a signal.</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>pthread_kill(3)</code> is a conforming call.
</p>
</li>
</ul></div>
<div class="paragraph"><p>When Cobalt&#8217;s replacement for <code>pthread_kill(3)</code> is invoked, a
Xenomai-enabled caller is automatically switched to primary mode on
its way to sending the signal, under the control of the real-time
co-kernel. Otherwise, the caller keeps running under the control of
the regular Linux kernel.</p></div>
<div class="paragraph"><p>This behavior also applies to the new Cobalt-based replacement for the
<code>kill(2)</code> system call.</p></div>
</div>
<div class="sect2">
<h3 id="_timers">8.7. Timers</h3>
<div class="ulist"><ul>
<li>
<p>
POSIX timers are no longer dropped when the creator thread
  exits. However, they are dropped when the container process exits.
</p>
</li>
<li>
<p>
If the thread signaled by a POSIX timer exits, the timer is
  automatically stopped at the first subsequent timeout which fails
  sending the notification. The timer lingers until it is deleted by a
  call to <code>timer_delete(2)</code> or when the process exits, whichever comes
  first.
</p>
</li>
<li>
<p>
timer_settime(2) may be called from a regular thread (i.e. which is
  not Xenomai-enabled).
</p>
</li>
<li>
<p>
EPERM is not returned anymore by POSIX timer calls. EINVAL is
  substituted in the corresponding situation.
</p>
</li>
<li>
<p>
Cobalt replacements for <code>timerfd_create(2)</code>, <code>timerfd_settime(2)</code> and
<code>timerfd_gettime(2)</code> have been introduced. The implementation delivers
I/O notifications to RTDM file descriptors upon Cobalt-originated
real-time signals.
</p>
</li>
<li>
<p>
<code>pthread_make_periodic_np()</code> and <code>pthread_wait_np()</code> have been
removed from the API.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>With the introduction of services to support real-time signals, those
two non-portable calls have become redundant. Instead, Cobalt-based
applications should set up a periodic timer using the
<code>timer_create(2)</code>+<code>timer_settime(2)</code> call pair, then wait for release
points via <code>sigwaitinfo(2)</code>. Overruns can be detected by looking at the
siginfo.si_overrun field.</p></div>
<div class="paragraph"><p>Alternatively, applications may obtain a file descriptor referring to
a Cobalt timer via the <code>timerfd_create(2)</code> call, and <code>read(2)</code> from it to wait
for timeouts.</p></div>
<div class="paragraph"><p>In addition, applications may include a timer in a synchronous
multiplexing operation involving other event sources, by passing a
file descriptor returned by the <code>timerfd_create(2)</code> service to a <code>select(2)</code>
call.</p></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">A limited emulation of the pthread_make_periodic_np() and
pthread_wait_np() calls is available from the <a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_clocks">8.8. Clocks</h3>
<div class="ulist"><ul>
<li>
<p>
The internal identifier of CLOCK_HOST_REALTIME has changed from 42
  to 8.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/caution.png" alt="Caution" />
</td>
<td class="content">This information should normally remain opaque to applications, as it
is subject to change with ABI revisions.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_message_queues">8.9. Message queues</h3>
<div class="ulist"><ul>
<li>
<p>
<code>mq_open(3)</code> default attributes align on the regular kernel values,
  i.e. 10 msg x 8192 bytes (instead of 128 x 128).
</p>
</li>
<li>
<p>
<code>mq_send(3)</code> now enforces a maximum priority value for messages
  (32768).
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_posix_i_o_services">8.10. POSIX I/O services</h3>
<div class="ulist"><ul>
<li>
<p>
A Cobalt replacement for mmap(2) has been introduced. The
  implementation invokes the <a href="#rtdm-mmap"><code>.mmap</code> operation handler</a>
  from the appropriate RTDM driver the file descriptor is connected
  to.
</p>
</li>
<li>
<p>
A Cobalt replacement for fcntl(2) has been introduced. The
  implementation currently deals with the O_NONBLOCK flag exclusively.
</p>
</li>
<li>
<p>
Cobalt&#8217;s select(2) service is not automatically restarted anymore
  upon Linux signal receipt, conforming to the POSIX standard (see man
  signal(7)). In such an event, -1 is returned and errno is set to
  EINTR.
</p>
</li>
<li>
<p>
The former <code>include/rtdk.h</code> header is gone in Xenomai
3.x. Applications should include <code>include/stdio.h</code> instead.
Similarly, the real-time suitable STDIO routines are now part of
<code>libcobalt</code>.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alchemy_interface_formerly_em_native_api_em">9. Alchemy interface (formerly <em>native API</em>)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general">9.1. General</h3>
<div class="ulist"><ul>
<li>
<p>
The API calls supporting a wait operation may return the -EIDRM
error code only when the target object was deleted while
pending. Otherwise, passing a deleted object identifier to an API call
will result in -EINVAL being returned.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_interrupt_management_2">9.2. Interrupt management</h3>
<div class="ulist"><ul>
<li>
<p>
The <code>RT_INTR</code> API is gone. Please see the <a href="#irqhandling">rationale</a>
  for not handling low-level interrupt service code from user-space.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">It is still possible to have the application wait for interrupt
receipts, as explained <a href="#userirqtip">here</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_i_o_regions">9.3. I/O regions</h3>
<div class="ulist"><ul>
<li>
<p>
The RT_IOREGION API is gone. I/O memory resources should be
  controlled from a RTDM driver instead.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content"><a href="#userirqtip">UDD</a> provides a simple way to implement mini-drivers
exposing any kind of memory regions to applications in user-space, via
Cobalt&#8217;s mmap(2) call.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_timing_services">9.4. Timing services</h3>
<div class="ulist"><ul>
<li>
<p>
<code>rt_timer_tsc()</code>, <code>rt_timer_ns2tsc()</code> and <code>rt_timer_tsc2ns()</code> have
  been removed from the API.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Due to the accumulation of rounding errors, using raw timestamp values
from the underlying clock source hardware for measuring long
timespans may yield (increasingly) wrong results.</p></div>
<div class="paragraph"><p>Either we guarantee stable computations with counts of nanoseconds
from within the application, or with raw timestamps instead,
regardless of the clock source frequency, but we can&#8217;t provide such
guarantee for both. From an API standpoint, the nanosecond unit is
definitely the best option as the meaning won&#8217;t vary between clock
sources.</p></div>
<div class="paragraph"><p>Avoiding the overhead of the tsc&#8594;ns conversion as a justification to
use raw TSC counts does not fly anymore, as all architectures
implement fast arithmetics for this operation over Cobalt, and
Mercury&#8217;s (virtual) timestamp counter is actually mapped over
CLOCK_MONOTONIC.</p></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">Alchemy users should measure timespans (or get timestamps) as counts
of nanoseconds as returned by rt_timer_read() instead.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<code>rt_timer_inquire()</code> has a void return type, instead of always
  returning zero as previously. As a consequence of the previously
  documented change regarding TSC values, the current TSC count is no
  more returned into the RT_TIMER_INFO structure.
</p>
</li>
<li>
<p>
<code>rt_timer_set_mode()</code> is obsolete. The clock resolution has become a
per-process setting, which should be set using the
<code>--alchemy-clock-resolution</code> switch on the command line.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">Tick-based timing can be obtained by setting the resolution of the
Alchemy clock for the application, here to one millisecond (the
argument expresses a count nanoseconds per tick).  As a result of
this, all timeout and date values passed to Alchemy API calls will be
interpreted as counts of milliseconds.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content">
<pre><code># xenomai-application --alchemy-clock-resolution=1000000</code></pre>
</div></div>
<div class="paragraph"><p>By default, the Alchemy API sets the clock resolution for the new
process to one nanosecond (i.e. tickless, highest resolution).</p></div>
<div class="ulist"><ul>
<li>
<p>
TM_INFINITE also means infinite wait with all <code>rt_*_until()</code> call
  forms.
</p>
</li>
<li>
<p>
<code>rt_task_set_periodic()</code> does not suspend the target task anymore.
If a start date is specified, then <code>rt_task_wait_period()</code> will apply
the initial delay.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>A periodic Alchemy task has to call <code>rt_task_wait_period()</code> from
within its work loop for sleeping until the next release point is
reached. Since waiting for the initial and subsequent release points
will most often happen at the same code location in the application,
the semantics of rt_task_set_periodic() can be simplified so that only
rt_task_wait_period() may block the caller.</p></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">In the unusual case where you do need to have the current task wait
for the initial release point outside of its periodic work loop, you
can issue a call to <code>rt_task_wait_period()</code> separately, exclusively
for this purpose, i.e.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content">
<pre><code>              /* wait for the initial release point. */
              ret = rt_task_wait_period(&amp;overruns);
              /* ...more preparation work... */
              for (;;) {
                       /* wait for the next release point. */
                       ret = rt_task_wait_period(&amp;overruns);
                       /* ...do periodic work... */
              }</code></pre>
</div></div>
<div class="paragraph"><p>However, this work around won&#8217;t work if the caller is not the target
task of rt_task_set_periodic(), which is fortunately unusual for most
applications.</p></div>
<div class="paragraph"><p><code>rt_task_set_periodic()</code> still switches to primary as previously over
Cobalt. However, it does not return -EWOULDBLOCK anymore.</p></div>
<div class="ulist"><ul>
<li>
<p>
TM_ONESHOT was dropped, because the operation mode of the hardware
  timer has no meaning for the application. The core Xenomai system
  always operates the available timer chip in oneshot mode anyway.
  A tickless clock has a period of one nanosecond.
</p>
</li>
<li>
<p>
Unlike with Xenomai 2.x, the target task to <code>rt_task_set_periodic()</code>
  must be local to the current process.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">A limited emulation of the deprecated rt_task_set_periodic() behavior
is available from the <a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_mutexes">9.5. Mutexes</h3>
<div class="ulist"><ul>
<li>
<p>
For consistency with the standard glibc implementation, deleting a
  RT_MUTEX object in locked state is no longer a valid operation.
</p>
</li>
<li>
<p>
<code>rt_mutex_inquire()</code> does not return the count of waiters anymore.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Obtaining the current count of waiters only makes sense for debugging
purpose. Keeping it in the API would introduce a significant overhead
to maintain internal consistency.</p></div>
</div></div>
<div class="paragraph"><p>The <code>owner</code> field of a RT_MUTEX_INFO structure now reports the owner&#8217;s
task handle, instead of its name. When the mutex is unlocked, a NULL
handle is returned, which has the same meaning as a zero value in the
former <code>locked</code> field.</p></div>
</div>
<div class="sect2">
<h3 id="_condition_variables">9.6. Condition variables</h3>
<div class="ulist"><ul>
<li>
<p>
For consistency with the standard glibc implementation, deleting a
  RT_COND object currently pended by other tasks is no longer a valid
  operation.
</p>
</li>
<li>
<p>
Like <code>rt_mutex_inquire()</code>, <code>rt_cond_inquire()</code> does not return the
count of waiting tasks anymore.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_events">9.7. Events</h3>
<div class="ulist"><ul>
<li>
<p>
Event flags (RT_EVENT) are represented by a regular integer, instead
  of a long integer as with Xenomai 2.x. This change impacts the
  following calls:
</p>
<div class="ulist"><ul>
<li>
<p>
rt_event_create()
</p>
</li>
<li>
<p>
rt_event_signal()
</p>
</li>
<li>
<p>
rt_event_clear()
</p>
</li>
<li>
<p>
rt_event_wait()
</p>
</li>
<li>
<p>
rt_event_wait_until()
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>Using long integers for representing event bit masks potentially
creates a portability issue for applications between 32 and 64bit CPU
architectures. This issue is solved by using 32bit integers on 32/64
bit machines, which is normally more than enough for encoding the set
of events received by a single RT_EVENT object.</p></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">These changes are covered by the <a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_task_management">9.8. Task management</h3>
<div class="ulist"><ul>
<li>
<p>
<code>rt_task_notify()</code> and <code>rt_task_catch()</code> have been removed. They are
  meaningless in a userland-only context.
</p>
</li>
<li>
<p>
As a consequence of the previous change, the T_NOSIG flag to
  <code>rt_task_set_mode()</code> was dropped in the same move.
</p>
</li>
<li>
<p>
T_SUSP cannot be passed to rt_task_create() or rt_task_spawn()
  anymore.
</p>
</li>
<li>
<p>
T_FPU is obsolete. FPU management is automatically enabled for
  Alchemy tasks if the hardware supports it, disabled otherwise.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>This behavior can be achieved by not calling <code>rt_task_start()</code>
immediately after <code>rt_task_create()</code>, or by calling
<code>rt_task_suspend()</code> before <code>rt_task_start()</code>.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<code>rt_task_shadow()</code> now accepts T_LOCK, T_WARNSW.
</p>
</li>
<li>
<p>
<code>rt_task_create()</code> now accepts T_LOCK, T_WARNSW and T_JOINABLE.
</p>
</li>
<li>
<p>
The RT_TASK_INFO structure returned by <code>rt_task_inquire()</code> has
  changed:
</p>
<div class="ulist"><ul>
<li>
<p>
fields <code>relpoint</code> and <code>cprio</code> have been removed, since the
     corresponding information is too short-lived to be valuable to
     the caller. The task&#8217;s base priority is still available from
     the <code>prio</code> field.
</p>
</li>
<li>
<p>
new field <code>pid</code> represents the Linux kernel task identifier for
     the Alchemy task, as obtained from syscall(__NR_gettid).
</p>
</li>
<li>
<p>
other fields which represent runtime statistics are now avail
     from a core-specific <code>stat</code> field sub-structure.
</p>
</li>
</ul></div>
</li>
<li>
<p>
New <code>rt_task_send_until()</code>, <code>rt_task_receive_until()</code> calls are
  available, as variants of <code>rt_task_send()</code> and <code>rt_task_receive()</code>
  respectively, with absolute timeout specification.
</p>
</li>
<li>
<p>
rt_task_receive() does not inherit the priority of the sender,
although the requests will be queued by sender priority.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Instead, the application decides about the server priority instead of
the real-time core applying implicit dynamic boosts.</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>rt_task_slice()</code> now returns -EINVAL if the caller currently holds
  the scheduler lock, or attempts to change the round-robin settings
  of a thread which does not belong to the current process.
</p>
</li>
<li>
<p>
T_CPU disappears from the <code>rt_task_create()</code> mode flags. The new
  <code>rt_task_set_affinity()</code> service is available for setting the CPU
  affinity of a task.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">An emulation of rt_task_create() and rt_task_spawn() accepting the
deprecated flags is available from the <a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<code>rt_task_sleep_until()</code> does not return -ETIMEDOUT anymore. Waiting
  for a date in the past blocks the caller indefinitely.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_message_queues_2">9.9. Message queues</h3>
<div class="ulist"><ul>
<li>
<p>
As Alchemy-based applications run in user-space, the following
  <code>rt_queue_create()</code> mode bits from the former <em>native</em> API are
  obsolete:
</p>
<div class="ulist"><ul>
<li>
<p>
Q_SHARED
</p>
</li>
<li>
<p>
Q_DMA
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">Placeholders for those deprecated definitions are available from the
<a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_heaps">9.10. Heaps</h3>
<div class="ulist"><ul>
<li>
<p>
As Alchemy-based applications run in user-space, the following
  <code>rt_heap_create()</code> mode bits from the former <em>native</em> API are
  obsolete:
</p>
<div class="ulist"><ul>
<li>
<p>
H_MAPPABLE
</p>
</li>
<li>
<p>
H_SHARED
</p>
</li>
<li>
<p>
H_NONCACHED
</p>
</li>
<li>
<p>
H_DMA
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">If you need to allocate a chunk of DMA-suitable memory, then you
should create a RTDM driver for this purpose.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<code>rt_heap_alloc_until()</code> is a new call for waiting for a memory
  chunk, specifying an absolute timeout date.
</p>
</li>
<li>
<p>
with the removal of H_DMA, returning a physical address (phys_addr)
  in <code>rt_heap_inquire()</code> does not apply anymore.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">Placeholders for those deprecated definitions are available from the
<a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_alarms">9.11. Alarms</h3>
<div class="ulist"><ul>
<li>
<p>
<code>rt_alarm_wait()</code> has been removed.
</p>
</li>
</ul></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Rationale</div>
<div class="paragraph"><p>An alarm handler can be passed to <code>rt_alarm_create()</code> instead.</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
The RT_ALARM_INFO structure returned by <code>rt_alarm_inquire()</code> has
  changed:
</p>
<div class="ulist"><ul>
<li>
<p>
field <code>expiration</code> has been removed, since the corresponding
     information is too short-lived to be valuable to the caller.
</p>
</li>
<li>
<p>
field <code>active</code> has been added, to reflect the current state of
     the alarm object. If non-zero, the alarm is enabled
     (i.e. started).
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/tip.png" alt="Tip" />
</td>
<td class="content">An emulation of rt_alarm_wait() is available from the
<a href="#trank">Transition Kit</a>.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_message_pipes">9.12. Message pipes</h3>
<div class="ulist"><ul>
<li>
<p>
<code>rt_pipe_create()</code> now returns the minor number assigned to the
  connection, matching the /dev/rtp&lt;minor&gt; device usable by the
  regular threads. As a consequence of this, any return value higher
  or equal to zero denotes a successful operation, a negative return
  denotes an error.
</p>
</li>
<li>
<p>
Writing to a message pipe is allowed from all contexts, including
  from alarm handlers.
</p>
</li>
<li>
<p>
<code>rt_pipe_read_until()</code> is a new call for waiting for input from a
  pipe, specifying an absolute timeout date.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_psos_interface_changes">10. pSOS interface changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_memory_regions">10.1. Memory regions</h3>
<div class="ulist"><ul>
<li>
<p>
<code>rn_create()</code> may return ERR_NOSEG if the region control block
  cannot be allocated internally.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_scheduling_2">10.2. Scheduling</h3>
<div class="ulist"><ul>
<li>
<p>
The emulator converts priority levels between the core POSIX and
  pSOS scales using normalization (pSOS &#8594; POSIX) and denormalization
  (POSIX &#8594; pSOS) handlers.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Applications may override the default priority
normalization/denormalization handlers, by implementing the following
routines.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>int psos_task_normalize_priority(unsigned long psos_prio);

unsigned long psos_task_denormalize_priority(int core_prio);</code></pre>
</div></div>
<div class="paragraph"><p>Over Cobalt, the POSIX scale is extended to 257 levels, which allows
to map pSOS over the POSIX scale 1:1, leaving
normalization/denormalization handlers as no-ops by default.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vxworks_interface_changes">11. VxWorks interface changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_task_management_2">11.1. Task management</h3>
<div class="ulist"><ul>
<li>
<p>
<code>WIND_*</code> status bits are synced to the user-visible TCB only as a
result of a call to <code>taskTcb()</code> or <code>taskGetInfo()</code>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>As a consequence of this change, any reference to a user-visible TCB
should be refreshed by calling <code>taskTcb()</code> anew, each time reading the
<code>status</code> field is required.</p></div>
</div>
<div class="sect2">
<h3 id="_scheduling_3">11.2. Scheduling</h3>
<div class="ulist"><ul>
<li>
<p>
The emulator converts priority levels between the core POSIX and
  VxWorks scales using normalization (VxWorks &#8594; POSIX) and
  denormalization (POSIX &#8594; VxWorks) handlers.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Applications may override the default priority
normalization/denormalization handlers, by implementing the following
routines.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>int wind_task_normalize_priority(int wind_prio);

int wind_task_denormalize_priority(int core_prio);</code></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trank">12. Using the Transition Kit</h2>
<div class="sectionbody">
<div class="paragraph"><p>Xenomai 2 applications in user-space may use a library and a set of
compatibility headers, aimed at easing the process of transitioning to
Xenomai 3.</p></div>
<div class="paragraph"><p>Enabling this compatibility layer is done via passing specific
compilation and linker flags when building the
application. <code>xeno-config</code> can retrieve those flags using the
<code>--cflags</code> and <code>--ldflags</code> switches as usual, with the addition of the
<code>--compat</code> flag. Alternatively, passing the <code>--[skin=]native</code> switch
as to <code>xeno-config</code> implicitly turns on the compatibility mode for the
Alchemy API.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">The transition kit does not currently cover <em>all</em> the changes
introduced in Xenomai 3 yet, but a significant subset of them
nevertheless.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">A typical Makefile fragment implicitly turning on backward compatibility</div>
<div class="content">
<pre><code>PREFIX := /usr/xenomai
CONFIG_CMD := $(PREFIX)/bin/xeno-config
CFLAGS= $(shell $(CONFIG_CMD) --skin=native --cflags) -g
LDFLAGS= $(shell $(CONFIG_CMD) --skin=native --ldflags)
CC = $(shell $(CONFIG_CMD) --cc)</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Another example for using with the POSIX API</div>
<div class="content">
<pre><code>PREFIX := /usr/xenomai
CONFIG_CMD := $(PREFIX)/bin/xeno-config
CFLAGS= $(shell $(CONFIG_CMD) --skin=posix --cflags --compat) -g
LDFLAGS= $(shell $(CONFIG_CMD) --skin=posix --ldflags --compat)
CC = $(shell $(CONFIG_CMD) --cc)</code></pre>
</div></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2017-05-21 18:00:13 CEST
</div>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Running applications with Xenomai 3.x</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(3);
/*]]>*/
</script>
</head>
<body class="article" style="max-width:55em">
<div id="header">
<h1>Running applications with Xenomai 3.x</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_running_a_xenomai_3_application">1. Running a Xenomai 3 application</h2>
<div class="sectionbody">
<div class="paragraph"><p>For <em>Cobalt</em>, you will need the real-time core built into the target
Linux kernel as described in <a href="installing-xenomai-3-x">this
document</a>.</p></div>
<div class="paragraph"><p>For <em>Mercury</em>, you need no Xenomai-specific kernel support so far,
beyond what your host Linux kernel already provides. Your kernel
should at least provide high resolution timer support
(<code>CONFIG_HIGH_RES_TIMERS</code>), and likely complete preemption
(<em>PREEMPT_RT</em>) if your application requires short and bounded
latencies.</p></div>
<div class="paragraph"><p>Any Xenomai-based application recognizes a set of standard options
that may be passed on the command line, described in
<a href="application-setup-and-init#Standard_Xenomai_command_line_options">this document</a>.</p></div>
<div class="paragraph"><p>In addition, the <strong>Alchemy</strong>, <strong>pSOS &#8482;</strong> and <strong>VxWorks &#8482;</strong> APIs running
over the Xenomai core can define the clock resolution to be used,
given as a count of nano-seconds, i.e. HZ=(1000000000 / ns), by the
<code>--{alchemy/psos/vxworks}-clock-resolution=&lt;ns&gt;</code> option.</p></div>
<div class="paragraph"><p>If your application combines multiple APIs, you may pass several
clock-resolution switches to set them all.</p></div>
<div class="paragraph"><p>The default value depends on the API being considered. For instance,
the VxWorks &#8482; and pSOS &#8482; emulators default to millisecond clock
rates. The Alchemy API is tickless by default,
i.e. <code>--alchemy-clock-resolution=1</code>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/caution.png" alt="Caution" />
</td>
<td class="content">Specifying a resolution greater than 1 nanosecond requires the low
resolution clock support to be available from the Xenomai libraries
(see the <code>--enable-lores-clock</code>
<a href="installing-xenomai-3-x#Generic_configuration_options_both_cores">configuration
switch</a>).</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_valgrind_support">2. Valgrind support</h2>
<div class="sectionbody">
<div class="paragraph"><p>Running Xenomai applications over <em>Valgrind</em> is currently available to
the <em>Mercury</em> core only.</p></div>
<div class="paragraph"><p>When the Valgrind API is available to the application process, the
configuration symbol CONFIG_XENO_VALGRIND_API is defined at build
time, and may be tested for existence by the application code. See the
tool documentation at
<a href="http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.clientreq/">this address</a>.</p></div>
<div class="paragraph"><p>The Xenomai autoconf script will detect the Valgrind core header on
the build system automatically, and define this symbol accordingly
(i.e. /usr/include/valgrind/valgrind.h).</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">You may need to install the Valgrind development package on your build
system to provide for the core header files. For instance, such
package is called <em>valgrind-devel</em> on Fedora.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_available_real_time_apis">3. Available real-time APIs</h2>
<div class="sectionbody">
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<strong>Alchemy</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
                This is a re-implementation from scratch of Xenomai&#8217;s
                2.x <em>native</em> API, fully rebased on the new RTOS
                abstraction interface.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>pSOS</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
                <a href="http://www.windriver.com">pSOS &#8482;</a> is a registered
                trademark of Wind River Systems, Inc.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>VxWorks</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
                <a href="http://www.windriver.com">VxWorks &#8482;</a> is a registered
                trademark of Wind River Systems, Inc.
</p>
</td>
</tr>
</table></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2017-05-21 18:00:13 CEST
</div>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Installing Xenomai 3.x</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(3);
/*]]>*/
</script>
</head>
<body class="article" style="max-width:55em">
<div id="header">
<h1>Installing Xenomai 3.x</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Xenomai 3 is the new architecture of the Xenomai real-time framework,
which can run seamlessly side-by-side Linux as a co-kernel system, or
natively over mainline Linux kernels.  In the latter case, the
mainline kernel can be supplemented by the
<a href="https://www.kernel.org/pub/linux/kernel/projects/rt/">PREEMPT-RT patch</a>
to meet stricter response time requirements than standard kernel
preemption would bring.</p></div>
<div class="paragraph"><p>One of the two available real-time cores is selected at build
time. The dual kernel core is codenamed <em>Cobalt</em>, the native Linux
implementation is called <em>Mercury</em>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">If you are looking for detailed information about installing a legacy
Xenomai 2.x release, please refer to <a href="installing-xenomai-2.x">this
document</a> instead. Please note that Xenomai 2.x is discontinued and
not maintained anymore.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation_steps">2. Installation steps</h2>
<div class="sectionbody">
<div class="paragraph"><p>Xenomai follows a split source model, decoupling the kernel space
support from the user-space libraries.</p></div>
<div class="paragraph"><p>To this end, kernel and user-space Xenomai components are respectively
available under the <code>kernel/</code> and <code>lib/</code> sub-trees. Other top-level
directories, such as <code>scripts/</code>, <code>testsuite/</code> and <code>utils/</code>, provide
additional scripts and programs to be used on either the build host,
or the runtime target.</p></div>
<div class="paragraph"><p>The <code>kernel/</code> sub-tree which implements the in-kernel support code is
seen as a built-in extension of the Linux kernel.  Therefore, the
standard Linux kernel configuration process should be used to define
the various settings for the Xenomai kernel components. All of the
kernel code Xenomai currently introduces implements the <em>Cobalt</em> core
(i.e. dual kernel configuration). As of today, the <em>Mercury</em> core
needs no Xenomai-specific code in kernel space.</p></div>
<div class="paragraph"><p>The <code>lib/</code> sub-tree contains the various user-space libraries exported
by the Xenomai framework to the applications. This tree is built
separately from the kernel support. Libraries are built in order to
support the selected core, either <em>Cobalt</em> or <em>Mercury</em>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="cobalt-core-install">3. Installing the <em>Cobalt</em> core</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_preparing_the_em_cobalt_em_kernel">3.1. Preparing the <em>Cobalt</em> kernel</h3>
<div class="paragraph"><p><em>Xenomai/cobalt</em> provides a real-time extension kernel seamlessly
integrated to Linux, therefore the first step is to build it as part
of the target kernel. To this end, <code>scripts/prepare-kernel.sh</code> is a
shell script which sets up the target kernel properly. The syntax is
as follows:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ scripts/prepare-kernel.sh [--linux=&lt;linux-srctree&gt;]
[--ipipe=&lt;ipipe-patch&gt;] [--arch=&lt;target-arch&gt;]</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>--linux</code>
</dt>
<dd>
<p>
specifies the path of the target kernel source tree. Such
    kernel tree may be already configured or not, indifferently. This
    path defaults to $PWD.
</p>
</dd>
<dt class="hdlist1">
<code>--ipipe</code>
</dt>
<dd>
<p>
specifies the path of the interrupt pipeline (aka I-pipe)
    patch to apply against the kernel tree. Suitable patches are
    available from the project&#8217;s <a href="/downloads/ipipe/">download
    area</a>.  This parameter can be omitted if the I-pipe has already
    been patched in, or the script shall suggest an appropriate
    one. The script will detect whether the interrupt pipeline code is
    already present into the kernel tree, and skip this operation if
    so.
</p>
</dd>
<dt class="hdlist1">
<code>--arch</code>
</dt>
<dd>
<p>
tells the script about the target architecture. If
    unspecified, the build host architecture suggested as a reasonable
    default.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>For instance, the following command would prepare the Linux tree
located at <code>/home/me/linux-3.10-ipipe</code> in order to patch the Xenomai
support in:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd xenomai-3
$ scripts/prepare-kernel.sh --linux=/home/me/linux-3.10</code></pre>
</div></div>
<div class="paragraph"><p>Note: The script will infer the location of the Xenomai kernel code
from its own location within the Xenomai source tree. For instance, if
<code>/home/me/xenomai-3/scripts/prepare-kernel.sh</code> is executing, then
the Xenomai kernel code available from
<code>/home/me/xenomai-3/kernel/cobalt</code> will be patched in the target
Linux kernel.</p></div>
</div>
<div class="sect2">
<h3 id="_configuring_and_compiling_the_em_cobalt_em_kernel">3.2. Configuring and compiling the <em>Cobalt</em> kernel</h3>
<div class="paragraph"><p>Once prepared, the target kernel can be configured as usual. All
Xenomai configuration options are available from the "Xenomai"
toplevel Kconfig menu.</p></div>
<div class="paragraph"><p>There are several important kernel configuration options, documented
in the <a href="troubleshooting-a-dual-kernel-configuration#kconf">TROUBLESHOOTING</a>
guide.</p></div>
<div class="paragraph"><p>Once configured, the kernel can be compiled as usual.</p></div>
<div class="paragraph"><p>If you want several different configs/builds at hand, you may reuse
the same source by adding <code>O=../build-&lt;target&gt;</code> to each make
invocation.</p></div>
<div class="paragraph"><p>In order to cross-compile the Linux kernel, pass an ARCH and
CROSS_COMPILE variable on make command line. See sections
<a href="#cobalt-core-arm">"Building a <em>Cobalt/arm</em> kernel"</a>,
<a href="#cobalt-core-powerpc">"Building a <em>Cobalt/powerpc</em> kernel"</a>,
<a href="#cobalt-core-blackfin">"Building a <em>Cobalt/blackfin</em> kernel"</a>,
<a href="#cobalt-core-x86">"Building a <em>Cobalt/x86</em> kernel"</a>,
for examples.</p></div>
</div>
<div class="sect2">
<h3 id="cobalt-kernel-parameters">3.3. <em>Cobalt</em> kernel parameters</h3>
<div class="paragraph"><p>The Cobalt kernel accepts the following set of parameters, which
should be passed on the kernel command line by the boot loader.</p></div>
<div class="tableblock">
<table rules="cols"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="50%" />
<col width="16%" />
<thead>
<tr>
<th align="center" valign="top">NAME              </th>
<th align="center" valign="top">DESCRIPTION                    </th>
<th align="center" valign="top">DEFAULT</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">xenomai.allowed_group=&lt;gid&gt;</p></td>
<td align="left" valign="top"><p class="table">Enable non-root access to Xenomai
services from user-space.  &lt;gid&gt; is the ID of the Linux user group
whose members should be allowed such access by the Cobalt core.</p></td>
<td align="left" valign="top"><p class="table">None</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">xenomai.sysheap_size=&lt;kbytes&gt;</p></td>
<td align="left" valign="top"><p class="table">Set the size of the memory heap used
internally by the Cobalt core to allocate runtime objects.  This value
is expressed in kilo-bytes.</p></td>
<td align="left" valign="top"><p class="table">256</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">xenomai.state=&lt;state&gt;</p></td>
<td align="left" valign="top"><p class="table">Set the initial state of the Cobalt core at
boot up, which may be <em>enabled</em>, <em>stopped</em> or <em>disabled</em>. See the
documentation about the
<a href="../documentation/xenomai-3/html/man1/corectl/index.html">corectl(1)</a>
utility for a description of these states.</p></td>
<td align="left" valign="top"><p class="table">enabled</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">xenomai.clockfreq=&lt;hz-freq&gt;</p></td>
<td align="left" valign="top"><p class="table">Override the real-time clock frequency
used in measuring time intervals with the given value. The most
accurate value is normally determined by the Cobalt core automatically
when initializing. It is strongly recommended <strong>not</strong> to use this option
unless you really know what you are doing. This value is expressed in
HZ.</p></td>
<td align="left" valign="top"><p class="table">0 (=calibrated)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">xenomai.timerfreq=&lt;hz-freq&gt;</p></td>
<td align="left" valign="top"><p class="table">Override the real-time timer frequency
used in programming timer shots with the given value. The most
accurate value is normally determined by the Cobalt core automatically
when initializing. It is strongly recommended <strong>not</strong> to use this option
unless you really know what you are doing. This value is expressed in
HZ.</p></td>
<td align="left" valign="top"><p class="table">0 (=calibrated)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">xenomai.smi=&lt;state&gt;</p></td>
<td align="left" valign="top"><p class="table"><strong>x86-specific</strong>: Set the state of the SMI
workaround. The possible values are <em>disabled</em>, <em>detect</em> and
<em>enabled</em>. See the discussion about <a href="dealing-with-x86-SMI">SMIs</a>
for a description of these states.</p></td>
<td align="left" valign="top"><p class="table">detect</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">xenomai.smi_mask=&lt;source-mask&gt;</p></td>
<td align="left" valign="top"><p class="table"><strong>x86-specific</strong>: Set of bits to mask
in the SMI control register.</p></td>
<td align="left" valign="top"><p class="table">1 (=global disable)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="cobalt-build-examples">3.4. Examples of building the <em>Cobalt</em> kernel</h3>
<div class="paragraph"><p>The examples in following sections use the following conventions:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>$linux_tree</code>
</dt>
<dd>
<p>
path to the target kernel sources
</p>
</dd>
<dt class="hdlist1">
<code>$xenomai_root</code>
</dt>
<dd>
<p>
path to the Xenomai sources
</p>
</dd>
</dl></div>
<div class="sect3">
<h4 id="cobalt-core-x86">3.4.1. Building a <em>Cobalt/x86</em> kernel (32/64bit)</h4>
<div class="paragraph"><p>Building <em>Xenomai/cobalt</em> for x86 is almost the same for 32bit and 64bit
platforms. You should note, however, that it is not possible to run
Xenomai libraries compiled for x86_32 on a kernel compiled for x86_64,
and conversely.</p></div>
<div class="paragraph"><p>Assuming that you want to build natively for a x86_64 system (x86_32
cross-build options from x86_64 appear between brackets), you would
typically run:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $linux_tree
$ $xenomai_root/scripts/prepare-kernel.sh --arch=x86 \
  --ipipe=ipipe-core-X.Y.Z-x86-NN.patch
$ make [ARCH=i386] xconfig/gconfig/menuconfig</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;configure the kernel (see also the recommended settings
<a href="configuring-for-x86-based-dual-kernels">here</a>).</p></div>
<div class="paragraph"><p>Enable Xenomai options, then build with:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ make [ARCH=i386] bzImage modules</code></pre>
</div></div>
<div class="paragraph"><p>Now, let&#8217;s say that you really want to build Xenomai for a
Pentium-based x86 32bit platform, using the native host toolchain; the
typical steps would be as follows:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $linux_tree
$ $xenomai_root/scripts/prepare-kernel.sh --arch=i386 \
  --ipipe=ipipe-core-X.Y.Z-x86-NN.patch
$ make xconfig/gconfig/menuconfig</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;configure the kernel (see also the recommended settings
<a href="configuring-for-x86-based-dual-kernels">here</a>).</p></div>
<div class="paragraph"><p>Enable Xenomai options, then build with:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ make bzImage modules</code></pre>
</div></div>
<div class="paragraph"><p>Similarly, for a 64bit platform, you would use:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $linux_tree
$ $xenomai_root/scripts/prepare-kernel.sh --arch=x86_64 \
  --ipipe=ipipe-core-X.Y.Z-x86-NN.patch
$ make xconfig/gconfig/menuconfig</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;configure the kernel (see also the recommended settings
<a href="configuring-for-x86-based-dual-kernels">here</a>).</p></div>
<div class="paragraph"><p>Enable Xenomai options, then build with:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ make bzImage modules</code></pre>
</div></div>
<div class="paragraph"><p>The remaining examples illustrate how to cross-compile a
<em>Cobalt</em>-enabled kernel for various architectures. Of course, you would
have to install the proper cross-compilation toolchain for the target
system first.</p></div>
</div>
<div class="sect3">
<h4 id="cobalt-core-powerpc">3.4.2. Building a <em>Cobalt/powerpc</em> kernel (32/64bit)</h4>
<div class="paragraph"><p>A typical cross-compilation setup, in order to build Xenomai for a
ppc-6xx architecture running a 3.10.32 kernel. We use the DENX ELDK
cross-compiler:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $linux_tree
$ $xenomai_root/scripts/prepare-kernel.sh --arch=powerpc \
  --ipipe=ipipe-core-3.10.32-powerpc-1.patch
$ make ARCH=powerpc CROSS_COMPILE=ppc_6xx- xconfig/gconfig/menuconfig</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;select the kernel and Xenomai options, save the configuration</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ make ARCH=powerpc CROSS_COMPILE=powerpc-linux- uImage modules</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;manually install the kernel image and modules to the proper location</p></div>
</div>
<div class="sect3">
<h4 id="cobalt-core-blackfin">3.4.3. Building a <em>Cobalt/blackfin</em> kernel</h4>
<div class="paragraph"><p>The Blackfin is a MMU-less, DSP-type architecture running uClinux.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $linux_tree
$ $xenomai_root/scripts/prepare-kernel.sh --arch=blackfin \
  --ipipe=ipipe-core-X.Y.Z-x86-NN.patch
$ make ARCH=blackfin CROSS_COMPILE=bfin-uclinux- xconfig/gconfig/menuconfig</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;select the kernel and Xenomai options, then compile with:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ make linux image</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;then install as needed</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cp images/linux /tftpboot/...</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="cobalt-core-arm">3.4.4. Building  <em>Cobalt/arm</em> kernel</h4>
<div class="paragraph"><p>Using codesourcery toolchain named <code>arm-none-linux-gnueabi-gcc</code> and
compiling for a CSB637 board (AT91RM9200 based), a typical compilation
will look like:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $linux_tree
$ $xenomai_root/scripts/prepare-kernel.sh --arch=arm \
  --ipipe=ipipe-core-X.Y.Z-x86-NN.patch
$ mkdir -p $build_root/linux
$ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- O=$build_root/linux \
  csb637_defconfig
$ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- O=$build_root/linux \
  bzImage modules</code></pre>
</div></div>
<div class="paragraph"><p>&#8230;manually install the kernel image, system map and modules to the proper location</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mercury-core-install">4. Installing the <em>Mercury</em> core</h2>
<div class="sectionbody">
<div class="paragraph"><p>For <em>Mercury</em>, you need no Xenomai-specific kernel support so far,
beyond what your host Linux kernel already provides. Your kernel
should at least provide high resolution timer support
(<code>CONFIG_HIGH_RES_TIMERS</code>), and likely complete preemption
(<em>PREEMPT_RT</em>) if your application requires short and bounded
latencies.</p></div>
<div class="paragraph"><p>Kernels with no real-time support can be used too, likely for basic
debugging tasks, and/or running applications which do not have strict
response time requirements.</p></div>
<div class="paragraph"><p>Therefore, unlike with <em>Cobalt</em>, there is no additional steps for
preparing and/or configuring the kernel for <em>Mercury</em>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="library-install">5. Installing the Xenomai libraries and tools</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites">5.1. Prerequisites</h3>
<div class="sect3">
<h4 id="_generic_requirements_both_cores">5.1.1. Generic requirements (both cores)</h4>
<div class="ulist"><ul>
<li>
<p>
GCC must have support for legacy atomic builtins (__sync form).
</p>
</li>
<li>
<p>
GCC should have a (sane/working) support for TLS preferably,
although this is not mandatory if building with <code>--disable-tls</code>.
</p>
</li>
<li>
<p>
If you plan to enable the user-space registry support
  (i.e. <code>--enable-registry</code>), then CONFIG_FUSE_FS must be enabled in
  the target kernel running the real-time applications. In addition,
  the FUSE development libraries must be available from the toolchain.
</p>
</li>
<li>
<p>
If you plan to build from the sources available from the Xenomai GIT
  tree (git.xenomai.org), the autoconf (&gt;= 2.62), automake and libtool
  packages must be available on your build system. This is not
  required when building from a source tree extracted from a
  <a href="/downloads/xenomai/">release tarball</a>.
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_em_cobalt_em_specific_requirements">5.1.2. <em>Cobalt</em>-specific requirements</h4>
<div class="ulist"><ul>
<li>
<p>
The kernel version must be 3.10 or better.
</p>
</li>
<li>
<p>
An interrupt pipeline (I-pipe) patch must be available for your
  target kernel. You can find the official patches issued by the
  Xenomai project <a href="/downloads/ipipe/">there</a>.
  Only patches from the <strong>ipipe-core</strong> series are appropriate, legacy
  patches from the <strong>adeos-ipipe</strong> series are not.
</p>
</li>
<li>
<p>
A timestamp counter (TSC) is required from running on a x86_32
  hardware. Unlike with Xenomai 2.x, TSC-emulation using a PIT
  register is not available.
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_em_mercury_em_specific_requirement">5.1.3. <em>Mercury</em>-specific requirement</h4>
<div class="ulist"><ul>
<li>
<p>
There is no particular requirement for Mercury setups, although
  using a NPTL-based glibc or uClibc is recommended.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring">5.2. Configuring</h3>
<div class="paragraph"><p>If building the source obtained from the Xenomai GIT tree
(git.xenomai.org), the <code>configure</code> script and Makefiles must be
generated in the Xenomai source tree. The recommended way is to run
the automatic reconfiguration script shipped, from the top of the
source tree:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ ./scripts/bootstrap</code></pre>
</div></div>
<div class="paragraph"><p>If building from a <a href="/downloads/xenomai/">release tarball</a>, a set of
autoconf-generated file will be readily available from the extracted
source tree, and therefore reconfiguring will not be required.</p></div>
<div class="paragraph"><p>When run, the generated <code>configure</code> script prepares for building the
libraries and programs, for both the <em>Cobalt</em> and <em>Mercury</em> cores. The
core-specific code which may be needed internally is automatically and
transparently selected at compilation-time by the build process.</p></div>
<div class="paragraph"><p>The options listed below can be passed to this script.</p></div>
<div class="sect3">
<h4 id="_generic_configuration_options_both_cores">5.2.1. Generic configuration options (both cores)</h4>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<strong>--with=core=&lt;type&gt;</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
        Indicates which real-time core you want to build the support
        libraries for, namely <em>cobalt</em> or <em>mercury</em>. This option
        defaults to <em>cobalt</em>.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>--prefix=&lt;dir&gt;</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
        Specifies the root installation path for libraries, include
        files, scripts and executables. Running <code>$ make install</code>
        installs these files to <code>$DESTDIR/&lt;dir&gt;</code>.  This directory
        defaults to /usr/xenomai.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>--enable-debug[=partial]</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
        This switch controls the debug level. Three levels are
        available, with varying overhead:
</p>
<div class="ulist"><ul>
<li>
<p>
<em>symbols</em> enables debug symbols to be compiled in the
        libraries and executables, still turning on the optimizer
        (-O2). This option has no overhead, it is useful to get
        meaningful backtraces using gdb while running the application
        at nominal speed.
</p>
</li>
<li>
<p>
<em>partial</em> includes <em>symbols</em>, and also turns on internal
        consistency checks within the Xenomai code (mostly present in
        the Copperplate layer). The <code>CONFIG_XENO_DEBUG</code> macro is
        defined, for both the Xenomai libraries and the applications
        getting their C compilation flags from the <code>xeno-config</code>
        script (i.e. <code>xeno-config --cflags</code>). The partial debug mode
        implicitly turns on <code>--enable-assert</code>. A measurable overhead
        is introduced by this level.  This is the default level when
        <code>--enable-debug</code> is mentioned with no level specification.
</p>
</li>
<li>
<p>
<em>full</em> includes <em>partial</em> settings, but the optimizer is
        disabled (-O0), and even more consistency checks may be
        performed.  In addition to <code>__XENO_DEBUG__</code>, the macro
        <code>CONFIG_XENO_DEBUG_FULL</code> is defined. This level introduces the
        most overhead, which may triple the worst-case latency, or
        even more.
</p>
<div class="paragraph"><p>Over the <em>Mercury</em> core, enabling <em>partial</em> or <em>full</em> debug
modes also causes the standard malloc interface to be used
internally instead of a fast real-time allocator (TLSF). This
allows debugging memory-related issues with the help of
<em>Valgrind</em> or other dynamic memory analysers.</p></div>
</li>
</ul></div>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>--disable-debug</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
         Fully turns off all consistency checks and assertions, turns
         on the optimizer and disables debug symbol generation.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>--enable-assert</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
        A number of debug assertion statements are present into the
        Xenomai libraries, checking the internal consistency of the
        runtime system dynamically (see <em>man assert(3)</em>). Passing
        <code>--disable-assert</code> to the <em>configure</em> script disables built-in
        assertions unconditionally. By default, assertions are enabled
        in partial or full debug modes, disabled otherwise.
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>--enable-pshared</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
        Enable shared multi-processing. When enabled, this option
        allows multiple processes to share real-time objects
        (e.g. tasks, semaphores).
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<strong>--enable-registry[=/registry-root-path]</strong>
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
        Xenomai APIs can export their internal state through a
        pseudo-filesystem, which files may be read to obtain
        information about the existing real-time objects, such as
        tasks, semaphores, message queues and so on.  This feature is
        supported by <a href="http://fuse.sourceforge.net/">FUSE</a>, which must be
        available on the target system. Building the Xenomai libraries
        with the registry support requires the FUSE development
        libraries to available from the toolchain. In addition,
        CONFIG_FUSE_FS must be enabled in the target kernel.
</p>
</td>
</tr>
</table></div>
<div class="paragraph"><p>When this option is enabled, the system creates a file hierachy at
<code>&lt;user&gt;/&lt;session&gt;/&lt;pid&gt;</code> under the registry root path, where you
can access the internal state of the active real-time objects. The
session label is obtained from the --session runtime switch. If no
session name is specified, <code>anon@&lt;pid&gt;</code> will be used. E.g. looking at
the properties of a VxWorks task could be done as follows:</p></div>
<div class="paragraph"><p>If not specified in the configuration switch, the registry root path
will be <code>/var/run/xenomai</code>.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cat /var/run/xenomai/root/anon@12656/12656/vxworks/tasks/windTask
name       = windTask
errno      = 0
status     = ready
priority   = 70
lock_depth = 0</code></pre>
</div></div>
<div class="paragraph"><p>You may override the default root of the registry hierarchy
either statically at build time by passing the desired root
path to the --enable-registry configuration switch, or
dynamically by using the <code>--registry-root</code> runtime option
passed to the application.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">When running over <em>Xenomai/cobalt</em>, the <code>/proc/xenomai</code> interface is
also available for inspecting the core system state.</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--enable-lores-clock</strong>
</dt>
<dd>
<p>
        Enables support for low resolution clocks. By default,
        libraries are built with no support for tick-based timing. If
        you need such support (e.g. for pSOS &#8482; or VxWorks &#8482;
        APIs), then you can turn it on using this option.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">The POSIX API does not support tick-based timing. Alchemy may use it
optionally.</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--enable-clock-monotonic-raw</strong>
</dt>
<dd>
<p>
        The Xenomai libraries requires a monotonic clock to be
        available from the underlying POSIX interface. When
        <code>CLOCK_MONOTONIC_RAW</code> is available on your system, you may
        want to pass this switch, otherwise <code>CLOCK_MONOTONIC</code> will be
        used by default.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">The <em>Cobalt</em> core implements <code>CLOCK_MONOTONIC_RAW</code>, so this switch is
turned on by default when building with <code>--with-core=cobalt</code>. On the
contrary, this option is turned off by default when building for the
<em>Mercury</em> core, since we don&#8217;t know in advance whether this feature
does exist on the target kernel.</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--enable-tls</strong>
</dt>
<dd>
<p>
        Xenomai can use GCC&#8217;s thread local storage extension (TLS) to
        speed up the retrieval of the per-thread information it uses
        internally. This switch enables TLS, use the converse
        <code>--disable-tls</code> to prevent this.
</p>
<div class="paragraph"><p>Due to GCC bugs regarding this feature with some
release,architecture combinations, whether TLS is turned on by
default is a per-architecture decision. Currently, this
feature is enabled for x86 and powerpc by default, other
architectures will require <code>--enable-tls</code> to be passed to the
<em>configure</em> script explicitly.</p></div>
<div class="paragraph"><p>Unless <code>--enable-dlopen-libs</code> is present, the <em>initial-exec</em>
TLS model is selected.</p></div>
<div class="paragraph"><p>When TLS is disabled, POSIX&#8217;s thread-specific data management
services are used internally (i.e. pthread_set/getspecific()).</p></div>
</dd>
<dt class="hdlist1">
<strong>--enable-dlopen-libs</strong>
</dt>
<dd>
<p>
        This switch allows programs to load Xenomai-based libraries
        dynamically, using the <code>dlopen(3)</code> routine. Enabling dynamic
        loading introduces some overhead in TLS accesses when enabled
        (see <code>--enable-tls</code>), which might be noticeable depending on
        the architecture.
</p>
<div class="paragraph"><p>To support dynamic loading when <code>--enable-tls</code> is turned on,
the <em>global-dynamic</em> TLS model is automatically selected.</p></div>
<div class="paragraph"><p>Dynamic loading of Xenomai-based libraries is disabled by
default.</p></div>
</dd>
<dt class="hdlist1">
<strong>--enable-async-cancel</strong>
</dt>
<dd>
<p>
        Enables fully asynchronous cancellation of Xenomai threads
        created by the real-time APIs, making provision to protect the
        Xenomai implementation code accordingly.
</p>
<div class="paragraph"><p>When disabled, Xenomai assumes that threads may exit due to
cancellation requests only when they reach cancellation points
(like system calls). Asynchronous cancellation is disabled
by default.</p></div>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/caution.png" alt="Caution" />
</td>
<td class="content">Fully asynchronous cancellation can easily lead to resource leakage,
silent corruption, safety issues and all sorts of rampant bugs. The
only reason to turn this feature on would be aimed at cancelling
threads which run significantly long, syscall-less busy loops with no
explicit exit condition, which should probably be revisited anyway.</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--enable-smp</strong>
</dt>
<dd>
<p>
        Turns on SMP support for Xenomai libraries.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/caution.png" alt="Caution" />
</td>
<td class="content">SMP support must be enabled in Xenomai libraries when the
client applications are running over a SMP-capable kernel.</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>--disable-sanity</strong>
</dt>
<dd>
<p>
        Turns off the sanity checks performed at application startup
        by the Xenomai libraries. This option sets a default, which
        can later be overriden using the --[no-]sanity options passed
        to a Copperplate-based Xenomai application. Sanity checks are
        enabled by default when configuring.
</p>
</dd>
<dt class="hdlist1">
<strong>--enable-fortify</strong>
</dt>
<dd>
<p>
        Enables <code>_FORTIFY_SOURCE</code> when building the Xenomai code
        unless --enable-debug=full is also given on the command line,
        in which case --enable-fortify is silently ignored.
</p>
</dd>
<dt class="hdlist1">
<strong>--disable-valgrind-client</strong>
</dt>
<dd>
<p>
        Turns off the Valgrind client support, forcing
        <code>CONFIG_XENO_VALGRIND_API</code> off in the Xenomai configuration
        header.
</p>
</dd>
<dt class="hdlist1">
<strong>--enable-doc-build</strong>
</dt>
<dd>
<p>
        Causes the inline Xenomai documentation based on the
        <a href="http://doxygen.org">Doxygen markup language</a> to be produced as
        PDF and HTML documents. Additional documentation like manpages
        based on the <a href="http://asciidoc.org/">Asciidoc markup language</a> is
        produced too.
</p>
<div class="paragraph"><p>A pre-built copy of the documentation is present in the source
tree, under the <code>doc/generated/</code> file hierarchy.</p></div>
</dd>
<dt class="hdlist1">
<strong>--disable-doc-install</strong>
</dt>
<dd>
<p>
        Disables the copying of the pre-built documentation to the
        installation directory.
</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_em_cobalt_em_specific_configuration_options">5.2.2. <em>Cobalt</em>-specific configuration options</h4>
<div class="tableblock">
<table rules="cols"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="33%" />
<col width="33%" />
<thead>
<tr>
<th align="center" valign="top">NAME              </th>
<th align="center" valign="top">DESCRIPTION                    </th>
<th align="center" valign="top">DEFAULT</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>--enable-x86-vsyscall</code></p></td>
<td align="left" valign="top"><p class="table">Use the x86/vsyscall interface
                        for issuing syscalls. If disabled,
                        the legacy 0x80 vector will be used.
                        Turning on this option requires NPTL.</p></td>
<td align="left" valign="top"><p class="table">enabled</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>--enable-arm-tsc</code></p></td>
<td align="left" valign="top"><p class="table">Enable ARM TSC emulation.
                        <span class="footnote"><br />[In the unusual
                        situation where Xenomai
                        does not support the kuser generic
                        emulation for the target SOC, use
                        this option to specify another tsc
                        emulation method.
                        See <code>--help</code> for a list of valid
                        values.]<br /></span></p></td>
<td align="left" valign="top"><p class="table">kuser</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>--enable-arm-quirks</code></p></td>
<td align="left" valign="top"><p class="table">Enable quirks for specific ARM
                        SOCs Currently sa1100 and
                        xscale3 are supported.</p></td>
<td align="left" valign="top"><p class="table">disabled</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_em_mercury_em_specific_configuration_options">5.2.3. <em>Mercury</em>-specific configuration options</h4>
<div class="tableblock">
<table rules="cols"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="33%" />
<col width="33%" />
<thead>
<tr>
<th align="center" valign="top">NAME              </th>
<th align="center" valign="top">DESCRIPTION                    </th>
<th align="center" valign="top">DEFAULT</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>--enable-condvar-workaround</code></p></td>
<td align="left" valign="top"><p class="table">Enable workaround for broken priority
        inheritance with condition variables in glibc. This option
        adds some overhead to RTOS API emulators.</p></td>
<td align="left" valign="top"><p class="table">disabled</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><span class="footnote" id="_footnote_disable"><br />[Each option enabled by default can be forcibly disabled by passing <code>--disable-&lt;option&gt;</code> to the <em>configure</em> script]<br /></span></p></div>
</div>
</div>
<div class="sect2">
<h3 id="_cross_compilation">5.3. Cross-compilation</h3>
<div class="paragraph"><p>In order to cross-compile the Xenomai libraries and programs, you will
need to pass a <code>--host</code> and <code>--build</code> option to the <em>configure</em>
script. The <code>--host</code> option allow to select the architecture for which
the libraries and programs are built. The <code>--build</code> option allows to
choose the architecture on which the compilation tools are run,
i.e. the system running the <em>configure</em> script.</p></div>
<div class="paragraph"><p>Since cross-compiling requires specific tools, such tools are
generally prefixed with the host architecture name; for example, a
compiler for the PowerPC architecture may be named
<code>powerpc-linux-gcc</code>.</p></div>
<div class="paragraph"><p>When passing <code>--host=powerpc-linux</code> to configure, it will
automatically use <code>powerpc-linux-</code> as a prefix to all
compilation tools names and infer the host architecture name from this
prefix. If configure is unable to infer the architecture name from the
cross-compilation tools prefix, you will have to manually pass the
name of all compilation tools using at least the CC and LD, variables
on configure command line.</p></div>
<div class="paragraph"><p>The easiest way to build a GNU cross-compiler might involve using
crosstool-ng, available <a href="http://crosstool-ng.org/">here</a>.</p></div>
<div class="paragraph"><p>If you want to avoid to build your own cross compiler, you might if
find easier to use the ELDK. It includes the GNU cross development
tools, such as the compilers, binutils, gdb, etc., and a number of
pre-built target tools and libraries required on the target
system. See <a href="http://www.denx.de/wiki/DULG/ELDK">here</a> for further
details.</p></div>
<div class="paragraph"><p>Some other pre-built toolchains:</p></div>
<div class="ulist"><ul>
<li>
<p>
Mentor Sourcery CodeBench Lite Edition, available
<a href="http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/">here</a>;
</p>
</li>
<li>
<p>
Linaro toolchain (for the ARM architecture), available
<a href="https://launchpad.net/linaro-toolchain-binaries">here</a>.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="library-install-examples">6. Examples of building the Xenomai libraries and tools</h2>
<div class="sectionbody">
<div class="paragraph"><p>The examples in following sections use the following conventions:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>$xenomai_root</code>
</dt>
<dd>
<p>
path to the Xenomai sources
</p>
</dd>
<dt class="hdlist1">
<code>$build_root</code>
</dt>
<dd>
<p>
path to a clean build directory
</p>
</dd>
<dt class="hdlist1">
<code>$staging_dir</code>
</dt>
<dd>
<p>
path to a directory that will hold the installed file
 temporarily before they are moved to their final location; when used
 in a cross-compilation setup, it is usually a NFS mount point from
 the target&#8217;s root directory to the local build host, as a
 consequence of which running <code>make{nbsp}DESTDIR=$staging_dir{nbsp}install</code> on
 the host immediately updates the target system with the installed
 programs and libraries.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/caution.png" alt="Caution" />
</td>
<td class="content">In the examples below, make sure to add <code>--enable-smp</code> to the
<em>configure</em> script options if building for a SMP-enabled kernel.</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_building_the_x86_libraries_32_64bit">6.1. Building the x86 libraries (32/64bit)</h3>
<div class="paragraph"><p>Assuming that you want to build the <em>Mercury</em> libraries natively for a
x86_64/SMP system, enabling shared multi-processing support. You would
typically run:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ mkdir $build_root &amp;&amp; cd $build_root
$ $xenomai_root/configure --with-core=mercury --enable-smp --enable-pshared
$ make install</code></pre>
</div></div>
<div class="paragraph"><p>Conversely, cross-building the <em>Cobalt</em> libraries from x86_64 with the
same feature set, for running on x86_32 could be:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ mkdir $build_root &amp;&amp; cd $build_root
$ $xenomai_root/configure --with-core=cobalt --enable-smp --enable-pshared \
  --host=i686-linux CFLAGS="-m32 -O2" LDFLAGS="-m32"
$ make install</code></pre>
</div></div>
<div class="paragraph"><p>After installing the build tree (i.e. using "make install"), the
installation root should be populated with the librairies, programs
and header files you can use to build Xenomai-based real-time
applications.  This directory path defaults to <code>/usr/xenomai</code>.</p></div>
<div class="paragraph"><p>The remaining examples illustrate how to cross-compile Xenomai for
various architectures. Of course, you would have to install the proper
cross-compilation toolchain for the target system first.</p></div>
</div>
<div class="sect2">
<h3 id="_building_the_ppc32_libraries">6.2. Building the PPC32 libraries</h3>
<div class="paragraph"><p>A typical cross-compilation setup, in order to build the <em>Cobalt</em>
libraries for a ppc-6xx architecture. In that example, we want the
debug symbols to be generated for the executable, with no runtime
overhead though. We use the DENX ELDK cross-compiler:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $build_root
$ $xenomai_root/configure --host=powerpc-linux --with-core=cobalt \
  --enable-debug=symbols
$ make DESTDIR=$staging_dir install</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_building_the_ppc64_libraries">6.3. Building the PPC64 libraries</h3>
<div class="paragraph"><p>Same process than for a 32bit PowerPC target, using a crosstool-built
toolchain for ppc64/SMP.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cd $build_root
$ $xenomai_root/configure --host=powerpc64-unknown-linux-gnu \
  --with-core=cobalt --enable-smp
$ make DESTDIR=$staging_dir install</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_building_the_blackfin_libraries">6.4. Building the Blackfin libraries</h3>
<div class="paragraph"><p>Another cross-compilation setup, in order to build the <em>Cobalt</em>
libraries for the Blackfin architecture. We use
<a href="http://blackfin.uclinux.org/doku.php?id=toolchain:installing">ADI&#8217;s
toolchain</a> for this purpose:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ mkdir $build_root &amp;&amp; cd $build_root
$ $xenomai_root/configure --host=bfin-linux-uclibc --with-core=cobalt
$ make DESTDIR=$staging_dir install</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/note.png" alt="Note" />
</td>
<td class="content">Xenomai uses the FDPIC shared library format on this architecture. In
case of problem running the testsuite, try restarting the last two
build steps, passing the <code>--disable-shared</code> option to the "configure"
script.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_building_the_arm_libraries">6.5. Building the ARM libraries</h3>
<div class="paragraph"><p>Using codesourcery toolchain named <code>arm-none-linux-gnueabi-gcc</code> and
compiling for a CSB637 board (AT91RM9200 based), a typical cross-compilation
from a x86_32 desktop would look like:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ mkdir $build_root/xenomai &amp;&amp; cd $build_root/xenomai
$ $xenomai_root/configure CFLAGS="-march=armv4t" LDFLAGS="-march=armv4t" \
  --build=i686-pc-linux-gnu --host=arm-none-linux-gnueabi- --with-core=cobalt
$ make DESTDIR=$staging_dir install</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="../asciidoc-icons/important.png" alt="Important" />
</td>
<td class="content">Unlike previous releases, Xenomai no longer passes any arm
architecture specific flags, or FPU flags to gcc, so, users are
expected to pass them using the CFLAGS and LDFLAGS variables as
demonstrated above, where the AT91RM9200 is based on the ARM920T core,
implementing the <code>armv4</code> architecture. The following table summarizes
the CFLAGS and options which were automatically passed in previous
revisions and which now need to be explicitely passed to configure,
for the supported SOCs:</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="cols"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<caption class="title">Table 1. ARM configure options and compilation flags</caption>
<col width="33%" />
<col width="33%" />
<col width="33%" />
<thead>
<tr>
<th align="center" valign="top">SOC       </th>
<th align="center" valign="top"> CFLAGS                           </th>
<th align="center" valign="top"> configure options</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">at91rm9200</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv4t -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">at91sam9x</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv5 -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">imx1</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv4t -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">imx21</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv5 -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">imx31</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv6 -mfpu=vfp</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">imx51/imx53</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv7-a -mfpu=vfp3</code>
                <span class="footnote" id="_footnote_armv7"><br />[Depending on the                 gcc versions the flag for armv7                 may be <code>-march=armv7-a</code> or                 <code>-march=armv7a</code>]<br /></span></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">imx6q</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv7-a -mfpu=vfp3</code> <span class="footnoteref"><br /><a href="#_footnote_armv7">[armv7]</a><br /></span></p></td>
<td align="left" valign="top"><p class="table"><code>--enable-smp</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ixp4xx</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv5 -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code><code>--enable-arm-tsc=ixp4xx</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">omap3</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv7-a -mfpu=vfp3</code> <span class="footnoteref"><br /><a href="#_footnote_armv7">[armv7]</a><br /></span></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">omap4</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv7-a -mfpu=vfp3</code> <span class="footnoteref"><br /><a href="#_footnote_armv7">[armv7]</a><br /></span></p></td>
<td align="left" valign="top"><p class="table"><code>--enable-smp</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">orion</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv5 -mfpu=vfp</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pxa</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv5 -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pxa3xx</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv5 -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code>--enable-arm-quirks=xscale3</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">s3c24xx</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv4t -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">sa1100</p></td>
<td align="left" valign="top"><p class="table"><code>-march=armv4t -msoft-float</code></p></td>
<td align="left" valign="top"><p class="table"><code>--enable-arm-quirks=sa1100</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>It is possible to build for an older architecture version (v6 instead
of v7, or v4 instead of v5), if your toolchain does not support the
target architecture, the only restriction being that if SMP is
enabled, the architecture should not be less than v6.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing_the_installation">7. Testing the installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_booting_the_em_cobalt_em_kernel">7.1. Booting the <em>Cobalt</em> kernel</h3>
<div class="paragraph"><p>In order to test the Xenomai installation over <em>Cobalt</em>, you should
first try to boot the patched kernel. Check the kernel boot log for
messages like these:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ dmesg | grep -i xenomai
I-pipe: head domain Xenomai registered.
[Xenomai] Cobalt vX.Y.Z enabled</code></pre>
</div></div>
<div class="paragraph"><p>If the kernel fails booting, or the log messages indicates an error
status instead, see the
<a href="troubleshooting-a-dual-kernel-configuration#Kernel_log_displays_Xenomai_or_I-pipe_error_messages">TROUBLESHOOTING</a>
guide.</p></div>
</div>
<div class="sect2">
<h3 id="_testing_the_real_time_system_both_cores">7.2. Testing the real-time system (both cores)</h3>
<div class="paragraph"><p>First, run the latency test:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ /usr/xenomai/bin/latency</code></pre>
</div></div>
<div class="paragraph"><p>The latency test should display a message every second with minimum,
maximum and average latency values. If this test displays an error
message, hangs, or displays unexpected values, see the
<a href="troubleshooting-a-dual-kernel-configuration#the_latency_test_shows_high_latencies">TROUBLESHOOTING</a>
guide.</p></div>
<div class="paragraph"><p>If the latency test succeeds, you should try next to run the
<code>xeno-test</code> test in order to assess the worst-case latency of your
system. Try:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ xeno-test --help</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_calibrating_the_em_cobalt_em_core_timer">7.3. Calibrating the <em>Cobalt</em> core timer</h3>
<div class="paragraph"><p>The accuracy of the Cobalt timing services depends on proper
calibration of its core timer. Sound factory-default calibration
values are defined for each platform Xenomai supports, but it is
recommended to calibrate the core timer specifically for the target
system.</p></div>
<div class="paragraph"><p>See the documentation about the
<a href="../documentation/xenomai-3/html/man1/autotune/index.html">autotune(1)</a>
utility.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_running_xenomai_3_applications">8. Building and running Xenomai 3 applications</h2>
<div class="sectionbody">
<div class="paragraph"><p>Once the latency test behaves as expected on your target system, it is
deemed ready to run real-time applications.</p></div>
<div class="paragraph"><p>You may want to have a look at
<a href="building-applications-with-xenomai-3.x/">this
document</a> for details about the application build process.</p></div>
<div class="paragraph"><p>In addition, you may refer to
<a href="running-applications-with-xenomai-3.x/">this document</a> to learn
about the command line options available with Xenomai 3 applications.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_migrating_applications_to_xenomai_3">9. Migrating applications to Xenomai 3</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you plan to port an existing application based on Xenomai 2.x to
Xenomai 3.x, you should have a look at
<a href="migrating-from-xenomai-2.x-to-3.x/">this migration guide</a>.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2017-05-21 18:00:13 CEST
</div>
</div>
</body>
</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           eb460aaeba8395675164254645440a8c                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*
 * Copyright (C) 2005 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_SCHED_H
#define _COBALT_UAPI_SCHED_H

#define SCHED_COBALT		42
#define SCHED_WEAK		43

#ifndef SCHED_SPORADIC
#define SCHED_SPORADIC		10
#define sched_ss_low_priority	sched_u.ss.__sched_low_priority
#define sched_ss_repl_period	sched_u.ss.__sched_repl_period
#define sched_ss_init_budget	sched_u.ss.__sched_init_budget
#define sched_ss_max_repl	sched_u.ss.__sched_max_repl
#endif	/* !SCHED_SPORADIC */

struct __sched_ss_param {
	int __sched_low_priority;
	struct timespec __sched_repl_period;
	struct timespec __sched_init_budget;
	int __sched_max_repl;
};

#define sched_rr_quantum	sched_u.rr.__sched_rr_quantum

struct __sched_rr_param {
	struct timespec __sched_rr_quantum;
};

#ifndef SCHED_TP
#define SCHED_TP		11
#define sched_tp_partition	sched_u.tp.__sched_partition
#endif	/* !SCHED_TP */

struct __sched_tp_param {
	int __sched_partition;
};

struct sched_tp_window {
	struct timespec offset;
	struct timespec duration;
	int ptid;
};

enum {
	sched_tp_install,
	sched_tp_uninstall,
	sched_tp_start,
	sched_tp_stop,
};
	
struct __sched_config_tp {
	int op;
	int nr_windows;
	struct sched_tp_window windows[0];
};

#define sched_tp_confsz(nr_win) \
  (sizeof(struct __sched_config_tp) + nr_win * sizeof(struct sched_tp_window))

#ifndef SCHED_QUOTA
#define SCHED_QUOTA		12
#define sched_quota_group	sched_u.quota.__sched_group
#endif	/* !SCHED_QUOTA */

struct __sched_quota_param {
	int __sched_group;
};

enum {
	sched_quota_add,
	sched_quota_remove,
	sched_quota_force_remove,
	sched_quota_set,
	sched_quota_get,
};

struct __sched_config_quota {
	int op;
	union {
		struct {
			int pshared;
		} add;
		struct {
			int tgid;
		} remove;
		struct {
			int tgid;
			int quota;
			int quota_peak;
		} set;
		struct {
			int tgid;
		} get;
	};
	struct __sched_quota_info {
		int tgid;
		int quota;
		int quota_peak;
		int quota_sum;
	} info;
};

#define sched_quota_confsz()  sizeof(struct __sched_config_quota)

struct sched_param_ex {
	int sched_priority;
	union {
		struct __sched_ss_param ss;
		struct __sched_rr_param rr;
		struct __sched_tp_param tp;
		struct __sched_quota_param quota;
	} sched_u;
};

union sched_config {
	struct __sched_config_tp tp;
	struct __sched_config_quota quota;
};

#endif /* !_COBALT_UAPI_SCHED_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_TIME_H
#define _COBALT_UAPI_TIME_H

#ifndef CLOCK_MONOTONIC_RAW
#define CLOCK_MONOTONIC_RAW  4
#endif

/*
 * Additional clock ids we manage are supposed not to collide with any
 * of the POSIX and Linux kernel definitions so that no ambiguities
 * arise when porting applications in both directions.
 *
 * 0  .. 31   regular POSIX/linux clock ids.
 * 32 .. 63   statically reserved Cobalt clocks
 * 64 .. 127  dynamically registered Cobalt clocks (external)
 *
 * CAUTION: clock ids must fit within a 7bit value, see
 * include/cobalt/uapi/thread.h (e.g. cobalt_condattr).
 */
#define __COBALT_CLOCK_STATIC(nr)	((clockid_t)(nr + 32))

#define CLOCK_HOST_REALTIME  __COBALT_CLOCK_STATIC(0)

#define COBALT_MAX_EXTCLOCKS  64

#define __COBALT_CLOCK_EXT(nr)		((clockid_t)(nr) | (1 << 6))
#define __COBALT_CLOCK_EXT_P(id)	((int)(id) >= 64 && (int)(id) < 128)
#define __COBALT_CLOCK_EXT_INDEX(id)	((int)(id) & ~(1 << 6))

/*
 * Additional timerfd defines
 *
 * when passing TFD_WAKEUP to timer_settime, any timer expiration
 * unblocks the thread having issued timer_settime.
 */
#define TFD_WAKEUP	(1 << 2)

#endif /* !_COBALT_UAPI_TIME_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_KERNEL_THREAD_H
#define _COBALT_UAPI_KERNEL_THREAD_H

#include <cobalt/uapi/kernel/types.h>

/**
 * @ingroup cobalt_core_thread
 * @defgroup cobalt_core_thread_states Thread state flags
 * @brief Bits reporting permanent or transient states of threads
 * @{
 */

/* State flags (shared) */

#define XNSUSP    0x00000001 /**< Suspended. */
#define XNPEND    0x00000002 /**< Sleep-wait for a resource. */
#define XNDELAY   0x00000004 /**< Delayed */
#define XNREADY   0x00000008 /**< Linked to the ready queue. */
#define XNDORMANT 0x00000010 /**< Not started yet */
#define XNZOMBIE  0x00000020 /**< Zombie thread in deletion process */
#define XNMAPPED  0x00000040 /**< Thread is mapped to a linux task */
#define XNRELAX   0x00000080 /**< Relaxed shadow thread (blocking bit) */
#define XNMIGRATE 0x00000100 /**< Thread is currently migrating to another CPU. */
#define XNHELD    0x00000200 /**< Thread is held to process emergency. */
#define XNBOOST   0x00000400 /**< Undergoes a PIP boost */
#define XNSSTEP   0x00000800 /**< Single-stepped by debugger */
#define XNLOCK    0x00001000 /**< Scheduler lock control (pseudo-bit, not in ->state) */
#define XNRRB     0x00002000 /**< Undergoes a round-robin scheduling */
#define XNWARN    0x00004000 /**< Issue SIGDEBUG on error detection */
#define XNFPU     0x00008000 /**< Thread uses FPU */
#define XNROOT    0x00010000 /**< Root thread (that is, Linux/IDLE) */
#define XNWEAK    0x00020000 /**< Non real-time shadow (from the WEAK class) */
#define XNUSER    0x00040000 /**< Shadow thread running in userland */
#define XNJOINED  0x00080000 /**< Another thread waits for joining this thread */
#define XNTRAPLB  0x00100000 /**< Trap lock break (i.e. may not sleep with sched lock) */
#define XNDEBUG   0x00200000 /**< User-level debugging enabled */

/** @} */

/**
 * @ingroup cobalt_core_thread
 * @defgroup cobalt_core_thread_info Thread information flags
 * @brief Bits reporting events notified to threads
 * @{
 */

/* Information flags (shared) */

#define XNTIMEO   0x00000001 /**< Woken up due to a timeout condition */
#define XNRMID    0x00000002 /**< Pending on a removed resource */
#define XNBREAK   0x00000004 /**< Forcibly awaken from a wait state */
#define XNKICKED  0x00000008 /**< Forced out of primary mode */
#define XNWAKEN   0x00000010 /**< Thread waken up upon resource availability */
#define XNROBBED  0x00000020 /**< Robbed from resource ownership */
#define XNCANCELD 0x00000040 /**< Cancellation request is pending */
#define XNPIALERT 0x00000080 /**< Priority inversion alert (SIGDEBUG sent) */

/* Local information flags (private to current thread) */

#define XNMOVED   0x00000001 /**< CPU migration in primary mode occurred */
#define XNLBALERT 0x00000002 /**< Scheduler lock break alert (SIGDEBUG sent) */
#define XNDESCENT 0x00000004 /**< Adaptive transitioning to secondary mode */
#define XNSYSRST  0x00000008 /**< Thread awaiting syscall restart after signal */

/** @} */

/*
 * Must follow strictly the declaration order of the state flags
 * defined above. Status symbols are defined as follows:
 *
 * 'S' -> Forcibly suspended.
 * 'w'/'W' -> Waiting for a resource, with or without timeout.
 * 'D' -> Delayed (without any other wait condition).
 * 'R' -> Runnable.
 * 'U' -> Unstarted or dormant.
 * 'X' -> Relaxed shadow.
 * 'H' -> Held in emergency.
 * 'b' -> Priority boost undergoing.
 * 'T' -> Ptraced and stopped.
 * 'l' -> Locks scheduler.
 * 'r' -> Undergoes round-robin.
 * 't' -> Runtime mode errors notified.
 * 'L' -> Lock breaks trapped.
 */
#define XNTHREAD_STATE_LABELS  "SWDRU..X.HbTlrt.....L."

struct xnthread_user_window {
	__u32 state;
	__u32 info;
	__u32 grant_value;
};

#endif /* !_COBALT_UAPI_KERNEL_THREAD_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_KERNEL_HEAP_H
#define _COBALT_UAPI_KERNEL_HEAP_H

#include <linux/types.h>

#define COBALT_MEMDEV_PRIVATE  "memdev-private"
#define COBALT_MEMDEV_SHARED   "memdev-shared"
#define COBALT_MEMDEV_SYS      "memdev-sys"

struct cobalt_memdev_stat {
	__u32 size;
	__u32 free;
};

#define MEMDEV_RTIOC_STAT	_IOR(RTDM_CLASS_MEMORY, 0, struct cobalt_memdev_stat)

#endif /* !_COBALT_UAPI_KERNEL_HEAP_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /*
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_KERNEL_PIPE_H
#define _COBALT_UAPI_KERNEL_PIPE_H

#define	XNPIPE_IOCTL_BASE	'p'

#define XNPIPEIOC_GET_NRDEV	_IOW(XNPIPE_IOCTL_BASE, 0, int)
#define XNPIPEIOC_IFLUSH	_IO(XNPIPE_IOCTL_BASE, 1)
#define XNPIPEIOC_OFLUSH	_IO(XNPIPE_IOCTL_BASE, 2)
#define XNPIPEIOC_FLUSH		XNPIPEIOC_OFLUSH
#define XNPIPEIOC_SETSIG	_IO(XNPIPE_IOCTL_BASE, 3)

#define XNPIPE_NORMAL	0x0
#define XNPIPE_URGENT	0x1

#define XNPIPE_IFLUSH	0x1
#define XNPIPE_OFLUSH	0x2

#define XNPIPE_MINOR_AUTO  (-1)

#endif /* !_COBALT_UAPI_KERNEL_PIPE_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /*
 * Copyright (C) 2014 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_KERNEL_LIMITS_H
#define _COBALT_UAPI_KERNEL_LIMITS_H

#define XNOBJECT_NAME_LEN 32

#endif /* !_COBALT_UAPI_KERNEL_LIMITS_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           /*
 * Copyright (C) 2013 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_KERNEL_URW_H
#define _COBALT_UAPI_KERNEL_URW_H

#include <linux/types.h>

/*
 * A restricted version of the kernel seqlocks with a slightly
 * different interface, allowing for unsynced reads with concurrent
 * write detection, without serializing writers.  Caller should
 * provide for proper locking to deal with concurrent updates.
 *
 * urw_t lock = URW_INITIALIZER;
 * urwstate_t tmp;
 *
 * unsynced_read_block(&tmp, &lock) {
 *          (will redo until clean read)...
 * }
 *
 * unsynced_write_block(&tmp, &lock) {
 *          ...
 * }
 *
 * This code was inspired by Wolfgang Mauerer's linux/seqlock.h
 * adaptation for Xenomai 2.6 to support the VDSO feature.
 */

typedef struct {
	__u32 sequence;
} urw_t;

typedef struct {
	__u32 token;
	__u32 dirty;
} urwstate_t;

#define URW_INITIALIZER     { 0 }
#define DEFINE_URW(__name)  urw_t __name = URW_INITIALIZER

static inline void __try_read_start(const urw_t *urw, urwstate_t *tmp)
{
	__u32 token;
repeat:
	token = ACCESS_ONCE(urw->sequence);
	smp_rmb();
	if (token & 1) {
		cpu_relax();
		goto repeat;
	}

	tmp->token = token;
	tmp->dirty = 1;
}

static inline void __try_read_end(const urw_t *urw, urwstate_t *tmp)
{
	smp_rmb();
	if (urw->sequence != tmp->token) {
		__try_read_start(urw, tmp);
		return;
	}

	tmp->dirty = 0;
}

static inline void __do_write_start(urw_t *urw, urwstate_t *tmp)
{
	urw->sequence++;
	tmp->dirty = 1;
	smp_wmb();
}

static inline void __do_write_end(urw_t *urw, urwstate_t *tmp)
{
	smp_wmb();
	tmp->dirty = 0;
	urw->sequence++;
}

static inline void unsynced_rw_init(urw_t *urw)
{
	urw->sequence = 0;
}

#define unsynced_read_block(__tmp, __urw)		\
	for (__try_read_start(__urw, __tmp);		\
	     (__tmp)->dirty; __try_read_end(__urw, __tmp))

#define unsynced_write_block(__tmp, __urw)		\
	for (__do_write_start(__urw, __tmp);		\
	     (__tmp)->dirty; __do_write_end(__urw, __tmp))

#endif /* !_COBALT_UAPI_KERNEL_URW_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              /*
 * Copyright (C) 2008 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.

 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */

#ifndef _COPPERPLATE_SYNCOBJ_H
#define _COPPERPLATE_SYNCOBJ_H

#include <pthread.h>
#include <time.h>
#include <boilerplate/list.h>
#include <boilerplate/lock.h>
#include <copperplate/reference.h>

/* syncobj->flags */
#define SYNCOBJ_FIFO	0x0
#define SYNCOBJ_PRIO	0x1
#define SYNCOBJ_LOCKED	0x2

/* threadobj->wait_status */
#define SYNCOBJ_FLUSHED		0x1
#define SYNCOBJ_SIGNALED	0x2
#define SYNCOBJ_DRAINWAIT	0x4

#define SYNCOBJ_MAGIC  0xf9f99f9f

struct threadobj;

struct syncstate {
	int state;
};

#ifdef CONFIG_XENO_COBALT

#include <boilerplate/atomic.h>
#include <cobalt/uapi/monitor.h>

struct syncobj_corespec {
	cobalt_monitor_t monitor;
};

#else  /* CONFIG_XENO_MERCURY */

struct syncobj_corespec {
	pthread_mutex_t lock;
	pthread_cond_t drain_sync;
};

#endif /* CONFIG_XENO_MERCURY */

struct syncobj {
	unsigned int magic;
	int flags;
	int wait_count;
	struct listobj grant_list;
	int grant_count;
	struct listobj drain_list;
	int drain_count;
	struct syncobj_corespec core;
	fnref_type(void (*)(struct syncobj *sobj)) finalizer;
};

#define syncobj_for_each_grant_waiter(sobj, pos)		\
	list_for_each_entry(pos, &(sobj)->grant_list, wait_link)

#define syncobj_for_each_grant_waiter_safe(sobj, pos, tmp)	\
	list_for_each_entry_safe(pos, tmp, &(sobj)->grant_list, wait_link)

#define syncobj_for_each_drain_waiter(sobj, pos)		\
	list_for_each_entry(pos, &(sobj)->drain_list, wait_link)

#define syncobj_for_each_drain_waiter_safe(sobj, pos, tmp)	\
	list_for_each_entry_safe(pos, tmp, &(sobj)->drain_list, wait_link)

void __syncobj_cleanup_wait(struct syncobj *sobj,
			    struct threadobj *thobj);

#ifdef CONFIG_XENO_DEBUG

static inline void __syncobj_tag_locked(struct syncobj *sobj)
{
	sobj->flags |= SYNCOBJ_LOCKED;
}

static inline void __syncobj_tag_unlocked(struct syncobj *sobj)
{
	assert(sobj->flags & SYNCOBJ_LOCKED);
	sobj->flags &= ~SYNCOBJ_LOCKED;
}

static inline void __syncobj_check_locked(struct syncobj *sobj)
{
	assert(sobj->flags & SYNCOBJ_LOCKED);
}

#else /* !CONFIG_XENO_DEBUG */

static inline void __syncobj_tag_locked(struct syncobj *sobj)
{
}

static inline void __syncobj_tag_unlocked(struct syncobj *sobj)
{
}

static inline void __syncobj_check_locked(struct syncobj *sobj)
{
}

#endif /* !CONFIG_XENO_DEBUG */

#ifdef __cplusplus
extern "C" {
#endif

int __syncobj_broadcast_drain(struct syncobj *sobj, int reason);

int __syncobj_broadcast_grant(struct syncobj *sobj, int reason);

int syncobj_init(struct syncobj *sobj, clockid_t clk_id, int flags,
		 fnref_type(void (*)(struct syncobj *sobj)) finalizer) __must_check;

int syncobj_wait_grant(struct syncobj *sobj,
		 const struct timespec *timeout,
		 struct syncstate *syns) __must_check;

struct threadobj *syncobj_grant_one(struct syncobj *sobj);

void syncobj_grant_to(struct syncobj *sobj,
		      struct threadobj *thobj);

struct threadobj *syncobj_peek_grant(struct syncobj *sobj);

struct threadobj *syncobj_peek_drain(struct syncobj *sobj);

int syncobj_lock(struct syncobj *sobj,
		 struct syncstate *syns) __must_check;

void syncobj_unlock(struct syncobj *sobj,
		    struct syncstate *syns);

int syncobj_wait_drain(struct syncobj *sobj,
		       const struct timespec *timeout,
		       struct syncstate *syns) __must_check;

int syncobj_destroy(struct syncobj *sobj,
		    struct syncstate *syns);

void syncobj_uninit(struct syncobj *sobj);

static inline int syncobj_grant_wait_p(struct syncobj *sobj)
{
	__syncobj_check_locked(sobj);

	return !list_empty(&sobj->grant_list);
}

static inline int syncobj_count_grant(struct syncobj *sobj)
{
	__syncobj_check_locked(sobj);

	return sobj->grant_count;
}

static inline int syncobj_count_drain(struct syncobj *sobj)
{
	__syncobj_check_locked(sobj);

	return sobj->drain_count;
}

static inline int syncobj_drain_wait_p(struct syncobj *sobj)
{
	__syncobj_check_locked(sobj);

	return !list_empty(&sobj->drain_list);
}

static inline int syncobj_drain(struct syncobj *sobj)
{
	int ret = 0;

	__syncobj_check_locked(sobj);

	if (sobj->drain_count > 0)
		ret = __syncobj_broadcast_drain(sobj, SYNCOBJ_SIGNALED);

	return ret;
}

static inline int syncobj_grant_all(struct syncobj *sobj)
{
	int ret = 0;

	__syncobj_check_locked(sobj);

	if (sobj->grant_count > 0)
		ret = __syncobj_broadcast_grant(sobj, SYNCOBJ_SIGNALED);

	return ret;
}

static inline int syncobj_flush(struct syncobj *sobj)
{
	__syncobj_check_locked(sobj);

	if (sobj->grant_count > 0)
		__syncobj_broadcast_grant(sobj, SYNCOBJ_FLUSHED);

	if (sobj->drain_count > 0)
		__syncobj_broadcast_drain(sobj, SYNCOBJ_FLUSHED);

	return sobj->wait_count;
}

#ifdef __cplusplus
}
#endif

#endif /* _COPPERPLATE_SYNCOBJ_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*
 * Copyright (C) 2009 Wolfgang Mauerer <wolfgang.mauerer@siemens.com>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#ifndef _COBALT_UAPI_KERNEL_VDSO_H
#define _COBALT_UAPI_KERNEL_VDSO_H

#include <cobalt/uapi/kernel/urw.h>

struct xnvdso_hostrt_data {
	__u64 wall_sec;
	__u64 wtom_sec;
	__u64 cycle_last;
	__u64 mask;
	__u32 wall_nsec;
	__u32 wtom_nsec;
	__u32 mult;
	__u32 shift;
	__u32 live;
	urw_t lock;
};

/*
 * Data shared between the Cobalt kernel and applications, which lives
 * in the shared memory heap (COBALT_MEMDEV_SHARED).
 * xnvdso_hostrt_data.features tells which data is present. Notice
 * that struct xnvdso may only grow, but never shrink.
 */
struct xnvdso {
	__u64 features;
	/* XNVDSO_FEAT_HOST_REALTIME */
	struct xnvdso_hostrt_data hostrt_data;
	/* XNVDSO_FEAT_WALLCLOCK_OFFSET */
	__u64 wallclock_offset;
};

/* For each shared feature, add a flag below. */

#define XNVDSO_FEAT_HOST_REALTIME	0x0000000000000001ULL
#define XNVDSO_FEAT_WALLCLOCK_OFFSET	0x0000000000000002ULL

static inline int xnvdso_test_feature(struct xnvdso *vdso,
				      __u64 feature)
{
	return (vdso->features & feature) != 0;
}

#endif /* !_COBALT_UAPI_KERNEL_VDSO_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ELF          (                 4     (    -L     @  -L     @ B            B            author=Mauro Carvalho Chehab license=GPL    srcversion=AF81BEF83E3AB7F9C136DD3  depends=rc-core intree=Y vermagic=4.1.21-v7+ SMP mod_unload modversions ARMv7   rc-manli    V&[module_layout                                               -Crc_map_unregister                                           X.__aeabi_unwind_cpp_pr1                                      ߷rc_map_register                                                     $                                  t                                                	   	   
   
                           f     g      i      `     j      l      y     u          s           g     r           q                     rc_manli                                                                                                                                                                                                                                                                                                                                                                                     GNU F+o*vJ^Fl$& GCC: (Ubuntu/Linaro 4.8.4-2ubuntu1~14.04.1) 4.8.4  GCC: (Ubuntu/Linaro 4.8.4-2ubuntu1~14.04.1) 4.8.4 A.   aeabi $   7-A 
A	" .symtab .strtab .shstrtab .rel.init.text .rel.exit.text .ARM.extab.init.text .rel.ARM.exidx.init.text .ARM.extab.exit.text .rel.ARM.exidx.exit.text .modinfo .rodata.str1.4 __versions .rel.data .rel.gnu.linkonce.this_module .note.gnu.build-id .bss .comment .note.GNU-stack .ARM.attributes                                           H             4                      C             4                        	           
                 q             P                     *   	                            9             l                     R     p       x                    N   	                             g                                       p                           |   	           8        
                                                 2       4                                @                                 @                      	           P                              \                      	           `                                $                                                           0          f                              f                         p        f  /                                  !                               p  0     -         	                J                    +     ,     /     +     ,     1      *       2     *      *       2     *          	     0  x  .                                                                                                     	              
                                                                                                                                                                                   !              +              +                            .            +             	 +             
 @            T           +              i       $     s   $        +              y            +   ,             ,   #        P           `   	        i   6     +                          +                           +                                                             !             3              rc-manli.c $a init_rc_map_manli .LANCHOR0 $d exit_rc_map_manli __UNIQUE_ID_author1 __UNIQUE_ID_license0 manli_map manli rc-manli.mod.c __UNIQUE_ID_srcversion2 __module_depends __UNIQUE_ID_intree1 __UNIQUE_ID_vermagic0 ____versions __this_module cleanup_module rc_map_register init_module rc_map_unregister __aeabi_unwind_cpp_pr1                       ELF          (    5  4   D"   4   	 (     p                     4   4  4                 T  T  T                           $  $                                             p  p  p  h   h         Qtd                          Rtd              /lib/ld-linux-armhf.so.3             GNU                        GNU BӧqҍQ%         GNU K,N]Q)s]%            Yzk	4(0$H          	   
                                                  "   #   %   &   (   )           *       +               ,   .   2   <9vכ|Bɭ #H bd{g 4Ͱum|AM|.N=~]:)>f@}[;AYyc>d>~|~Sk|v 5,]G [zzqX|9@CE~|}L\tWc׊3wT<                               ,               ;               O               p                                    i                                                                                   	                                        w             d             5                                                     f             M             -             S                                    Z             0             B                                                             3                                                             <                       P                                    &                             |                   libcobalt.so.2 _ITM_deregisterTMCloneTable __gmon_start__ _Jv_RegisterClasses _ITM_registerTMCloneTable __wrap_clock_nanosleep __wrap_pthread_join __wrap_setsockopt __wrap_bind __wrap_read xenomai_auto_bootstrap __wrap_pthread_attr_init __wrap_pthread_create xenomai_init _fini __wrap_sigwait __wrap_close __wrap_connect __wrap_socket __wrap___printf_chk __wrap_write libpthread.so.0 pthread_attr_setschedpolicy open pthread_cancel __errno_location pthread_sigmask pthread_attr_setdetachstate pthread_attr_setschedparam pthread_attr_setinheritsched libc.so.6 exit perror __stack_chk_fail abort strlen sigemptyset sigaddset malloc __libc_start_main free ld-linux-armhf.so.3 __stack_chk_guard _edata __bss_start __bss_start__ __bss_end__ __end__ _end /usr/xenomai/lib GLIBC_2.4                                                                                   ii           &         ii           q         ii                   #            &    *     '  $    (  $  ,    0  
  4    8    <    @    D    H    L    P  ,  T    X    \    `    d    h  /  l  	  p     t  %  x  0  |  !        -                  @-  -h   Ə	ʌh Ə	ʌ` Ə	ʌX Ə	ʌP Ə	ʌH Ə	ʌ@ Ə	ʌ8 Ə	ʌ0 Ə	ʌ( Ə	ʌ  Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ  Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌ Ə	ʌx Ə	ʌp Ə	ʌh Ə	ʌ` Ə	ʌX-AOet*FFF0F&F0F / F۽BOEId  !  ~(F F'DB4%F &(F6z0DBp <F (ЧB % %FO Fd50DB #iFH%0@] B   &-AB;hG" F"5b!!B!  F# !#L!#!#iF#IU#  #F FF   (=,B1F,$!,!,,I	3F,(F \F  ȹ~ h(h1F h(h1F 5;h0FB6I    N O O jFMHK~      0 0   R/<ꌐ     KB  + pG@   +G  BB  sY pG@   *GB#x##pA` h+@  G@ Bh PiF ]Yh]  Bo !h"0%.=&OB$@9C-" ,P"F(Fo$#@0PI!I"    (F!F"z(FI   I   Ix   I    -Co !"C"o$#@0 (=I&OHFF XI!  J 5  FFBh F!FF8F8FI   RIx   LI   F\  -CFNFMF~D}Dv
= $4U?8FAFJFGBѽ     pG @-     server         0  @  X  h  x          ē  ܓ      client  /proc/self/cmdline  socket  setsockopt  bind    read    %s: received %d bytes, "%.*s"
  connect write   %s: sent %d bytes, "%.*s"
  pthread_create  Surfing With The Alien  Lords of Karma  Banana Mango    Psycho Monkey   Luminous Flesh Giants   Moroccan Sunset Satch Boogie    Flying In A Blue Dream  Ride    Summer Song Speed Of Light  Crystal Planet  Raspberry Jam Delta-V   Champagne?  Clouds Race Across The Sky  Engines Of Creation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            A    ُ               q     &               |                           o؁          T  
   	                                   d     T              o  o   o                                                                                                                                             GCC: (Ubuntu/Linaro 4.8.4-2ubuntu1~14.04.1) 4.8.4 GCC: (Ubuntu/Linaro 4.8.2-16ubuntu3) 4.8.2 A6   aeabi ,   7-A 
A	
" .symtab .strtab .shstrtab .interp .note.ABI-tag .note.gnu.build-id .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .text .fini .rodata .ARM.exidx .eh_frame .init_array .fini_array .jcr .dynamic .got .data .bss .comment .ARM.attributes                                                    T  T                    #         p  p                     1             H                  D   o   ؁    |               N         T  T  0              V             	                 ^   o     	  f                k   o     	  `                z   	      T  T
                     	      d  d
                         |  |                                                          @  @                                                                                     p                                                                                                                                                                                                                                                                                     0          ]                      p        !  7                                8!  
                               &   
     d         	              1                                       T            p                        ؁            T                                                T       	     d       
     |                        @                                                                                                                                                                                  ^   p         a   4         ^            ^   X         ^            ^            d            a            a   @         p   A       ^           ^            ^   d         ^                                            a   H            I          U          	       ^            a            ^                           @        \       ^   x                                  C  d         F  d        ^            C  |         C           S           C           C                               a                      ^            a                      ^              ُ                 ^                    <          ^           H         ^            g           a            ^            a                        ^             s           ^                                                                         ^            C           ^            C                                                                    +             ;             K         h          s          z                                                                                                                                         D             _          l             ~                                                                               
                      '             O         ^             p             }             @         6                                                                                
  5                               6   "  +          7         N        S             j              ~                                                                |                                   /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-linux-gnueabihf/lib/../lib/crt1.o $d $t bootstrap.c xenomai_bootstrap early_argc early_argv bufp-readwrite.c fail server client __FUNCTION__.10684 msg __FUNCTION__.10695 /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-linux-gnueabihf/lib/../lib/crti.o $a call_weak_fn /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-linux-gnueabihf/lib/../lib/crtn.o crtstuff.c __JCR_LIST__ deregister_tm_clones register_tm_clones __do_global_dtors_aux completed.9528 __do_global_dtors_aux_fini_array_entry frame_dummy __frame_dummy_init_array_entry elf-init.oS __FRAME_END__ __JCR_END__ __init_array_end _DYNAMIC __init_array_start _GLOBAL_OFFSET_TABLE_ __libc_csu_fini _ITM_deregisterTMCloneTable data_start __bss_start__ __wrap_pthread_create read@@GLIBC_2.4 free@@GLIBC_2.4 __stack_chk_guard@@GLIBC_2.4 _bss_end__ _edata __wrap_read _fini __bss_end__ __stack_chk_fail@@GLIBC_2.4 __wrap_bind __wrap_pthread_attr_init __wrap_sigwait __wrap_clock_nanosleep xenomai_init perror@@GLIBC_2.4 pthread_attr_setschedparam@@GLIBC_2.4 pthread_sigmask@@GLIBC_2.4 __data_start malloc@@GLIBC_2.4 sigaddset@@GLIBC_2.4 __libc_start_main@@GLIBC_2.4 pthread_attr_setschedpolicy@@GLIBC_2.4 __wrap___printf_chk __gmon_start__ open@@GLIBC_2.4 __dso_handle exit@@GLIBC_2.4 pthread_attr_setinheritsched@@GLIBC_2.4 _IO_stdin_used strlen@@GLIBC_2.4 __wrap_close svtid __libc_csu_init xenomai_main __errno_location@@GLIBC_2.4 __wrap_socket __wrap_connect __wrap_setsockopt _end pthread_cancel@@GLIBC_2.4 _start cltid __end__ __wrap_main __bss_start xenomai_auto_bootstrap main sigemptyset@@GLIBC_2.4 _Jv_RegisterClasses __TMC_END__ _ITM_registerTMCloneTable pthread_attr_setdetachstate@@GLIBC_2.4 __wrap_pthread_join abort@@GLIBC_2.4 _init close@@GLIBC_2.4 __wrap_write                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         /*
 * Copyright (C) 2006 Gilles Chanteperdrix <gilles.chanteperdrix@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <stdlib.h>

#ifndef _COBALT_STDLIB_H
#define _COBALT_STDLIB_H

/* Re-read in case we came from selective __need* block. */
#include_next <stdlib.h>
#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif /* __cplusplus */

COBALT_DECL(void, free(void *ptr));

COBALT_DECL(void *, malloc(size_t size));

#ifdef __cplusplus
}
#endif /* __cplusplus */

#endif /* !_COBALT_STDLIB_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*
 * Copyright (C) 2005 Philippe Gerum <rpm@xenomai.org>.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
 */
#pragma GCC system_header
#include_next <fcntl.h>

#ifndef _COBALT_FCNTL_H
#define _COBALT_FCNTL_H

#include <cobalt/wrappers.h>

#ifdef __cplusplus
extern "C" {
#endif

COBALT_DECL(int, open(const char *path, int oflag, ...));

COBALT_DECL(int, open64(const char *path, int oflag, ...));

COBALT_DECL(int, fcntl(int fd, int cmd, ...));

#ifdef __cplusplus
}
#endif

#endif /* !_COBALT_FCNTL_H */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  